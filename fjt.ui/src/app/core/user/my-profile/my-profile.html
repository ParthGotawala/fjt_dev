<div id="forms" class="page-layout simple fullwidth doc-page breadcrumb-fixed" layout="column" cg-busy="{promise:vm.cgBusyLoading}">
  <ms-form-wizard flex>
    <div class="header md-accent-bg" layout="row" layout-align="start center">
      <div class="white-fg" layout="row" layout-align="space-between center" flex="100">
        <div layout="column">
          <div class="h2" layout="row" layout-align="start center">
            <!--<md-icon md-font-icon="icon-account"></md-icon>&nbsp;
            <span class="header-title">My Profile</span>-->
            <pagetitle is-list="true" is-display-menu-name="true"></pagetitle>
          </div>

          <div layout="row" layout-align="start center" class="product-count">
            <md-icon md-font-icon="icon-home" ng-click="vm.GoToHome()" class="s16 cursor-pointer md-accent homelink"></md-icon>
            <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
            <a class="breadcrumbs-link">User Profile</a>
          </div>
        </div>
        <div flex layout="row" layout-align="end center" ng-if="vm.selectedTabIndex == '2' || vm.selectedTabIndex == '3'">
          <md-button class="md-raised md-primary" ng-click="vm.CheckStepAndAction(msWizard,true,$event)" ng-disabled="vm.saveDisable" ng-class="{'md-formdirty': vm.checkFormDirty(msWizard.currentStepForm(),vm.checkDirtyObject) || vm.ischange }" id="saveProfileBtn">
            Save
          </md-button>
        </div>
      </div>
    </div>
    <div class="content-card padding-top-side cm-custom-label-common" layout="column" flex>
      <div layout="row" flex="100" class="no-box-shadow">
        <!-- FORM WIZARD -->

        <md-tabs flex="100" validate-step="true" is-valid="vm.isStepValid" class="manage-customer-tabing padding-bottom-0" md-dynamic-height md-selected="vm.selectedTabIndex">

          <md-tab md-on-select="vm.onTabChanges(vm.DetailsTabName,msWizard)" ng-disabled="!vm.pageTabRights.DetailTab">
            <md-tab-label>
              <span class="ms-form-wizard-step-label">
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.employeeDetail.$invalid">1</span>
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.employeeDetail.$valid">
                  <i class="icon-check s16"></i>
                </span>
                <span class="ms-form-wizard-step-text">Details</span>
              </span>
            </md-tab-label>
            <md-tab-body>
              <form name="vm.employeeDetail" class="md-inline-form" ms-form-wizard-form novalidate>
                <md-content class="md-padding" layout="row" flex="100" layout-wrap>
                  <div layout="row" layout-wrap flex="100">
                    <div flex="20" flex-gt-xs="20" class="pr-10">
                      <div layout="column" layout-gt-xs="row" flex class="pastewrapper component-profile-view">
                        <div flex="100" class="drop-box image drop-box-height">
                          <img class="img img-no-drag" ng-src="{{vm.imagefile}}" />
                        </div>
                      </div>
                    </div>
                    <div flex="40" flex-gt-xs="40" layout-wrap class="pr-10">
                      <div class="cm-section-main full-height layout-align-start-start" layout="row" layout-wrap flex="100">
                        <div class="cm-section-header" flex="100">
                          <h2>Personal Details</h2>
                        </div>
                        <div class="cm-section-inner" flex="100">
                          <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                            <tbody>
                              <tr>
                                <th><p class="label-container">First Name:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">{{vm.employee.firstName}}</p>
                                </td>
                                <th><p class="label-container">Middle Name:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">{{vm.employee.middleName}}</p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Last Name:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">{{vm.employee.lastName}}</p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Email:<span>&nbsp;</span></p></th>
                                <td colspan="4">
                                  <p class="mv-5">
                                    {{vm.employee.email}}
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Phone:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.contact}}
                                  </p>
                                </td>
                                <th><p class="label-container">Fax:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.faxNumber}}
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Manager Name:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.managerName}}
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Burden Rate:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.burdenRate?'$':''}} {{vm.employee.burdenRate}}
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>

                      <!--<div flex="100" class="component-box-title"><span>Personal Details</span></div>
                      <div class="component-box padding-bottom-5" layout="row" layout-wrap>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">First Name: </label>
                              <p class="margin-0" flex="55">{{vm.employee.firstName}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Middle Name: </label>
                              <p class="margin-0" flex="55">{{vm.employee.middleName}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Last Name: </label>
                              <p class="margin-0" flex="55">{{vm.employee.lastName}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="100">
                              <label flex="20">Email: </label>
                              <p class="margin-left-15 margin-top-0 margin-bottom-0" style="text-transform: lowercase;" flex="80">{{vm.employee.email}}</p>

                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Phone:</label>
                              <p class="margin-0" flex="55" ng-model="vm.employee.contact">{{vm.employee.contact}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Fax:</label>
                              <p class="margin-0" flex="55" ng-model="vm.employee.faxNumber">{{vm.employee.faxNumber}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Manager Name:</label>
                              <p class="margin-0" flex="55">{{vm.employee.managerName}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Burden Rate:</label>
                              <p class="margin-0" flex="55">{{vm.employee.burdenRate?'$':''}} {{vm.employee.burdenRate}}</p>
                          </div>
                      </div>-->
                    </div>
                    <div flex="40" flex-gt-xs="40" layout-wrap class="pr-10">
                      <div class="cm-section-main" layout="row" layout-wrap flex="100">
                        <div class="cm-section-header" flex="100">
                          <h2>Address Details</h2>
                        </div>
                        <div class="cm-section-inner" flex="100">
                          <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                            <tbody>
                              <tr>
                                <th><p class="label-container">Address Line 1:<span>&nbsp;</span></p></th>
                                <td colspan="3">
                                  <p class="mv-5">{{vm.employee.street1}}</p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Address Line 2:<span>&nbsp;</span></p></th>
                                <td colspan="3">
                                  <p class="mv-5">{{vm.employee.street2}}</p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">Address Line 3:<span>&nbsp;</span></p></th>
                                <td colspan="3">
                                  <p class="mv-5">{{vm.employee.street3}}</p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">{{ vm.LabelConstant.Employee.City }}:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.city}}
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">{{ vm.LabelConstant.Employee.State }}:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.state}}
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">{{ vm.LabelConstant.Employee.Country }}:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.countryMst.countryName}}
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th><p class="label-container">{{ vm.LabelConstant.Employee.ZipCode }}:<span>&nbsp;</span></p></th>
                                <td>
                                  <p class="mv-5">
                                    {{vm.employee.postcode}}
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <!--<div flex="100" class="component-box-title"><span>Address Details</span></div>
                      <div class="component-box padding-bottom-5" layout="row" layout-wrap>
                          <div class="row-main" layout="row" flex="100">
                              <label flex="25">Address Line 1:</label>
                              <p class="margin-left-15 margin-top-0 margin-bottom-0" flex="75">{{vm.employee.street1}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="100">
                              <label flex="25">Address Line 2:</label>
                              <p class="margin-left-15 margin-top-0 margin-bottom-0" flex="75">{{vm.employee.street2}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="100">
                              <label flex="25">Address Line 3:</label>
                              <p class="margin-left-15 margin-top-0 margin-bottom-0" flex="75">{{vm.employee.street3}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">City:</label>
                              <p class="margin-0" flex="55">{{vm.employee.city}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">State:</label>
                              <p class="margin-0" flex="55">{{vm.employee.state}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Country:</label>
                              <p class="margin-0" flex="55">{{vm.employee.countryMst.countryName}}</p>
                          </div>
                          <div class="row-main" layout="row" flex="50">
                              <label flex="45">Post Code:</label>
                              <p class="margin-0" flex="55">{{vm.employee.postcode}}</p>
                          </div>

                      </div>-->
                    </div>
                  </div>
                  <div layout="row" layout-wrap flex="100" class="margin-top-10">
                    <div flex="20" flex-gt-xs="20" class="pr-10">

                    </div>
                    <div flex="80" flex-gt-xs="80" layout-wrap class="pr-10">
                      <div class="cm-section-main full-height layout-align-start-start" layout="row" layout-wrap flex="100">
                        <div class="cm-section-header" flex="100">
                          <h2>Responsibilities</h2>
                        </div>
                        <div class="cm-section-inner" flex="100">
                          <span ng-repeat="empresponsibility in vm.employeeResponsibilityList track by $index" ng-if="vm.employeeResponsibilityList.length > 0">
                            <label class="margin-5 label-box label-primary">{{empresponsibility.responsibility.gencCategoryName}}</label>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div layout="row" layout-wrap flex="100" class="margin-top-10">
                    <div flex="20" flex-gt-xs="20" class="pr-10">
                    </div>
                    <div flex="80" flex-gt-xs="80" layout-wrap class="pr-10">
                      <div class="cm-section-main full-height layout-align-start-start" layout="row" layout-wrap flex="100">
                        <div class="cm-section-header" flex="100">
                          <h2>Standards</h2>
                        </div>
                        <div class="cm-section-inner" flex="100">
                          <span ng-repeat="standard in vm.employeeCertificationList" ng-if="vm.employeeCertificationList.length > 0">
                            <label class="margin-5 label-box" ng-if="standard.allClassList.length > 0"
                                   ng-repeat="classItem in standard.allClassList"
                                   ng-style="{'background-color': classItem.colorCode}">{{standard.standard + (classItem.class?(' '+ classItem.class):'')}}</label>
                            <label class="margin-5 label-box" ng-if="standard.allClassList.length == 0"
                                   ng-style="{'background-color': standard.colorCode}">{{standard.standard}}</label>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </md-content>
              </form>
            </md-tab-body>
          </md-tab>

          <md-tab label="User Page Rights" md-on-select="vm.onTabChanges(vm.RoleTabName,msWizard)" ng-disabled="!vm.pageTabRights.SecurityTab">


            <md-tab-label>
              <span class="ms-form-wizard-step-label">
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="!vm.loginUserID">1</span>
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.loginUserID">
                  <i class="icon-check s16"></i>
                </span>
                <span class="ms-form-wizard-step-text">Role and Page Rights</span>
              </span>
            </md-tab-label>
            <md-tab-body>
              <form name="vm.rolePagePermisionForm" class="padding-10-imp" ms-form-wizard-form novalidate>
                <div layout="row">
                  <div flex="100" class="employee-table-data">
                    <div class="profile-page" ng-if="vm.loginUserID>0 && vm.isRoleTab && vm.userId">
                      <!--<role-page-rights user-id="vm.userId" selected-role="vm.selectedRole" assign-role-permission-to-user="vm.AssignRolePermissionToUser"
                      page-name="vm.pageName" is-right-change="vm.isRightChange"
                      is-feature-change="vm.isFeatureChange" is-db-view-data-source-change="false"
                      is-view-only="true"></role-page-rights>-->
                      <role-page-rights-new user-id="vm.userId" identity-user-id="vm.identityUserId" selected-role="vm.selectedRole" assign-role-permission-to-user="vm.AssignRolePermissionToUser"
                                            page-name="vm.pageName" is-right-change="vm.isRightChange"
                                            is-feature-change="vm.isFeatureChange" is-role-change="vm.isRoleChange"  is-db-view-data-source-change="false"
                                            is-view-only="true"></role-page-rights-new>
                    </div>
                  </div>
                </div>
              </form>
            </md-tab-body>
          </md-tab>

          <md-tab label="User Page Rights" md-on-select="vm.onTabChanges(vm.UserSettings,msWizard)" ng-disabled="!vm.pageTabRights.SettingTab">
            <md-tab-label>
              <span class="ms-form-wizard-step-label">
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="!vm.loginUserID">1</span>
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.loginUserID">
                  <i class="icon-check s16"></i>
                </span>
                <span class="ms-form-wizard-step-text">User Settings</span>
              </span>
            </md-tab-label>
            <md-tab-body>
              <form name="vm.userSettingsForm" ms-form-wizard-form novalidate>
                <div flex="65">
                  <div layout="row" class="margin-top-0" flex="80">
                    <div flex="100" class="customerbox width-100p mr-10" layout="row" layout-wrap ng-if="!vm.showprinterdropdown">
                      <div flex="80" class="address-detail-section">
                        <div class="row-main md-tab margin-bottom-0" layout="row" flex="100">
                          <label flex="100"> Printer Name:</label>
                        </div>
                        <div class="row-main md-tab margin-bottom-0" layout="row" flex="100">
                          <p class="margin-0" flex="100">{{vm.PrintDetail.gencCategoryName?vm.PrintDetail.gencCategoryName:'Please select printer name'}}</p>
                        </div>
                      </div>
                      <div flex="20" layout="row" class="address-button">
                        <div class="customeractionbtn">
                          <md-button class="md-icon-button margin-0 md-primary md-raised md-mini" ng-click="vm.editPrinter()">
                            <md-icon md-font-icon="icon-pencil" class="material-icons mat-icon"></md-icon>
                            <md-tooltip>Update</md-tooltip>
                          </md-button>
                        </div>
                      </div>
                    </div>
                    <md-input-container ng-if="vm.autoCompletePrinter && vm.showprinterdropdown" class="autocompletecustom margin-bottom-0 margin-right-10" flex="50">
                      <custom-auto-complete datalist="vm.PrinterList"
                                            column-name="vm.autoCompletePrinter.columnName"
                                            controller-name="vm.autoCompletePrinter.controllerName"
                                            view-template-url="vm.autoCompletePrinter.viewTemplateURL"
                                            key-column-name="vm.autoCompletePrinter.keyColumnName"
                                            input-name="vm.autoCompletePrinter.inputName"
                                            placeholder-name="vm.autoCompletePrinter.placeholderName"
                                            key-column-id="vm.autoCompletePrinter.keyColumnId"
                                            is-required="vm.autoCompletePrinter.isRequired"
                                            is-addnew="vm.autoCompletePrinter.isAddnew"
                                            callback-fn="vm.autoCompletePrinter.callbackFn"
                                            add-data="vm.autoCompletePrinter.addData"
                                            on-select-callback-fn="vm.autoCompletePrinter.onSelectCallbackFn">
                      </custom-auto-complete>
                    </md-input-container>
                    <div flex="100" class="customerbox width-100p" layout="row" layout-wrap ng-if="!vm.showroledropdown">
                      <div flex="80" class="address-detail-section">
                        <div class="row-main md-tab margin-bottom-0" layout="row" flex="100">
                          <label flex="100"> Default Login Role Name:</label>
                        </div>
                        <div class="row-main md-tab margin-bottom-0" layout="row" flex="100">
                          <p class="margin-0" flex="100">{{vm.RoleDetail.roleName?vm.RoleDetail.roleName:'Please select role name'}}</p>
                        </div>
                      </div>
                      <div flex="20" layout="row" class="address-button">
                        <div class="customeractionbtn">
                          <md-button class="md-icon-button margin-0 md-primary md-raised md-mini" ng-click="vm.editDefaultRole()" ng-disabled="true">
                            <md-icon md-font-icon="icon-pencil" class="material-icons mat-icon"></md-icon>
                            <md-tooltip>Update</md-tooltip>
                          </md-button>
                        </div>
                      </div>
                    </div>
                    <md-input-container ng-if="vm.autoCompleteDefaultRole && vm.showroledropdown" class="autocompletecustom margin-bottom-0" flex="50">
                      <custom-auto-complete datalist="vm.RoleList"
                                            column-name="vm.autoCompleteDefaultRole.columnName"
                                            controller-name="vm.autoCompleteDefaultRole.controllerName"
                                            view-template-url="vm.autoCompleteDefaultRole.viewTemplateURL"
                                            key-column-name="vm.autoCompleteDefaultRole.keyColumnName"
                                            input-name="vm.autoCompleteDefaultRole.inputName"
                                            placeholder-name="vm.autoCompleteDefaultRole.placeholderName"
                                            key-column-id="vm.autoCompleteDefaultRole.keyColumnId"
                                            is-required="vm.autoCompleteDefaultRole.isRequired"
                                            is-addnew="vm.autoCompleteDefaultRole.isAddnew"
                                            callback-fn="vm.autoCompleteDefaultRole.callbackFn"
                                            on-select-callback-fn="vm.autoCompleteDefaultRole.onSelectCallbackFn">
                      </custom-auto-complete>
                    </md-input-container>
                  </div>
                </div>
              </form>
            </md-tab-body>
          </md-tab>


          <md-tab label="User Preferences" md-on-select="vm.onTabChanges(vm.UserPreTabName,msWizard)" ng-disabled="!vm.pageTabRights.PreferenceTab">
            <md-tab-label>
              <span class="ms-form-wizard-step-label">
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="!vm.loginUserID">1</span>
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.loginUserID">
                  <i class="icon-check s16"></i>
                </span>
                <span class="ms-form-wizard-step-text">User Preferences</span>
              </span>
            </md-tab-label>
            <md-tab-body>
              <form name="vm.userPreferencesForm" class="padding-10-imp" ms-form-wizard-form novalidate>
                <div layout="row">
                  <div flex="100" class="employee-table-data">
                    <div class="profile-page" ng-if="vm.isUserPreTab && vm.userId">
                      <user-preference user-id="vm.userId"
                                       page-name="vm.pageName"></user-preference>

                    </div>
                  </div>
                </div>

              </form>
            </md-tab-body>
          </md-tab>


          <md-tab label="User Agreement" md-on-select="vm.onTabChanges(vm.UserSignUpAgreementTabName,msWizard)" ng-disabled="!vm.pageTabRights.AgreementTab">
            <md-tab-label>
              <span class="ms-form-wizard-step-label">
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="!vm.loginUserID">1</span>
                <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.loginUserID">
                  <i class="icon-check s16"></i>
                </span>
                <span class="ms-form-wizard-step-text">User Agreement</span>
              </span>
            </md-tab-label>
            <md-tab-body>
              <form name="vm.userAgreeementForm" class="padding-10-imp margin-left-5" ms-form-wizard-form novalidate>
                <div layout="row">
                  <div flex="100" class="employee-table-data">
                    <div class="profile-page" ng-if="vm.loginUserID>0 && vm.isAgreeemntTab">
                      <user-signup-agreement user-id="vm.loginUserID"></user-signup-agreement>
                    </div>
                  </div>
                </div>
              </form>
            </md-tab-body>
          </md-tab>

        </md-tabs>
        <!--<div flex="100" class="fab-footer fab-footer-left" layout="row" layout-align="start start">
            <md-button class="md-raised md-primary md-fab" ng-click="vm.loadPreviousStep(msWizard);" ng-disabled="msWizard.isFirstStep()">
                <md-icon class="icon-chevron-left"></md-icon>
                <md-tooltip md-direction="top">Previous</md-tooltip>
            </md-button>
            <md-button class="md-raised md-primary md-fab" ng-click="vm.CheckStepAndAction(msWizard,  true);" ng-disabled="msWizard.currentStepInvalid() || msWizard.isLastStep()">
                <md-icon class="icon-chevron-right"></md-icon>
                <md-tooltip md-direction="top">Next</md-tooltip>
            </md-button>
        </div-->
        <!--<div flex="100" class="fab-footer fab-footer-right" layout="row" layout-align="start start" ng-if="msWizard.isLastStep()">
            <md-button class="md-raised md-primary md-fab" ng-click="vm.CheckStepAndAction(msWizard,true,$event)" ng-disabled="(!vm.user.printerID && !vm.user.printFormatID && !vm.user.defaultLoginRoleID )||!vm.ischange">
                <md-icon class="icon-content-save save-and-home"></md-icon>
                <md-tooltip md-direction="top">Save</md-tooltip>
            </md-button>
        </div>-->

      </div>
    </div>
  </ms-form-wizard>
</div>
