<md-dialog aria-label="Add Part" class="cm-custom-label-common" flex="50" cg-busy="{promise:vm.cgBusyLoading}" draggable>
  <form name="vm.AddEmailReportSettingForm" novalidate>
    <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>{{vm.cid?'Update':'Add'}} E-mail Report Setting</h2>
        <span flex></span>
        <div layout="row" layout-align="center center">
          <popup-header-label label-data="vm.headerdata"></popup-header-label>
        </div>
        <md-button class="md-icon-button" ng-click="vm.cancel()">
          <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="customer-modal no-padding" layout="column">
      <md-content class="padding-10">
        <div class="cm-section-main border-0" flex="100">
          <div class="cm-section-inner">
            <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
              <tbody>
                <tr>
                  <th ng-if="vm.autoCompleteReportName">
                    <p class="label-container">{{vm.autoCompleteReportName.placeholderName}} <span ng-if="vm.autoCompleteReportName.isRequired">&nbsp;*</span></p>
                  </th>
                  <td colspan="3" ng-if="vm.autoCompleteReportName">
                    <md-input-container class="autocompletecustom cm-custom-autocomplete margin-0" flex="100" custom-auto-focus="true">
                      <custom-auto-complete datalist="vm.reportNameList"
                                            column-name="vm.autoCompleteReportName.columnName"
                                            key-column-name="vm.autoCompleteReportName.keyColumnName"
                                            input-name="vm.autoCompleteReportName.inputName"
                                            placeholder-name="vm.autoCompleteReportName.placeholderName"
                                            key-column-id="vm.autoCompleteReportName.keyColumnId"
                                            is-required="vm.autoCompleteReportName.isRequired"
                                            on-select-callback-fn="vm.autoCompleteReportName.onSelectCallbackFn"
                                            is-disabled="vm.pReportID">
                      </custom-auto-complete>
                    </md-input-container>
                  </td>
                </tr>
                <tr>
                  <th ng-if="vm.autoCompleteScheduleType">
                    <p class="label-container">{{vm.autoCompleteScheduleType.placeholderName}} <span ng-if="vm.autoCompleteScheduleType.isRequired">&nbsp;*</span></p>
                  </th>
                  <td ng-if="vm.autoCompleteScheduleType">
                    <md-input-container class="autocompletecustom cm-custom-autocomplete margin-0" flex="100">
                      <custom-auto-complete datalist="vm.emailReportScheduleType"
                                            column-name="vm.autoCompleteScheduleType.columnName"
                                            key-column-name="vm.autoCompleteScheduleType.keyColumnName"
                                            input-name="vm.autoCompleteScheduleType.inputName"
                                            placeholder-name="vm.autoCompleteScheduleType.placeholderName"
                                            key-column-id="vm.autoCompleteScheduleType.keyColumnId"
                                            is-required="vm.autoCompleteScheduleType.isRequired"
                                            on-select-callback-fn="vm.autoCompleteScheduleType.onSelectCallbackFn">
                      </custom-auto-complete>
                    </md-input-container>
                  </td>
                  <th>
                    <div layout="row" class="layout-row margin-left-10">
                      <md-checkbox ng-model="vm.emailReportSetting.IsActive" name="isActive" class="margin-0">
                        Active
                      </md-checkbox>
                    </div>
                  </th>
                  <td class="width-25">
                  </td>
                </tr>
                <tr>
                  <th ng-if="vm.autoCompleteCustomer">
                    <p class="label-container">{{vm.autoCompleteCustomer.placeholderName}} <span ng-if="vm.autoCompleteCustomer.isRequired">&nbsp;*</span></p>
                  </th>
                  <td colspan="3" ng-if="vm.autoCompleteCustomer">
                    <md-input-container class="autocompletecustom width-100p cm-rfq-ac-zindex margin-0" flex="100">
                      <custom-auto-complete datalist="vm.CustomerList"
                                            column-name="vm.autoCompleteCustomer.columnName"
                                            controller-name="vm.autoCompleteCustomer.controllerName"
                                            view-template-url="vm.autoCompleteCustomer.viewTemplateURL"
                                            key-column-name="vm.autoCompleteCustomer.keyColumnName"
                                            input-name="vm.autoCompleteCustomer.inputName"
                                            key-column-id="vm.autoCompleteCustomer.keyColumnId"
                                            is-required="vm.autoCompleteCustomer.isRequired"
                                            is-addnew="vm.autoCompleteCustomer.isAddnew"
                                            callback-fn="vm.autoCompleteCustomer.callbackFn"
                                            add-data="vm.autoCompleteCustomer.addData"
                                            on-select-callback-fn="vm.autoCompleteCustomer.onSelectCallbackFn"
                                            is-disabled="vm.pCustomerID">
                      </custom-auto-complete>
                    </md-input-container>
                  </td>
                </tr>
                <tr ng-if="vm.autoCompleteCustomer.keyColumnId && vm.ContactPersonList && vm.emailReportSetting">
                  <th>
                  </th>
                  <td colspan="3">
                    <div flex="100">
                      <p class="label-container" flex="100" layout-align="start start">E-mail Recipients<span>&nbsp;*</span></p>
                      <div layout="row" layout-align="start center" flex="100"
                           ng-repeat="emailAddress in vm.emailReportSetting.EmailAddressDetail">
                        <md-input-container class="autocompletecustom md-block margin-0" flex ng-if="emailAddress.autoCompletePersonName">
                          <custom-auto-complete datalist="vm.ContactPersonList"
                                                column-name="emailAddress.autoCompletePersonName.columnName"
                                                key-column-name="emailAddress.autoCompletePersonName.keyColumnName"
                                                input-name="emailAddress.autoCompletePersonName.inputName"
                                                placeholder-name="emailAddress.autoCompletePersonName.placeholderName"
                                                key-column-id="emailAddress.autoCompletePersonName.keyColumnId"
                                                is-required="emailAddress.autoCompletePersonName.isRequired"
                                                controller-name="emailAddress.autoCompletePersonName.controllerName"
                                                view-template-url="emailAddress.autoCompletePersonName.viewTemplateURL"
                                                callback-fn-param="emailAddress"
                                                is-addnew="emailAddress.autoCompletePersonName.isAddnew"
                                                add-data="emailAddress.autoCompletePersonName.addData"
                                                callback-fn="emailAddress.autoCompletePersonName.callbackFn"
                                                on-select-callback-fn="emailAddress.autoCompletePersonName.onSelectCallbackFn"
                                                is-disabled="emailAddress.id>0">
                          </custom-auto-complete>
                        </md-input-container>
                        <div layout="row" layout-align="start center" ng-hide="vm.emailReportSetting.EmailAddressDetail.length==1">
                          <md-button class="md-icon-button md-primary md-mini" ng-click="vm.removePerson(emailAddress)">
                            <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                            <md-tooltip>Remove Recipient</md-tooltip>
                          </md-button>
                        </div>
                      </div>
                      <div flex="100" layout-align="center" class="margin-top-10" layout="row">
                        <md-button class="md-primary md-raised md-button margin-0 md-ink-ripple"
                                   ng-click="vm.addPerson()">
                          Add Recipient
                        </md-button>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </md-content>
    </md-dialog-content>
    <md-dialog-actions layout="row">
      <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
      <md-button class="md-primary md-raised" ng-click="vm.save()" aria-label="Submit">
        Save
        <!--ng-disabled="vm.AddEmailReportSettingForm.$invalid || !vm.AddEmailReportSettingForm.$dirty"-->
      </md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
