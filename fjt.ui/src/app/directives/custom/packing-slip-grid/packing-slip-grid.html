<div id="forms" class="page-layout simple fullwidth doc-page breadcrumb-fixed cm-custom-label-common md-inline-form"
     layout="column" cg-busy="{promise:vm.cgBusyLoading}" ng-class="{'cm-packing-slip-empty': vm.isNoDataFound == true}">

    <div class="padding-10 advanced-filters" flex="100">

        <form name="vm.filtersInfo">

            <div layout="row" flex>

                <div layout="row" flex="15" layout-md="column" layout-sm="column">
                    <!--Suppliers-->
                    <div layout="column" flex="100">
                        <div layout="column" class="alias-list-main mt-8" flex>
                            <div class="title alias-list-title" layout="row" flex="100" layout-align="space-between center">
                                <span class="label-container width-auto padding-right-7">
                                    <a class="cm-text-decoration underline" ng-click="vm.goToSupplierList();" tabindex="-1">{{vm.PackingSlipAdvanceFilters.Supplier.value}}</a>
                                </span>
                                <div layout="row" layout-align="center center" flex="100" class="cm-part-mfr-list-search">
                                    <md-input-container md-no-float flex="100" layout="row" class="margin-0 pos-rel">
                                        <input type="text" name="mfrSearchText" id="mfrSearchText" ng-model="vm.mfrSearchText"
                                               placeholder="Type here to search"
                                               ng-maxlength="50" autocomplete="off"
                                               ng-change="vm.searchMfrList()">
                                        <md-button ng-if="vm.mfrSearchText" class="md-icon-button height-20 width-20 line-height-20 cm-part-filter-clear-btn margin-top-3" ng-click="vm.clearMfrSearchText()">
                                            <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close font-size-12 color-white"></md-icon>
                                        </md-button>
                                    </md-input-container>
                                </div>
                                <div layout="row" layout-align="center center">
                                    <a class="cm-text-decoration color-white underline"
                                       ng-click="vm.clearManufacturerFilter();"
                                       tabindex="-1"
                                       ng-if="vm.mfgCodeDetailModel.length">
                                        Clear
                                    </a>
                                    <md-button ng-click="vm.getMfgSearch();" class="md-primary md-link-ripple cm-part-advance-filter-btn">
                                        <md-icon md-font-icon="icon-reload">
                                            <md-tooltip>Reload</md-tooltip>
                                        </md-icon>
                                    </md-button>
                                </div>
                            </div>
                            <select ng-model="vm.mfgCodeDetailModel" size="10" multiple="" class="cm-auto-scroll"
                                    ng-if="vm.mfgCodeListToDisplay && vm.mfgCodeListToDisplay.length">
                                <option ng-repeat="x in vm.mfgCodeListToDisplay" value="{{x.id}}">{{x.mfgCodeName}}</option>
                            </select>
                            <div class="empty-state text-center full-height" flex="100" layout="row" layout-align="center center" layout-wrap ng-if="!vm.mfgCodeListToDisplay || vm.mfgCodeListToDisplay.length == 0">
                                <p flex="100" class="empty-state-title font-size-17-imp">{{vm.EmptyMesssageFilter.MESSAGE}}</p>
                            </div>
                        </div>

                    </div>
                </div>

                <div layout="row" layout-md="column" layout-sm="column" flex>

                    <div layout="row" flex="40" layout-md="column" layout-sm="column">
                        <!--Packing Slip Status-->
                        <fieldset flex="35" class="container-box cm-supplier-check-box margin-left-5 margin-pro-rs-left-0">
                            <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.PackingSlipStatus.value}}</legend>
                            <div class="cm-checkbox-margin-10px margin-left-10" layout="column" flex="100">
                                <md-checkbox ng-model="vm.isCheckInv" class="mv-0">{{vm.statusTypeList[1].value}}</md-checkbox>
                                <md-checkbox ng-model="vm.isCheckWFI" class="mv-0">{{vm.statusTypeList[2].value}}</md-checkbox>
                                <md-checkbox ng-model="vm.isCheckIR" class="mv-0">{{vm.statusTypeList[3].value}}</md-checkbox>
                                <md-checkbox ng-model="vm.isCheckATP" class="mv-0">{{vm.statusTypeList[4].value}}</md-checkbox>
                                <md-checkbox ng-model="vm.isCheckPartiallyPaid" class="mv-0">
                                    {{vm.statusTypeList[7].value}}
                                    <md-icon class="icon-question-mark-circle help-icon h-16 margin-left-5-imp padding-left-0-imp">
                                        <md-tooltip md-direction="top" class="tooltip-height-auto">
                                            <span>{{vm.transaction.PaidStatusHelpIconTooltip}}</span>
                                        </md-tooltip>
                                    </md-icon>
                                </md-checkbox>
                                <md-checkbox ng-model="vm.isCheckPaid" class="mv-0">
                                    {{vm.statusTypeList[5].value}}
                                    <md-icon class="icon-question-mark-circle help-icon h-16 margin-left-5-imp padding-left-0-imp">
                                        <md-tooltip md-direction="top" class="tooltip-height-auto">
                                            <span>{{vm.transaction.PaidStatusHelpIconTooltip}}</span>
                                        </md-tooltip>
                                    </md-icon>
                                </md-checkbox>
                            </div>
                        </fieldset>
                        <!--Received Status-->
                        <fieldset flex="35" class="container-box cm-supplier-check-box margin-left-5 margin-pro-rs-left-0">
                            <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.ReceivedStatus.value}}</legend>
                            <div class="cm-checkbox-margin-10px margin-left-10" layout="column" flex="100">
                                <md-checkbox ng-model="vm.isPending" class="mv-0">{{vm.transaction.PackingSlipReceivedStatus[0].key}}</md-checkbox>
                                <md-checkbox ng-model="vm.isAccepted" class="mv-0">{{vm.transaction.PackingSlipReceivedStatus[1].key}}</md-checkbox>
                                <md-checkbox ng-model="vm.isAcceptedWithDeviation" class="mv-0">{{vm.transaction.PackingSlipReceivedStatus[3].key}}</md-checkbox>
                                <md-checkbox ng-model="vm.isRejected" class="mv-0">{{vm.transaction.PackingSlipReceivedStatus[2].key}}</md-checkbox>
                            </div>
                        </fieldset>
                        <div layout="row" layout-wrap flex="30">

                            <!--Lock Status-->
                            <fieldset class="container-box cm-supplier-check-box margin-left-5 margin-pro-rs-left-0" flex="100">
                                <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.LockStatus.value}}</legend>
                                <div class="cm-checkbox-margin-10px margin-left-10" layout="column" flex="100">
                                    <md-checkbox ng-model="vm.isNotApplicable" class="mv-0">{{vm.transaction.PackingSlipLockStatus.NA.value}}</md-checkbox>
                                    <md-checkbox ng-model="vm.isReadyToLock" class="mv-0">{{vm.transaction.PackingSlipLockStatus.ReadyToLock.value}}</md-checkbox>
                                    <md-checkbox ng-model="vm.isLocked" class="mv-0">{{vm.transaction.PackingSlipLockStatus.Locked.value}}</md-checkbox>
                                </div>
                            </fieldset>

                            <!--Packing Slip Posting Status-->
                            <fieldset class="container-box cm-supplier-check-box margin-left-5 margin-pro-rs-left-0" flex="100">
                                <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.PostingStatus.value}}</legend>
                                <div class="cm-checkbox-margin-10px margin-left-10" layout="column" flex="100">
                                    <md-checkbox ng-model="vm.isDraft" class="mv-0">{{vm.PackingSlipPostingStatus[0].Name}}</md-checkbox>
                                    <md-checkbox ng-model="vm.isPublish" class="mv-0">{{vm.PackingSlipPostingStatus[1].Name}}</md-checkbox>
                                </div>
                            </fieldset>
                        </div>
                    </div>

                    <div flex layout="column">
                        <div layout="row">
                            <!--PO# / SO# / PS# / Invoice#-->
                            <fieldset flex="40" class="container-box margin-left-5">
                                <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.Search_PO_SO_Packingslip_InvoiceNo.value}}</legend>
                                <div class="input-wrapper" layout="row" flex="100" layout-align="start start">
                                    <md-input-container flex="100" class="margin-bottom-0" md-no-float>
                                        <input type="text" id="advanceSearchPoSoPsInv" name="advanceSearchPoSoPsInv"
                                               ng-model="vm.advanceSearchPoSoPsInv" placeholder="{{vm.PackingSlipAdvanceFilters.Search_PO_SO_Packingslip_InvoiceNo.value}}"
                                               ng-maxlength="50"
                                               ng-keypress="vm.applyFiltersOnEnter($event)"
                                               autocomplete="off" />
                                        <div ng-messages="vm.filtersInfo.advanceSearchPoSoPsInv.$error" role="alert">
                                            <div ng-message="maxlength">
                                                <span>{{vm.getMaxLengthValidation(50,vm.filtersInfo.advanceSearchPoSoPsInv.$viewValue.length)}}</span>
                                            </div>
                                        </div>
                                    </md-input-container>
                                    <div layout="row" ng-if="vm.advanceSearchPoSoPsInv" class="padding-top-3">
                                        <md-button class="md-icon-button md-primary md-mini height-auto width-auto" ng-click="vm.removeSearchFilter()">
                                            <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                                            <md-tooltip>Reset</md-tooltip>
                                        </md-button>
                                    </div>
                                </div>
                            </fieldset>
                            <!--MPN-->
                            <fieldset class="container-box flex margin-left-5">
                                <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.MFRPN.value}}</legend>
                                <div class="input-wrapper" layout="row" flex="100">
                                    <md-input-container ng-if="vm.autoCompletecomponent" class="autocompletecustom margin-bottom-0" flex="100">
                                        <custom-auto-complete-search class="min-width-initial"
                                                                     on-search-fn="vm.autoCompletecomponent.onSearchFn"
                                                                     column-name="vm.autoCompletecomponent.columnName"
                                                                     controller-name="vm.autoCompletecomponent.controllerName"
                                                                     view-template-url="vm.autoCompletecomponent.viewTemplateURL"
                                                                     key-column-name="vm.autoCompletecomponent.keyColumnName"
                                                                     input-name="vm.autoCompletecomponent.inputName"
                                                                     placeholder-name="vm.autoCompletecomponent.placeholderName"
                                                                     key-column-id="vm.autoCompletecomponent.keyColumnId"
                                                                     is-required="vm.autoCompletecomponent.isRequired"
                                                                     is-addnew="vm.autoCompletecomponent.isAddnew"
                                                                     on-select-callback-fn="vm.autoCompletecomponent.onSelectCallbackFn">
                                        </custom-auto-complete-search>
                                    </md-input-container>
                                </div>
                            </fieldset>
                        </div>

                        <div layout>
                            <!--Payment# / Check#-->
                            <fieldset class="container-box margin-left-5" flex="40">
                                <legend class="margin-0">
                                    {{vm.PackingSlipAdvanceFilters.PaymentOrCheck.value}}
                                </legend>
                                <div layout="row" flex="100" class="input-wrapper" layout-align="start start">
                                    <md-radio-group class="mb-5" layout="row"
                                                    ng-model="vm.checkSearchType"
                                                    name="checkSearchType">
                                        <md-radio-button ng-value="vm.transaction.CheckSearchType[1].id" class="md-primary margin-top-0">Contains</md-radio-button>
                                        <md-radio-button ng-value="vm.transaction.CheckSearchType[0].id" class="md-primary margin-top-0">Exact</md-radio-button>
                                    </md-radio-group>
                                    <md-input-container class="margin-bottom-0" md-no-float flex>
                                        <input type="text" id="chequeNumber" name="chequeNumber"
                                               ng-model="vm.chequeNumber" placeholder="{{vm.PackingSlipAdvanceFilters.PaymentOrCheck.value}}"
                                               ng-maxlength="50" ng-keypress="vm.applyFiltersOnEnter($event)"
                                               autocomplete="off" capitalize class="input-text-uppercase"
                                               ng-change="vm.onCheckNumberChange()" />
                                        <div ng-messages="vm.filtersInfo.chequeNumber.$error" role="alert">
                                            <div ng-message="maxlength">
                                                <span>{{vm.getMaxLengthValidation(50,vm.filtersInfo.chequeNumber.$viewValue.length)}}</span>
                                            </div>
                                        </div>
                                    </md-input-container>
                                    <div layout="row" ng-if="vm.chequeNumber" class="padding-top-3">
                                        <md-button class="md-icon-button md-primary md-mini height-auto width-auto" ng-click="vm.removeChequeFilter()">
                                            <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                                            <md-tooltip>Reset</md-tooltip>
                                        </md-button>
                                    </div>
                                </div>
                            </fieldset>
                            <!--PS Comments-->
                            <fieldset class="container-box flex margin-left-5">
                                <legend class="margin-0">{{vm.PackingSlipAdvanceFilters.Search_PS_Comments.value}}</legend>
                                <div class="input-wrapper h-65" layout="row" flex="100" layout-align="start start">
                                    <md-input-container flex="100" class="margin-bottom-0" md-no-float>
                                        <input type="text" id="PSComments" name="PSComments"
                                               ng-model="vm.PSComments" placeholder="{{vm.PackingSlipAdvanceFilters.Search_PS_Comments.value}}"
                                               ng-maxlength="1000"
                                               ng-keypress="vm.applyFiltersOnEnter($event)"
                                               autocomplete="off" />
                                        <div ng-messages="vm.filtersInfo.PSComments.$error" role="alert">
                                            <div ng-message="maxlength">
                                                <span>{{vm.getMaxLengthValidation(1000,vm.filtersInfo.PSComments.$viewValue.length)}}</span>
                                            </div>
                                        </div>
                                        <span class="font-weight-600 font-size-10">Hint: Will search on PS Internal Notes, PO Internal Notes and PO Comments</span>
                                    </md-input-container>
                                    <div layout="row" ng-if="vm.PSComments" class="padding-top-3">
                                        <md-button class="md-icon-button md-primary md-mini height-auto width-auto" ng-click="vm.removeCommentsFilter()">
                                            <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                                            <md-tooltip>Reset</md-tooltip>
                                        </md-button>
                                    </div>
                                </div>
                            </fieldset>
                        </div>

                        <!--Date Filter-->
                        <fieldset class="container-box ml-5">
                            <legend class="margin-0">Date</legend>
                            <div layout="row" flex="100" layout-md="column" layout-sm="column">
                                <div layout="column" flex="100">
                                    <common-date-filter from-date="vm.packingSlipFromDate"
                                                        to-date="vm.packingSlipToDate"
                                                        reset-filter="vm.resetDateFilter"
                                                        date-type-list="vm.dateTypeList"
                                                        selected-date-type="vm.selectedDateType"></common-date-filter>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
            <div layout>
                <div layout="row" flex="15" layout-md="column" layout-sm="column">
                    <!--Lock / Unlock-->
                    <fieldset class="container-box margin-pro-rs-left-0 flex">
                        <legend class="margin-0">Select Records</legend>
                        <div class="cm-btn-group">
                            <md-button class="md-primary md-raised md-ink-ripple mv-0 cm-feture-btn-color"
                                       ng-disabled="vm.selectedRowsList.length===0 || !vm.allowToLockSupplierPackingSlipFeature"
                                       ng-click="vm.lockRecord(null,$event)">
                                Lock
                            </md-button>
                        </div>
                        <span class="font-weight-600 font-size-10 ml-8">
                            {{vm.LabelConstant.SelectRecordsEnableButton}}
                        </span>
                    </fieldset>
                </div>

                <div class="mt-8 pb-5 cm-section-main cm-btn-group cm-ml-auto pt-6" layout="row" layout-align="end start">
                    <md-button class="md-primary md-raised md-ink-ripple" ng-click="vm.searchAdvanceFilter()">
                        {{vm.LabelConstant.COMMON.APPLY_FILTERS}}
                    </md-button>
                    <md-button class="md-default md-raised md-ink-ripple" ng-click="vm.resetAdvanceFilter()">
                        {{vm.LabelConstant.COMMON.CLEAR_ALL}}
                    </md-button>
                    <md-button class="md-default md-raised md-ink-ripple" ng-click="vm.resetAdvanceFilter(true)">
                        {{vm.LabelConstant.COMMON.RESET}}
                    </md-button>
                </div>
            </div>
            <div flex class="ph-10">
                <div layout="row" layout-align="start center" layout-wrap flex="100"
                     ng-if="vm.numberOfMasterFiltersApplied || vm.isUiGridColumnFiltersApplied">
                    <span class="font-weight-600">
                        {{vm.LabelConstant.COMMON.APPLIED_FILTERS}}
                    </span>
                    <div ng-repeat="item in vm.PackingSlipAdvanceFilters" layout="row" layout-align="start center" class="cm-tracking-chip-mian"
                         ng-if="!item.isDeleted">
                        <div class="tracking-number-chip" layout="row" layout-align="start center">
                            <label>
                                {{item.value}}
                                <md-tooltip md-direction="top" ng-if="item.tooltip" class="tooltip-height-auto cm-white-space-normal tt-multiline max-width-1015 p-5"
                                            ng-bind-html="item.tooltip">
                                </md-tooltip>
                            </label>
                            <md-button class="md-icon-button md-primary md-mini" ng-click="vm.removeAppliedFilter(item, $index)">
                                <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                                <md-tooltip>{{vm.LabelConstant.COMMON.FILTER_REMOVE_TOOLTIP}}</md-tooltip>
                            </md-button>
                        </div>
                    </div>
                    <div layout="row" layout-align="start center" class="cm-tracking-chip-mian">
                        <div class="tracking-number-chip" layout="row" layout-align="start center">
                            <label>
                                Clear All
                            </label>
                            <md-button class="md-icon-button md-primary md-mini" ng-click="vm.resetAdvanceFilter()">
                                <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                                <md-tooltip>Clear All Filters and Reload Data</md-tooltip>
                            </md-button>
                        </div>
                    </div>
                </div>
                <div layout="row" layout-align="start center" layout-wrap flex="100"
                     ng-if="vm.isUiGridColumnFiltersApplied && vm.gridOptions.gridApi && vm.gridOptions.gridApi.grid.columns.length > 0">
                    <span class="font-weight-600">
                        {{vm.LabelConstant.COMMON.APPLIED_GRID_FILTERS}}
                    </span>
                    <div ng-repeat="item in vm.gridOptions.gridApi.grid.columns" layout="row" layout-align="start center" class="cm-tracking-chip-mian"
                         ng-if="item.filters[0].term">
                        <div class="tracking-number-chip" layout="row" layout-align="start center" ng-if="item.filters[0].term">
                            <label>
                                {{item.displayName}}
                                <md-tooltip md-direction="top" ng-if="item.filters[0].term" class="tooltip-height-auto cm-white-space-normal tt-multiline max-width-1015 p-5"
                                            ng-bind-html="item.filters[0].term">
                                </md-tooltip>
                            </label>
                            <md-button class="md-icon-button md-primary md-mini" ng-click="vm.clearGridColumnFilter(item, $index)">
                                <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                                <md-tooltip>{{vm.LabelConstant.COMMON.FILTER_REMOVE_TOOLTIP}}</md-tooltip>
                            </md-button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div flex="100" layout="row" layout-wrap class="mt-5 ph-10">

        <div ng-if="vm.IsPackingList" flex ng-show="!vm.isNoDataFound">
            <md-card layout="column" class="margin-0 cm-packing-slip-grid" flex layout-align="space-between stretch">
                <ui-grid-extention ng-class="{'cm-invoice-packing-slip-grid': vm.receiptType === vm.transaction.PackingSlipInvoiceTabName.SupplierInvoices && (vm.numberOfMasterFiltersApplied || vm.isUiGridColumnFiltersApplied),
                             'cm-invoice-packing-slip-grid-no-filter-chips': vm.receiptType === vm.transaction.PackingSlipInvoiceTabName.SupplierInvoices && !(vm.numberOfMasterFiltersApplied || vm.isUiGridColumnFiltersApplied),
                             'cm-packing-slip-grid': vm.receiptType !== vm.transaction.PackingSlipInvoiceTabName.SupplierInvoices && (vm.numberOfMasterFiltersApplied || vm.isUiGridColumnFiltersApplied),
                             'cm-packing-slip-grid-no-filter-chips': vm.receiptType !== vm.transaction.PackingSlipInvoiceTabName.SupplierInvoices && !(vm.numberOfMasterFiltersApplied || vm.isUiGridColumnFiltersApplied)}"
                                   grid-id="vm.gridConfig.gridPackingSlip"
                                   load-data="vm.loadData"
                                   grid-option="vm.gridOptions"
                                   header="vm.sourceHeader"
                                   grid-data="vm.sourceData"
                                   total-data-count="vm.totalSourceDataCount"
                                   reset-grid="vm.resetSourceGrid"
                                   selectted-rows="vm.selectedRowsList"
                                   paging-info="vm.pagingInfo"
                                   current-item="vm.currentdata"
                                   get-data-down="vm.getDataDown"
                                   empty-state="vm.emptyState"
                                   delete-multiple-data="vm.deleteMultipleData">
            </md-card>
        </div>

        <div class="empty-state text-center full-height packing-slip-empty-state" flex="100" layout="row" layout-align="center center" layout-wrap ng-if="vm.isNoDataFound == true">
            <div class="emty-icon" flex="100">
                <img ng-src="{{vm.EmptyMesssage.IMAGEURL}}" />
            </div>
            <p flex="100" class="empty-state-title">{{vm.EmptyMesssage.MESSAGE}}</p>
            <p flex="100">
                {{vm.EmptyMesssage.ADDNEWMESSAGE}}
            </p>
            <p flex="100">
                <md-button class="md-fab md-mini" aria-label="Add Packing Slip" ng-click="vm.addPackingSlip()">
                    <md-icon role="img" md-font-icon="icon-plus" class="material-icons mat-icon icon-plus"></md-icon>
                    <md-tooltip md-direction="top">Add Packing Slip</md-tooltip>
                </md-button>
                <md-button class="md-fab md-mini" aria-label="Refresh Packing Slip" ng-click="vm.loadData()">
                    <md-icon role="img" md-font-icon="icon-refresh" class="material-icons mat-icon icon-plus"></md-icon>
                    <md-tooltip md-direction="top">Refresh Packing Slip</md-tooltip>
                </md-button>
            </p>
        </div>
    </div>
</div>
