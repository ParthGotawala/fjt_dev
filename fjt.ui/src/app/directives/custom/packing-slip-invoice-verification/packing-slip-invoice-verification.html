<div cg-busy="{promise:vm.cgBusyLoading}">
    <div flex="100" layout="row" layout-wrap>

        <form name="vm.invoicePackingDetail" class="md-inline-form padding-10-imp" ms-form-wizard-form novalidate flex="100">

            <div flex="100" layout="row">
                <div class="cm-section-main margin-right-5" flex="50">
                    <div class="cm-section-inner" flex="100">
                        <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                            <tbody>

                                <tr>
                                    <th><p class="label-container">Other Charges&nbsp;$</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="chargies" id="chargies" ng-model="vm.packingSlipData.totalChargies" placeholder="Chargies" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr>

                                    <th><p class="label-container">Material Extended Charges&nbsp;$</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="sumExtendedPrice" id="sumExtendedPrice" ng-model="vm.packingSlipData.sumExtendedPriceDisplay" placeholder="Extended Price" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr>
                                    <th><p class="label-container">Total Due&nbsp;$</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="totalExtendedPrice" id="totalExtendedPrice" ng-model="vm.packingSlipData.totalExtendedPriceDisplay" placeholder="Total Extended Price" ng-disabled="true">
                                            <span flex="100" class="font-size-10">
                                                <b>i.e. Other Charges $ + Material Extended Charges $</b>
                                            </span>
                                        </md-input-container>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="cm-section-main margin-left-5" flex="50">
                    <div class="cm-section-inner" flex="100">
                        <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                            <tbody>

                                <tr ng-if="vm.packingSlipData.receiptType == 'P'">
                                    <th><p class="label-container">Invoice Number</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="invoiceNumber" id="invoiceNumber" ng-model="vm.packingSlipData.invoiceNumber" placeholder="Invoice Number" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr ng-if="vm.packingSlipData.receiptType == 'P'">
                                    <th><p class="label-container">Invoice Date</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="invoiceDate" id="invoiceDate" ng-model="vm.packingSlipData.invoiceDate" placeholder="Invoice Number" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>

                                <tr ng-if="vm.packingSlipData.receiptType == 'C'">
                                    <th><p class="label-container">Credit Memo Number</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="creditMemoNumber" id="creditMemoNumber" ng-model="vm.packingSlipData.creditMemoNumber" placeholder="Invoice Number" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr ng-if="vm.packingSlipData.receiptType == 'C'">
                                    <th><p class="label-container">Credit Memo Date</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="creditMemoDate" id="creditMemoDate" ng-model="vm.packingSlipData.creditMemoDate" placeholder="Invoice Number" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>

                                <tr ng-if="vm.packingSlipData.receiptType == 'D'">
                                    <th><p class="label-container">Debit Memo Number</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="debitMemoNumber" id="debitMemoNumber" ng-model="vm.packingSlipData.debitMemoNumber" placeholder="Invoice Number" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr ng-if="vm.packingSlipData.receiptType == 'D'">
                                    <th><p class="label-container">Debit Memo Date</p></th>
                                    <td>
                                        <md-input-container flex="100" class="margin-bottom-0">
                                            <input type="text" name="debitMemoDate" id="debitMemoDate" ng-model="vm.packingSlipData.debitMemoDate" placeholder="Invoice Number" ng-disabled="true">
                                        </md-input-container>
                                    </td>
                                </tr>
                                <!--<tr>
                                    <th>&nbsp;</th>
                                    <td>
                                        <md-button class="md-primary md-raised ml-0" ng-click="vm.addInvoiceInPackingSlip()"> 
                                            <span ng-if="vm.packingSlipData.invoiceNumber">Edit</span>
                                            <span ng-if="!vm.packingSlipData.invoiceNumber">Add</span>
                                            Invoice
                                        </md-button>
                                    </td>
                                </tr>-->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </form>

        <form name="vm.invoicePackingList" class="md-inline-form p-10" novalidate flex="100">
            <div class="cm-section-main" layout="row" layout-wrap flex="100">
                <div class="cm-section-header" flex="100">
                    <h2>Enter Invoice Details</h2>
                </div>
                <div class="cm-section-inner overflow-auto-rs" layout="row" flex="100">
                    <table cellspacing="0" cellpadding="0" class="cm-table-input-main cm-packing-slip-detail">
                        <tbody>
                            <tr>
                                <td>
                                    <md-radio-group layout="row" layout-align="start start" ng-change="vm.changeUpdateMaterialType()"
                                                    name="Active" id="Active" ng-model="vm.packingInvoiceData.updateMaterialType" class="margin-0" custom-auto-focus=true>
                                        <md-radio-button class="margin-top-0 cm-white-space-nowrap" ng-repeat="item in vm.RadioGroup.type.array"
                                                         name="{{item.Value}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                                    </md-radio-group>
                                </td>
                                <td>
                                    <table>
                                        <tr>
                                            <th><p class="label-container">Charges Type<span ng-if="!vm.packingInvoiceData.updateMaterialType">&nbsp;*</span></p></th>
                                            <td>
                                                <md-input-container md-no-float class="margin-0">
                                                    <md-select name="chargiesType"
                                                               ng-model="vm.packingInvoiceData.chargiesType"
                                                               md-container-class="containerClass"
                                                               ng-disabled="vm.packingInvoiceData.updateMaterialType"
                                                               ng-change="vm.changeChargiesType()">
                                                        <md-option ng-repeat="option in vm.packaging_Charges_List" ng-value="option.id">{{option.value}}</md-option>
                                                    </md-select>
                                                </md-input-container>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th><p class="label-container">Packing Slip Line#<span ng-if="vm.packingInvoiceData.updateMaterialType">&nbsp;*</span></p></th>
                                            <td>
                                                <md-input-container flex="100" class="margin-bottom-0">
                                                    <input type="text" id="slipLine" name="slipLine" ng-model="vm.packingInvoiceData.packingSlipSerialNumber" placeholder="Packing Slip Line#" ng-disabled="vm.recordUpdate || !vm.packingInvoiceData.updateMaterialType"
                                                           onkeypress="return OnlyPositiveNegativeNumeric(event)" ng-maxlength="50" custom-blur="vm.checkPackingLine()" ng-required="vm.packingInvoiceData.updateMaterialType" ng-paste="$event.preventDefault()">
                                                    <div ng-messages="vm.invoicePackingList.slipLine.$touched && vm.invoicePackingList.slipLine.$error" role="alert">
                                                        <div ng-message="required">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                        </div>
                                                        <div ng-message="maxlength">
                                                            <span>{{vm.getMaxLengthValidation(50,vm.invoicePackingList.slipLine.$viewValue.length)}}</span>
                                                        </div>
                                                    </div>
                                                </md-input-container>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td>
                                    <table>
                                        <tr>
                                            <th><p class="label-container">Invoice Price&nbsp;$<span>&nbsp;*</span></p></th>
                                            <td>
                                                <md-input-container flex="100" class="margin-bottom-0"> <!--currency-mask-->
                                                    <input type="number" id="purchasePrice" name="purchasePrice" input-number-decimal-place ng-model="vm.packingInvoiceData.invoicePrice" placeholder="Purchase Price"
                                                           onkeypress="return OnlyNumbersWithDot(event)" min="0" maxlength="18" step="{{$root.unitInputStep}}" ng-required="vm.packingInvoiceData.packingSlipSerialNumber" 
                                                           custom-blur="vm.calculateExtendedPrice();" ng-disabled="!vm.packingInvoiceData.packingSlipSerialNumber">
                                                    <div ng-messages="vm.invoicePackingList.purchasePrice.$error" role="alert">
                                                        <div ng-message="required">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                        </div>
                                                        <div ng-message="min">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                        </div>
                                                        <div ng-message="maxlength">
                                                            <span>{{vm.getMaxLengthValidation(18,vm.invoicePackingList.purchasePrice.$viewValue.length)}}</span>
                                                        </div>
                                                        <div ng-message="number || step">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                        </div>
                                                    </div>
                                                </md-input-container>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th><p class="label-container">Agreed Purchase Unit Price&nbsp;$<span>&nbsp;*</span></p></th>
                                            <td>
                                                <md-input-container flex="100" class="margin-bottom-0">
                                                    <input type="number" id="agreedPriceEach" name="agreedPriceEach" input-number-decimal-place ng-model="vm.packingInvoiceData.purchasePrice" placeholder="Agreed Price Each" 
                                                           onkeypress="return OnlyNumbersWithDot(event)" min="0" maxlength="18" step="{{$root.unitInputStep}}" ng-required="vm.packingInvoiceData.packingSlipSerialNumber" 
                                                           custom-blur="vm.calculateExtendedPrice()" ng-disabled="!vm.packingInvoiceData.packingSlipSerialNumber"> <!--currency-mask-->
                                                    <div ng-messages="vm.invoicePackingList.agreedPriceEach.$error" role="alert">
                                                        <div ng-message="required">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                        </div>
                                                        <div ng-message="min">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                        </div>
                                                        <div ng-message="maxlength">
                                                            <span>{{vm.getMaxLengthValidation(18,vm.invoicePackingList.agreedPriceEach.$viewValue.length)}}</span>
                                                        </div>
                                                        <div ng-message="number || step">
                                                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                        </div>
                                                    </div>
                                                </md-input-container>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td>
                                    <table>
                                        <tr>
                                            <th><p class="label-container">Received Qty</p></th>
                                            <td>
                                                <md-input-container flex="100" class="margin-bottom-0">
                                                    <input type="number" id="receivedQty" name="receivedQty" ng-model="vm.packingInvoiceData.receivedQty" placeholder="Received Qty" ng-disabled="true"> <!--currency-mask-->
                                                </md-input-container>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th><p class="label-container">Material Extended Charges&nbsp;$</p></th>
                                            <td>
                                                <md-input-container flex="100" class="margin-bottom-0">
                                                    <input type="number" id="extendedPrice" name="extendedPrice" ng-model="vm.packingInvoiceData.extendedPrice" placeholder="Extended Price" ng-disabled="true"> <!--currency-mask-->
                                                    <span class="font-size-10">
                                                        <b>i.e. Invoice Price * Received Qty</b>
                                                    </span>
                                                </md-input-container>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                
                                

                                <td class="text-right">
                                    <md-button class="md-primary md-raised margin-right-0 mt-0" aria-label="receive" ng-click="vm.updatePackingDetail()" id="btnAddDet" ng-disabled="vm.invoicePackingList.$invalid || !vm.packingSlipData.invoiceNumber">
                                        Save
                                    </md-button>
                                    <md-button class="md-raised margin-right-0 mt-0" aria-label="receive" ng-click="vm.resetPackingInvoice()" id="btnResetDet">
                                        Reset
                                    </md-button>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </form>

        <div flex="100" class="font-size-14 pl-10" ng-if="!vm.packingSlipData.invoiceNumber">
            <ul class="pl-20 cm-bom-error-message">
                <li>Invoice number and invoice date is require for add invoice detail.</li>
            </ul>
        </div>

        <div flex="100" layout="row" layout-wrap class="p-10">
            <md-card layout="column" flex layout-align="space-between stretch" class="margin-0">
                <ui-grid-extention class="cm-managesupplier-invoice" load-data="vm.loadData"
                                   grid-option="vm.gridOptions"
                                   header="vm.sourceHeader"
                                   grid-data="vm.sourceData"
                                   total-data-count="vm.totalSourceDataCount"
                                   reset-grid="vm.resetSourceGrid"
                                   selectted-rows="vm.selectedRowsList"
                                   paging-info="vm.pagingInfo"
                                   current-item="vm.currentdata"
                                   get-data-down="vm.getDataDown"
                                   empty-state="vm.emptyState"
                                   delete-multiple-data="vm.deleteMultipleData">
            </md-card>
        </div>


    </div>

</div>
