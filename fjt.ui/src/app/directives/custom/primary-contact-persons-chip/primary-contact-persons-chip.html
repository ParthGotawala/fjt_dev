<div flex="100" layout="row" layout-align="start start" layout-wrap>
  <div class="cm-section-main" flex="100">
    <div class="cm-section-header">
      <div flex="100" layout="row">
        <div flex>
          <p class="label-container">
            Primary <span class="pl-5"><a tabindex="-1" class="color-black font-size-14" ng-class="{'cm-text-decoration underline': (paramOtherDet && paramOtherDet.refTransID) , 'no-hover': !(paramOtherDet && paramOtherDet.refTransID)}" ng-click="vm.goToCustomerContactPersonList()"> Contact Person</a></span>
          </p>
        </div>
        <div class="cm-btn-group cm-btn-w-auto" layout layout-align="end center">
          <md-button class="md-icon-button md-primary md-raised md-mini" ng-click="vm.addEditContactPerson($event, null)">
            <md-icon md-font-icon="{{vm.contactPersonIconClass}} add-icon" class="material-icons"></md-icon>
            <md-tooltip>Add Contact Person</md-tooltip>
          </md-button>
          <md-button class="md-icon-button md-primary md-raised md-mini" ng-click="vm.refreshPrimaryContPerson()" ng-disabled="!paramOtherDet.refTransID">
            <md-icon md-font-icon="icon-refresh" class="material-icons"></md-icon>
            <md-tooltip>Refresh Primary Contact Persons</md-tooltip>
          </md-button>
          <md-menu-bar class="p-0-imp" layout-align="start-center" layout="row">
            <md-menu md-position-mode="left bottom">
              <md-button class="md-primary md-raised md-icon-button pr-20" ng-click="$mdOpenMenu()" aria-label="User settings" md-prevent-menu-close="md-prevent-menu-close">
                <md-icon md-font-icon="icon-dots-vertical" class="icon s24"></md-icon>
              </md-button>
              <md-menu-content width="3">
                <md-menu-item>
                  <md-button ng-click="vm.removeAllFromPrimary()" ng-disabled="vm.isShowEmptyState || (paramOtherDet.refTransID && !vm.updatecontactPersonFeature)" class="toolbar-menu cm-feture-btn-color"
                             ng-class="{'item-disabled': (vm.isShowEmptyState || (paramOtherDet.refTransID && !vm.updatecontactPersonFeature))}">
                    <md-icon md-font-icon="mdi-account-remove mdi-flip-h mdi" class="border-1px-solid border-radius-4 border-right-solid cm-height-auto material-icons width-auto"></md-icon>
                    Unset All Contacts From Primary
                  </md-button>
                </md-menu-item>
              </md-menu-content>
            </md-menu>
          </md-menu-bar>
        </div>
      </div>
    </div>
    <div class="cm-section-inner" flex="100" layout="row" layout-wrap>
      <div class="empty-state padding-0" ng-if="vm.isShowEmptyState">
        <p class="empty-state-title font-size-20-imp">{{vm.emptyState.MESSAGE}}</p>
      </div>
      <div class="cm-tracking-chip-container" ng-if="!vm.isShowEmptyState">
        <div ng-repeat="item in paramContactPersonsDet | filter: {isPrimary :'true' , isActive :'true'} | orderBy: 'personFullName'" layout="row" layout-align="start center" class="cm-tracking-chip-mian">
          <div class="tracking-number-chip pv-3 label-primary" layout="row" layout-align="start center">
            <label>
              {{item.personFullName}}
            </label>
            <md-button class="md-icon-button md-primary md-mini" ng-click="vm.addEditContactPerson($event, item)">
              <md-icon md-font-icon="icon-pencil" class="material-icons mat-icon"></md-icon>
              <md-tooltip>Update Contact Person</md-tooltip>
            </md-button>
            <md-menu class="line-height-normal" md-position-mode="left bottom">
              <button ng-click="$mdOpenMenu()" md-prevent-menu-close="md-prevent-menu-close">
                <md-icon md-font-icon="icon-dots-vertical" class="icon s18"></md-icon>
              </button>
              <md-menu-content class="md-dense" width="3">
                <md-menu-item class="mv-5">
                  <md-button class="toolbar-menu md-raised" ng-class="{'cm-feture-btn-color': item.personId}" ng-click="vm.removeFromPrimary(item)" ng-disabled="(item.personId && !vm.updatecontactPersonFeature)">
                    <md-icon md-font-icon="mdi-account-remove mdi-flip-h mdi" class="border-1px-solid border-radius-4 border-right-solid cm-height-auto material-icons width-auto"></md-icon>
                    Unset From Primary
                  </md-button>
                </md-menu-item>
                <md-menu-item class="mv-5">
                  <md-button class="cm-feture-btn-color toolbar-menu md-raised" ng-click="vm.deleteContPerson(item)" ng-disabled="!vm.isDeleteFeatureEnable || !item.personId">
                    <md-icon md-font-icon="icon-trash" class="material-icons mat-icon"></md-icon>
                    Delete Contact Person
                  </md-button>
                </md-menu-item>
              </md-menu-content>
            </md-menu>
          </div>
        </div>
      </div>
      <ng-form name="vm.primaryPersonForm">
        <!--for checking any Changes in PrimaryContact person -->
        <input type="text" name="isChange" ng-model="paramOtherDet.isChange" disabled ng-hide="true" />
      </ng-form>
    </div>
  </div>
</div>

