<md-content cg-busy="{promise:vm.cgBusyLoading}" class="padding-top-5">
  <div layout="row" flex="100" layout-sm="column">
    <form class="md-inline-form cm-custom-label-common width-100p" name="vm.filtersInfo">
      <div layout="column" flex="100" class="umid-advance-filter advanced-filters" layout-wrap>
        <div layout="row" flex="100" class="overflow-auto-rs padding-left-8">
          <!--supplier list-->
          <div layout="column" class="padding-right-5" flex="20" ng-if="!vm.isFilterHidden">
            <div layout="column" class="alias-list-main cm-alias-list-main-static-block" flex>
              <div class="title alias-list-title cm-alias-list-title-static-block" layout="row" flex="100" layout-align="space-between center">
                <span class="label-container width-auto">
                  <a class="cm-text-decoration underline" ng-click="vm.goToSupplierList();"
                     tabindex="-1">{{vm.PurchaseOrderAdvanceFilter.Supplier.value}}</a>
                </span>
                <div layout="row" layout-align="center center" flex="100" class="cm-part-mfr-list-search">
                  <md-input-container md-no-float flex="100" layout="row" class="margin-0 pos-rel">
                    <input type="text" name="SupplierSearchText" id="SupplierSearchText" ng-model="vm.SupplierSearchText"
                           placeholder="Type here to search"
                           ng-maxlength="50" autocomplete="off"
                           ng-change="vm.searchSupplierList()">
                    <md-button ng-if="vm.SupplierSearchText" class="md-icon-button height-20 width-20 line-height-20 cm-part-filter-clear-btn margin-top-3 padding-0"
                               ng-click="vm.clearSupplierSearchText()">
                      <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close font-size-12 color-white"></md-icon>
                    </md-button>
                  </md-input-container>
                </div>
                <div layout="row" layout-align="center center">
                  <a class="cm-text-decoration underline"
                     ng-click="vm.clearSupplierFilter();"
                     tabindex="-1"
                     ng-if="vm.supplier.length">
                    Clear
                  </a>
                  <md-button ng-click="vm.getSupplierList();" class="md-primary md-link-ripple cm-part-advance-filter-btn">
                    <md-icon md-font-icon="icon-reload">
                      <md-tooltip>Reload</md-tooltip>
                    </md-icon>
                  </md-button>
                </div>
              </div>
              <select ng-model="vm.supplier" size="10" multiple="" class="cm-auto-scroll" ng-if="vm.supplierListToDisplay && vm.supplierListToDisplay.length">
                <option ng-repeat="x in vm.supplierListToDisplay" value="{{x.id}}">{{x.mfgcode}}</option>
              </select>
              <div class="empty-state text-center full-height" flex="100" layout="row" layout-align="center center" layout-wrap
                   ng-if="(!vm.supplierListToDisplay || vm.supplierListToDisplay.length === 0) && vm.SupplierSearchText">
                <p flex="100" class="empty-state-title font-size-17-imp">{{vm.EmptyMesssages.MESSAGE}}</p>
              </div>
            </div>
          </div>
          <!--shipping method-->
          <div layout="column" class="padding-right-5" flex="20" ng-if="!vm.isFilterHidden">
            <div layout="column" class="alias-list-main cm-alias-list-main-static-block" flex>
              <div class="title alias-list-title cm-alias-list-title-static-block" layout="row" flex="100" layout-align="space-between center">
                <span class="label-container width-auto">
                  <a class="cm-text-decoration underline" ng-click="vm.goToShippingList();"
                     tabindex="-1">{{vm.PurchaseOrderAdvanceFilter.ShippingMethod.value}}</a>
                </span>
                <div layout="row" layout-align="center center" flex="100" class="cm-part-mfr-list-search">
                  <md-input-container md-no-float flex="100" layout="row" class="margin-0 pos-rel">
                    <input type="text" name="ShippingSearchText" id="ShippingSearchText" ng-model="vm.ShippingSearchText"
                           placeholder="Type here to search"
                           ng-maxlength="50" autocomplete="off"
                           ng-change="vm.searchShippingList()">
                    <md-button ng-if="vm.ShippingSearchText" class="md-icon-button height-20 width-20 line-height-20 cm-part-filter-clear-btn margin-top-3 padding-0"
                               ng-click="vm.clearShippingSearchText()">
                      <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close font-size-12 color-white"></md-icon>
                    </md-button>
                  </md-input-container>
                </div>
                <div layout="row" layout-align="center center">
                  <a class="cm-text-decoration underline"
                     ng-click="vm.clearShippingFilter();"
                     tabindex="-1"
                     ng-if="vm.shippingMethods.length">
                    Clear
                  </a>
                  <md-button ng-click="vm.getShippingList();" class="md-primary md-link-ripple cm-part-advance-filter-btn">
                    <md-icon md-font-icon="icon-reload">
                      <md-tooltip>Reload</md-tooltip>
                    </md-icon>
                  </md-button>
                </div>
              </div>
              <select ng-model="vm.shippingMethods" size="10" multiple="" class="cm-auto-scroll" ng-if="vm.shippingListToDisplay && vm.shippingListToDisplay.length">
                <option ng-repeat="x in vm.shippingListToDisplay" value="{{x.gencCategoryID}}">{{x.gencCategoryDisplayName}}</option>
              </select>
              <div class="empty-state text-center full-height" flex="100" layout="row" layout-align="center center" layout-wrap
                   ng-if="(!vm.shippingListToDisplay || vm.shippingListToDisplay.length === 0) && vm.ShippingSearchText">
                <p flex="100" class="empty-state-title font-size-17-imp">{{vm.EmptyMesssages.MESSAGE}}</p>
              </div>
            </div>
          </div>
          <div layout flex="60">
            <!--PO Line Working Status-->
            <div flex="15" layout="row" class="pr-5">
              <fieldset flex="100" class="container-box">
                <legend class="margin-0">{{vm.PurchaseOrderAdvanceFilter.POLineStatus.value}}</legend>
                <div layout="row" flex="100" layout-md="column" layout-sm="column">
                  <div class="input-wrapper margin-left-10" layout="column" layout-align="start center">
                    <md-checkbox ng-model="vm.isOpen" id="pendingStatus" class="mv-0">{{vm.PO_Line_WorkingStatus.Open.value}}</md-checkbox>
                    <md-checkbox ng-model="vm.isClose" class="mv-0">{{vm.PO_Line_WorkingStatus.Close.value}}</md-checkbox>
                  </div>
                </div>
              </fieldset>
            </div>
            <!--PO Working Status-->
            <div flex="15" layout="row" class="pr-5">
              <fieldset flex="100" class="container-box">
                <legend class="margin-0">{{vm.PurchaseOrderAdvanceFilter.POStatus.value}}</legend>
                <div layout="row" flex="100" layout-md="column" layout-sm="column">
                  <div class="input-wrapper margin-left-10" layout="column" layout-align="start center">
                    <md-checkbox ng-model="vm.isInProgress" class="mv-0">{{vm.PO_Working_Status.InProgress.value}}</md-checkbox>
                    <md-checkbox ng-model="vm.isCompleted" class="mv-0">{{vm.PO_Working_Status.Completed.value}}</md-checkbox>
                    <md-checkbox ng-model="vm.isCanceled" class="mv-0">{{vm.PO_Working_Status.Canceled.value}}</md-checkbox>
                  </div>
                </div>
              </fieldset>
            </div>
            <div layout="column" flex="100">
              <!--Part#-->
              <div class="pr-5" layout="column" flex-md="100" flex-sm="100">
                <fieldset flex="100" class="container-box">
                  <legend class="margin-0">Search {{vm.LabelConstant.MFG.PID}} / {{vm.LabelConstant.MFG.AssyID}} / {{vm.LabelConstant.MFG.MFGPN}} / {{vm.LabelConstant.Assembly.Assy}} / {{vm.LabelConstant.MFG.CustomerPN}} <br />(({{vm.LabelConstant.MFG.MFG}}/{{vm.LabelConstant.MFG.SupplierCode}}) ({{vm.LabelConstant.MFG.MFGPN}}/{{vm.LabelConstant.MFG.SupplierPN}}) | {{vm.LabelConstant.MFG.PID}} | {{vm.LabelConstant.MFG.ProductionPN}})</legend>
                  <div layout="row" flex="100" layout-md="column" layout-sm="column" class="cm-po-part-height-scroll">
                    <md-input-container class="cm-widget-chip md-block full-chip margin-0" flex="100" md-no-float>
                      <md-contact-chips ng-model="vm.partIds" flex="100" layout="row" class="cm-po-contact-chip"
                                        md-contacts="vm.querycomponentSearch($query)"
                                        md-contact-name="componentParts"
                                        md-contact-image=""
                                        md-contact-email=""
                                        md-require-match="true"
                                        md-highlight-flags="i"
                                        filter-selected="true"
                                        secondary-placeholder="Add another to Search"
                                        ng-class="{'cm-readonly-chip': vm.partIDFilter}"
                                        placeholder="Type here to Search">
                      </md-contact-chips>
                    </md-input-container>
                  </div>
                </fieldset>
              </div>
              <!--PO Date-->
              <div class="pr-5" layout="column" flex-md="100" flex-sm="100">
                <fieldset flex class="container-box cm-supplier-check-box">
                  <legend class="margin-0">{{vm.PurchaseOrderAdvanceFilter.PODate.value}}</legend>
                  <div class="margin-left-10" layout="row" flex="100" layout-align="start start">
                    <common-date-filter from-date="vm.fromDate" to-date="vm.toDate" reset-filter="vm.resetDateFilter"></common-date-filter>
                  </div>
                </fieldset>
              </div>
            </div>
          </div>
        </div>
        <div layout="row" flex="100" class="overflow-auto-rs padding-left-8 pr-5">
          <!--PO Comments-->
          <div layout="row" flex="20" class="pr-5">
            <fieldset flex="100" class="container-box">
              <legend class="margin-0">{{vm.PurchaseOrderAdvanceFilter.POComments.value}}</legend>
              <div layout="row" flex="100" layout-align="start start" layout-md="column" layout-sm="column">
                <md-input-container class="margin-bottom-0" flex md-no-float>
                  <input type="text" id="poComments" name="poComments"
                         ng-model="vm.poComments" placeholder="{{vm.PurchaseOrderAdvanceFilter.POComments.value}}"
                         ng-maxlength="1000"
                         ng-keypress="vm.applyFiltersOnEnter($event)"
                         autocomplete="off" />
                  <div ng-messages="vm.filtersInfo.poComments.$error" role="alert">
                    <div ng-message="maxlength">
                      <span>{{vm.getMaxLengthValidation(1000,vm.filtersInfo.poComments.$viewValue.length)}}</span>
                    </div>
                  </div>
                  <span class="font-weight-600 font-size-10">Hint: Will search on Internal Notes, PO Comments, Description, Line Internal Notes and Line Comments</span>
                </md-input-container>
                <div layout="row" ng-if="vm.poComments" class="padding-top-3">
                  <md-button class="md-icon-button md-primary md-mini height-auto width-auto" ng-click="vm.removePOCommentFilter()">
                    <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                    <md-tooltip>Reset</md-tooltip>
                  </md-button>
                </div>
              </div>
            </fieldset>
          </div>
          <!--Total Ext. Price-->
          <div class="input-wrapper pr-5" layout="column" flex="20" flex-md="100" flex-sm="100">
            <fieldset flex="100" class="container-box">
              <legend class="margin-0">{{vm.PurchaseOrderAdvanceFilter.TotalExt.value}}</legend>
              <div layout="row" flex="100" layout-md="column" layout-sm="column">
                <div class="input-wrapper" layout="row" layout-align="start start">
                  <md-radio-group class=" mb-5" flex="100" layout="row" ng-model="vm.checkSerachAmountType" name="checkSerachType">
                    <md-radio-button ng-value="vm.CheckSearchTypeList[1].id" class="md-primary margin-top-0">Contains</md-radio-button>
                    <md-radio-button ng-value="vm.CheckSearchTypeList[0].id" class="md-primary margin-top-0">Exact</md-radio-button>
                  </md-radio-group>
                </div>
                <div class="input-wrapper" layout="row" flex="100" layout-align="start start">
                  <md-input-container flex="100" class="margin-bottom-0" md-no-float>
                    <input type="number" id="amount" name="amount"
                           ng-model="vm.amount" placeholder="{{vm.PurchaseOrderAdvanceFilter.TotalExt.value}}"
                           onkeypress="return OnlyNumbersWithDot(event)"
                           ng-keypress="vm.applyFiltersOnEnter($event)"
                           ng-maxlength="18" min="0" step="{{$root.amountInputStep}}">
                    <div ng-messages="vm.filtersInfo.amount.$error" role="alert">
                      <div ng-message="number || step || maxlength">
                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                      </div>
                    </div>
                  </md-input-container>
                </div>
              </div>
            </fieldset>
          </div>
          <div layout flex="60">
            <!--PO#/SO#-->
            <div class="input-wrapper pr-5" layout="column" flex flex-md="100" flex-sm="100">
              <fieldset flex="100" class="container-box">
                <legend class="margin-0">{{vm.PurchaseOrderAdvanceFilter.POSO.value}}</legend>
                <div layout="row" flex="100" layout-md="column" layout-sm="column" layout-align="start start">
                  <div class="input-wrapper" layout="row" layout-align="start start">
                    <md-radio-group class=" mb-5" flex="100" layout="row" ng-model="vm.checkSerachPOType" name="checkSerachType" custom-auto-focus="true">
                      <md-radio-button ng-value="vm.CheckSearchTypeList[1].id" class="md-primary margin-top-0">Contains</md-radio-button>
                      <md-radio-button ng-value="vm.CheckSearchTypeList[0].id" class="md-primary margin-top-0">Exact</md-radio-button>
                    </md-radio-group>
                  </div>
                  <div class="input-wrapper" layout="row" flex="100" layout-align="start start">
                    <md-input-container flex="100" class="margin-bottom-0" md-no-float>
                      <input type="text" id="posoNumber" name="posoNumber" ng-model="vm.posoNumber"
                             ng-maxlength="50"
                             ng-keypress="vm.applyFiltersOnEnter($event)"
                             placeholder="{{vm.PurchaseOrderAdvanceFilter.POSO.value}}" />
                      <div ng-messages="vm.filtersInfo.posoNumber.$error" role="alert">
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(50,vm.filtersInfo.posoNumber.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </div>
                  <div layout="row" ng-if="vm.posoNumber" class="padding-top-3">
                    <md-button class="md-icon-button md-primary md-mini height-auto width-auto" ng-click="vm.removePOSOFilter()">
                      <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                      <md-tooltip>Reset</md-tooltip>
                    </md-button>
                  </div>
                </div>
              </fieldset>
            </div>
            <div class="mt-8 cm-ml-auto" layout>
              <div class="cm-section-main pt-6 cm-btn-group" flex="100" layout="row" layout-align="end start">
                <md-button class="md-primary md-raised md-ink-ripple" ng-click="vm.applyFilters()">{{vm.LabelConstant.COMMON.APPLY_FILTERS}}</md-button>
                <md-button class="md-default md-raised md-ink-ripple" ng-click="vm.reset()">{{vm.LabelConstant.COMMON.CLEAR_ALL}}</md-button>
                <md-button class="md-default md-raised md-ink-ripple" ng-click="vm.reset(true)">{{vm.LabelConstant.COMMON.RESET}}</md-button>
              </div>
            </div>
          </div>
        </div>
        <div layout="row" layout-align="start center" layout-wrap flex="100" class="padding-left-10 margin-top-8" ng-if="vm.generateFilter">
          <span class="font-weight-600">
            {{vm.LabelConstant.COMMON.APPLIED_FILTERS}}
          </span>
          <div ng-repeat="item in vm.PurchaseOrderAdvanceFilter" layout="row" layout-align="start center" class="cm-tracking-chip-mian"
               ng-if="!item.isDeleted">
            <div class="tracking-number-chip" layout="row" layout-align="start center">
              <label>
                {{item.value}}
                <md-tooltip md-direction="top" ng-if="item.tooltip" class="tooltip-height-auto cm-white-space-normal tt-multiline max-width-1015 p-5" ng-bind-html="item.tooltip"></md-tooltip>
              </label>
              <md-button class="md-icon-button md-primary md-mini" ng-click="vm.removeAppliedFilter(item, $index)" ng-disabled="item.isDisable">
                <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                <md-tooltip>{{vm.LabelConstant.COMMON.FILTER_REMOVE_TOOLTIP}}</md-tooltip>
              </md-button>
            </div>
          </div>
          <div layout="row" layout-align="start center" class="cm-tracking-chip-mian">
            <div class="tracking-number-chip" layout="row" layout-align="start center">
              <label>
                Clear All
              </label>
              <md-button class="md-icon-button md-primary md-mini" ng-click="vm.reset()">
                <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                <md-tooltip>Clear All Filters and Reload Data</md-tooltip>
              </md-button>
            </div>
          </div>
        </div>
        <div layout="row" layout-align="start center" layout-wrap flex="100" class="padding-left-10 margin-top-8"
             ng-if="vm.isUiGridColumnFiltersApplied && vm.gridOptions.gridApi && vm.gridOptions.gridApi.grid.columns.length > 0">
          <span class="font-weight-600">
            {{vm.LabelConstant.COMMON.APPLIED_GRID_FILTERS}}
          </span>
          <div ng-repeat="item in vm.gridOptions.gridApi.grid.columns" layout="row" layout-align="start center" class="cm-tracking-chip-mian"
               ng-if="item.filters[0].term">
            <div class="tracking-number-chip" layout="row" layout-align="start center" ng-if="item.filters[0].term">
              <label>
                {{item.displayName}}
                <md-tooltip md-direction="top" ng-if="item.filters[0].term" class="tooltip-height-auto cm-white-space-normal tt-multiline max-width-1015 p-5"
                            ng-bind-html="item.filters[0].term">
                </md-tooltip>
              </label>
              <md-button class="md-icon-button md-primary md-mini" ng-click="vm.clearGridColumnFilter(item, $index)">
                <md-icon md-font-icon="icon-close" class="material-icons mat-icon"></md-icon>
                <md-tooltip>{{vm.LabelConstant.COMMON.FILTER_REMOVE_TOOLTIP}}</md-tooltip>
              </md-button>
            </div>
          </div>
        </div>
      </div>
    </form>

  </div>
  <div class="content-card" layout="column" flex ng-if="!vm.isNoDataFound">
    <div>
      <md-card layout="column" flex layout-align="space-between stretch" ng-if="vm.isShowGrid">
        <ui-grid-extention grid-id="vm.gridConfig.gridPurchaseOrderPerLineDetail"
                           load-data="vm.loadData"
                           grid-option="vm.gridOptions"
                           header="vm.sourceHeader"
                           grid-data="vm.sourceData"
                           total-data-count="vm.totalSourceDataCount"
                           reset-grid="vm.resetSourceGrid"
                           selectted-rows="vm.selectedRowsList"
                           paging-info="vm.pagingInfo"
                           current-item="vm.currentdata"
                           get-data-down="vm.getDataDown"
                           scroll-class="vm.generateFilter?vm.setScrollFilterClass:vm.setScrollClass"
                           empty-state="vm.emptyState"
                           delete-multiple-data="vm.deleteMultipleData">
      </md-card>
    </div>

  </div>
  <div class="empty-state text-center full-height" layout="row" layout-align="center center" flex="100" layout-wrap ng-if="vm.isNoDataFound">
    <div class="emty-icon" flex="100">
      <img ng-src="{{vm.EmptyMesssage.IMAGEURL}}" />
    </div>
    <p flex="100" class="empty-state-title">{{vm.EmptyMesssage.MESSAGE}}</p>
    <md-button class="md-fab md-mini" aria-label="Refresh Purchase Order Per Line Detail" ng-click="vm.refreshPurchaseOrderPerLine()">
      <md-icon role="img" md-font-icon="icon-refresh" class="material-icons mat-icon icon-plus"></md-icon>
      <md-tooltip>Refresh Purchase Order Per Line Detail</md-tooltip>
    </md-button>
  </div>
</md-content>

<style>
  .md-contact-suggestion .md-contact-name {
    width: auto !important;
  }
</style>

