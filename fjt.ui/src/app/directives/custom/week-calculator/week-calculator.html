<md-menu id="week-calculator-menu" md-position-mode="right bottom">
  <md-button class="week-calculator-button " ng-click="$mdMenu.open()"
             aria-label="User settings" md-prevent-menu-close="md-prevent-menu-close"
             translate-attr-aria-label="TOOLBAR.USER_SETTINGS">
    <div layout="row" layout-align="space-between center">
      <div class="cm-week-calculator" layout-wrap>
        <div layout="row" flex="100">
          <span class="week">{{wcvm.weekYear | date: wcvm.dateDisplayWeekYearFormat}}</span>
          <md-icon md-font-icon="icon-chevron-down"
                   class="icon s16"></md-icon>
        </div>
        <div layout="row" flex="100" layout-align="center center">
          <span class="cm-font-10"><b>Week (WWYY)</b></span>
        </div>
      </div>
    </div>
  </md-button>
  <div width="3" class="week-calculator" id="week-calculator">
    <md-menu-item>
      <div class="wc-section-main ph-5 cm-custom-label-common border-0">
        <div class="wc-section-inner">
          <form name="wcForm">            
            <div layout layout-align="space-between center">
              <div>
                <table cellspacing="0" cellpadding="0" class="wc-table-input-main width-100p">
                  <tbody>
                    <tr class="input-wrapper">
                      <th><p class="label-container margin-0">Custom Date</p></th>
                      <td>
                        <md-input-container class="datepicker margin-0 w-110" flex="100"
                                            flex-lg="100">
                          <input type="text" class="float-left"
                                 datetime-picker="{{$root.dateDisplayFormat}}"
                                 ui-mask="{{$root.uimaskFormat.date.mask}}"
                                 ui-mask-placeholder="{{$root.uimaskFormat.date.placeholder}}"
                                 enable-time="false"
                                 ng-model="wcvm.customDate"
                                 name="customDate"
                                 ng-change="wcvm.customDateChanged()"
                                 ng-keydown="wcvm.focusPreviousElement($event)"
                                 datepicker-options="wcvm.CustomDateOption"
                                 ui-options="{clearOnBlur  : true}"
                                 model-view-value="true"
                                 is-open="wcvm.CustomDateOption.isCustomDateOpenFlag" />
                          <md-icon md-font-icon="icon-calendar calender-icon"
                                   ng-click="wcvm.openDateSelector($event)">
                          </md-icon>
                          <div ng-messages="wcForm.customDate.$error" role="alert">
                            <div ng-message="datetime">
                              <span>{{wcvm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                            </div>
                          </div>
                        </md-input-container>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div>
                <table cellspacing="0" cellpadding="0" class="wc-table-input-main width-100p">
                  <tbody>
                    <tr class="input-wrapper">
                      <th>
                        <div layout="row">
                          <p class="label-container margin-0">Julian Calendar Number&nbsp; <check-unique-on-blur></check-unique-on-blur></p>
                          <div class="icon-question-mark-circle help-icon padding-left-0-imp">
                            <md-tooltip md-direction="top" class="tooltip-height-auto">
                              Type here and press enter
                            </md-tooltip>
                          </div>
                        </div>
                      </th>
                      <td>
                        <md-input-container flex="100" md-no-float>
                          <input type="number" name="julianNumber" input-number-decimal-place onkeypress="return OnlyNumeric(event)"
                                 ng-model="wcvm.customJulianNumber" placeholder="Type and Press Enter" ng-minlength="7"
                                 ng-blur="wcvm.changeJulianNumber()" ng-keydown="wcvm.onEnterConvertValue($event)"
                                 step="1" ng-maxlength="7" min="0">
                          <div ng-messages="wcForm.julianNumber.$error" md-auto-hide="false"
                               role="alert">
                            <div ng-message="min">
                              <span>{{wcvm.getMinNumberValueValidation(0)}}</span>
                            </div>
                            <div ng-message="maxlength">
                              <span>{{wcvm.getMaxLengthValidation(7, wcForm.julianNumber.$viewValue.length)}}</span>
                            </div>
                            <div ng-message="minlength">
                              <span>{{wcvm.getMinLengthValidation(7, wcForm.julianNumber.$viewValue.length)}}</span>
                            </div>
                            <div ng-message="step || number || max">
                              <span>{{wcvm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                            </div>
                          </div>
                        </md-input-container>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div>
                <table cellspacing="0" cellpadding="0" class="wc-table-input-main width-100p">
                  <tbody>
                    <tr class="input-wrapper">
                      <th>
                        <div layout="row">
                          <p class="label-container margin-0">Julian Calendar Date&nbsp; <check-unique-on-blur></check-unique-on-blur></p>
                          <div class="icon-question-mark-circle help-icon padding-left-0-imp">
                            <md-tooltip md-direction="top" class="tooltip-height-auto">
                              Type here and press enter
                            </md-tooltip>
                          </div>
                        </div>
                      </th>
                      <td>
                        <md-input-container flex="100" md-no-float>
                          <input type="text" name="julianDate" input-number-decimal-place onkeypress="return OnlyNumeric(event)"
                                 ng-model="wcvm.customJulianDate" placeholder="Type and Press Enter" ng-minlength="5"
                                 ng-blur="wcvm.changeJulianDate()" ng-keydown="wcvm.onEnterConvertDate($event)"
                                  ng-maxlength="5"> 
                          <div ng-messages="wcForm.julianDate.$error" md-auto-hide="false"
                               role="alert">
                            <div ng-message="min">
                              <span>{{wcvm.getMinNumberValueValidation(0)}}</span>
                            </div>
                            <div ng-message="maxlength">
                              <span>{{wcvm.getMaxLengthValidation(5, wcForm.julianDate.$viewValue.length)}}</span>
                            </div>
                            <div ng-message="minlength">
                              <span>{{wcvm.getMinLengthValidation(5, wcForm.julianDate.$viewValue.length)}}</span>
                            </div>
                            <div ng-message="step || number || max">
                              <span>{{wcvm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                            </div>
                          </div>
                        </md-input-container>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </form>
        </div>
        <table class="table table-bordered margin-bottom-0 font-size-11">
          <thead>
            <tr>
              <th>Week Start Date</th>
              <th>Week End Date</th>
              <th>Day</th>
              <th>Week Year(WWYY)</th>
              <th>Month Year(MMYY)</th>
              <th>Year Month(YYMM)</th>
              <th>Year Week(YYWW)</th>
              <th>Julian Calendar Number</th>
              <th>Julian Calendar Date</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{wcvm.StartDate | date: wcvm.dateDisplayFormat}}</td>
              <td>{{wcvm.EndDate | date: wcvm.dateDisplayFormat}}</td>
              <td>{{wcvm.customDateDay}}</td>
              <td>{{wcvm.SelectedDate | date: wcvm.dateDisplayWeekYearFormat}}</td>
              <td>{{wcvm.SelectedDate | date: wcvm.dateDisplayMonthYearFormat}}</td>
              <td>{{wcvm.SelectedDate | date: wcvm.dateDisplayYearMonthFormat}}</td>
              <td>{{wcvm.SelectedDate | date: wcvm.dateDisplayYearWeekFormat }}</td>
              <td>{{wcvm.julianNumber}}</td>
              <td>{{wcvm.julianDate}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </md-menu-item>
  </div>
</md-menu>
