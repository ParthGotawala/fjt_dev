<md-dialog class="cm-custom-label-common cm-bin-add-update" aria-label="Add Calibration Details" cg-busy="{promise:vm.cgBusyLoading}" draggable flex="65">
  <form name="vm.calibrationDetailsForm" class="md-inline-form" novalidate>
    <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
    <md-toolbar>
      <div class="md-toolbar-tools" layout="row" layout-align="space-between center">
        <h2>{{vm.calibrationDetails && vm.calibrationDetails.id ? 'Update' : 'Add'}} Calibration Detail</h2>
        <span flex></span>
        <popup-header-label label-data="vm.headerdata"></popup-header-label>
        <md-button class="md-icon-button" ng-click="vm.cancel()">
          <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="customer-modal no-padding custome-scroll">
      <md-content class="padding-10 mh-5">
        <div class="cm-section-main margin-bottom-5">
          <div class="cm-section-inner">
            <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
              <tbody>
                <tr>
                  <th>
                  </th>
                  <td colspan="5">
                    <md-input-container>
                      <md-radio-group layout="row"
                                      layout-wrap
                                      name="equipmentworkStation"
                                      ng-model="vm.calibrationDetails.equipmentAs"
                                      ng-change="vm.equipmentAsChange(vm.calibrationDetails.equipmentAs)" md-autofocus>
                        <md-radio-button ng-repeat="item in vm.RadioGroup.equipmentAs.array"
                                         ng-if="item.Value!=3"
                                         ng-value="{{item.Value}}"
                                         ng-disabled="vm.calibrationDetails.id || vm.equipmentAs">
                          {{item.Key}}
                        </md-radio-button>
                      </md-radio-group>
                    </md-input-container>
                  </td>
                </tr>
                <tr>
                  <th>
                    <p class="label-container">
                      <a class="cm-text-decoration" tabindex="-1" ng-click="vm.goToEquipmentList();">Equipment / Workstation</a><span>&nbsp;*</span>
                    </p>
                  </th>
                  <td>
                    <md-input-container ng-if="vm.autoCompleteSearchEquipment" class="autocompletecustom" flex="100">
                      <custom-auto-complete-search on-search-fn="vm.autoCompleteSearchEquipment.onSearchFn"
                                                   column-name="vm.autoCompleteSearchEquipment.columnName"
                                                   controller-name="vm.autoCompleteSearchEquipment.controllerName"
                                                   parent-column-name="vm.autoCompleteSearchEquipment.parentColumnName"
                                                   view-template-url="vm.autoCompleteSearchEquipment.viewTemplateURL"
                                                   key-column-name="vm.autoCompleteSearchEquipment.keyColumnName"
                                                   input-name="vm.autoCompleteSearchEquipment.inputName"
                                                   placeholder-name="vm.autoCompleteSearchEquipment.placeholderName"
                                                   key-column-id="vm.autoCompleteSearchEquipment.keyColumnId"
                                                   is-required="true"
                                                   is-addnew="vm.autoCompleteSearchEquipment.isAddnew"
                                                   callback-fn="vm.autoCompleteSearchEquipment.callbackFn" parent-id=""
                                                   add-data="vm.autoCompleteSearchEquipment.addData"
                                                   is-disabled="vm.calibrationDetails.id || vm.eqpId"
                                                   on-select-callback-fn="vm.autoCompleteSearchEquipment.onSelectCallbackFn">
                      </custom-auto-complete-search>
                    </md-input-container>
                  </td>
                  <td class="padding-top-5" ng-if="vm.calibrationDetails.ID">
                    <p class="label-box" ng-class="{'label-success': vm.calibrationDetails.equipmentActiveStatus,'label-warning': !vm.calibrationDetails.equipmentActiveStatus}">
                      {{vm.calibrationDetails.equipmentActiveStatusValue}}
                    </p>
                  </td>
                </tr>
                <tr>
                  <th>
                    <p class="label-container">Name</p>
                  </th>
                  <td>
                    <md-input-container class="md-block" md-no-float flex flex-xs="75">
                      <input type="text" md-maxlength="255"
                             ng-model="vm.calibrationDetails.name"
                             ng-disabled="true">
                      <div ng-messages="vm.calibrationDetailsForm.title.$error" role="alert">
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(255,vm.calibrationDetailsForm.title.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                  <th>
                    <p class="label-container">Make</p>
                  </th>
                  <td>
                    <md-input-container class="md-block" md-no-float flex flex-xs="75">
                      <input type="text" md-maxlength="100"
                             ng-model="vm.calibrationDetails.make"
                             ng-disabled="true">
                      <div ng-messages="vm.calibrationDetailsForm.title.$error" role="alert">
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(100,vm.calibrationDetailsForm.title.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                  <th>
                    <p class="label-container">Model</p>
                  </th>
                  <td>
                    <md-input-container class="md-block" md-no-float flex flex-xs="75">
                      <input type="text" md-maxlength="255"
                             ng-model="vm.calibrationDetails.model"
                             ng-disabled="true">
                      <div ng-messages="vm.calibrationDetailsForm.title.$error" role="alert">
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(255,vm.calibrationDetailsForm.title.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                </tr>
                <tr>
                  <th>
                    <p class="label-container">Workstation/Asset#</p>
                  </th>
                  <td colspan="3">
                    <md-input-container class="md-block" md-no-float flex flex-xs="75">
                      <input type="text" md-maxlength="11"
                             ng-model="vm.calibrationDetails.wanum"
                             ng-disabled="true">
                      <div ng-messages="vm.calibrationDetailsForm.title.$error" role="alert">
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(11,vm.calibrationDetailsForm.title.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                  <th>
                    <p class="label-container">MFR Serial#</p>
                  </th>
                  <td>
                    <md-input-container class="md-block" md-no-float flex flex-xs="25">
                      <input type="text" md-maxlength="100"
                             ng-model="vm.calibrationDetails.mfrSNum"
                             ng-disabled="true">
                      <div ng-messages="vm.calibrationDetailsForm.title.$error" role="alert">
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(10,vm.calibrationDetailsForm.title.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                </tr>
                <tr>
                  <th>
                    <p class="label-container">
                      <a class="cm-text-decoration" tabindex="-1" ng-click="vm.goToDepartmentList()">Department</a>
                    </p>
                  </th>
                  <td >
                    <md-input-container class="md-block" md-no-float flex flex-xs="25">
                      <input type="text" 
                             ng-model="vm.calibrationDetails.departmentName"
                             ng-disabled="true">
                    </md-input-container>
                  </td>
                  <th>
                    <p class="label-container">
                      <a class="cm-text-decoration" tabindex="-1" ng-click="vm.goToLocationList()">Geolocation</a>
                    </p>
                  </th>
                  <td  colspan="3" >
                    <md-input-container class="md-block" md-no-float flex flex-xs="25">
                      <input type="text" 
                             ng-model="vm.calibrationDetails.locationName"
                             ng-disabled="true">
                    </md-input-container>
                  </td>
                </tr>
                <tr ng-hide="true">
                  <th>
                    <p class="label-container">Calibration Type<span>&nbsp;*</span></p>
                  </th>
                  <td ng-if="vm.autoCompleteCalibrationType">
                    <md-input-container class="autocompletecustom cm-custom-autocomplete margin-0" flex="100">
                      <custom-auto-complete datalist="vm.calibrationTypeList"
                                            column-name="vm.autoCompleteCalibrationType.columnName"
                                            key-column-name="vm.autoCompleteCalibrationType.keyColumnName"
                                            input-name="vm.autoCompleteCalibrationType.inputName"
                                            placeholder-name="vm.autoCompleteCalibrationType.placeholderName"
                                            key-column-id="vm.autoCompleteCalibrationType.keyColumnId"
                                            is-required="vm.autoCompleteCalibrationType.isRequired"
                                            is-disabled="true"
                                            on-select-callback-fn="vm.autoCompleteCalibrationType.onSelectCallbackFn">
                      </custom-auto-complete>
                    </md-input-container>
                  </td>
                </tr>

                <tr>
                  <th>
                    <p class="label-container">Calibration Date<span>&nbsp;*</span></p>
                  </th>
                  <td>
                    <md-input-container class="datepicker input-width margin-0 padding-right-0-imp">
                      <input type="text" class="float-left" name="calibrationDate"
                             datetime-picker="{{$root.dateDisplayFormat}}"
                             ui-mask="{{$root.uimaskFormat.date.mask}}"
                             ui-mask-placeholder="{{$root.uimaskFormat.date.placeholder}}"
                             enable-time="false"
                             ng-model="vm.calibrationDetails.calibrationDate"
                             ng-change="vm.calibrationDateChanged()"
                             datepicker-options="vm.calibrationDateOptions"
                             ui-options="{clearOnBlur  : true}"
                             model-view-value="true"
                             is-open="vm.calibrationDateOptions.calibrationDateOpenFlag"
                             ng-required="true" />
                      <md-icon md-font-icon="icon-calendar calender-icon"
                               ng-click="vm.calibrationDateOptions.calibrationDateOpenFlag = true">
                      </md-icon>
                      <div ng-messages="vm.calibrationDetailsForm.calibrationDate.$error" role="alert">
                        <div ng-message="valid || datetime">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                        </div>
                        <div ng-message="mindate">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                        </div>
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>

                  <th>
                    <p class="label-container">Calibration Expiration Date<span>&nbsp;*</span></p>
                  </th>
                  <td>
                    <md-input-container class="datepicker input-width margin-0 padding-right-0-imp">
                      <input type="text" class="float-left"
                             name="calibrationExpirationDate"
                             min-value="vm.minExpirationDate"
                             min-value-is-today-date="false"
                             allow-past-date="true"
                             allow-future-date="true"
                             datetime-picker="{{$root.dateDisplayFormat}}"
                             ui-mask="{{$root.uimaskFormat.date.mask}}"
                             ui-mask-placeholder="{{$root.uimaskFormat.date.placeholder}}"
                             enable-time="false"
                             ng-model="vm.calibrationDetails.calibrationExpirationDate"
                             ng-change="vm.calibrationExpirationDateChanged()"
                             datepicker-options="vm.calibrationExpirationDateOptions"
                             ui-options="{clearOnBlur  : true}"
                             model-view-value="true"
                             is-open="vm.calibrationExpirationDateOptions.calibrationExpirationDateOpenFlag"
                             ng-required="true" />
                      <md-icon md-font-icon="icon-calendar calender-icon"
                               ng-click="vm.calibrationExpirationDateOptions.calibrationExpirationDateOpenFlag = true">
                      </md-icon>
                      <div ng-messages="vm.calibrationDetailsForm.calibrationExpirationDate.$error" role="alert">
                        <div ng-message="minvalue">
                          <span>{{vm.getMinDateValidation()}}</span>
                        </div>
                        <div ng-message="valid || datetime">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                        </div>
                        <div ng-message="mindate">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                        </div>
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                </tr>
                <tr>
                  <th>
                    <p class="label-container">Comments</p>
                  </th>
                  <td colspan="3">
                    <md-input-container flex="100" md-no-float>
                      <textarea name="calibrationComments"
                                ng-model="vm.calibrationDetails.calibrationComments"
                                ng-maxlength="255"
                                rows="1"
                                max-rows="2"
                                placeholder="Comments" md-maxlength="255"></textarea>
                      <div ng-messages="vm.calibrationDetailsForm.calibrationComments.$error"
                           role="alert">
                        <div ng-message="maxlength">
                          <span>{{vm.getMaxLengthValidation(255, vm.calibrationDetailsForm.calibrationComments.$viewValue.length)}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                </tr>
                <tr>
                  <td colspan="6">

                    <span class="margin-bottom-10"  style="font-size:12px">Descrtiption</span>
                    <text-angular class="RFQ-info-text-area text-angular-editor-scroll" flex  cg-busy-loading="vm.cgBusyLoading"
                                  ng-class="{'text-angular-custom-border':vm.calibrationDetailsForm.description.$error.taMaxText || vm.calibrationDetailsForm.description.$error.taMinText}"
                                  ng-model="vm.calibrationDetails.description"
                                  name="description"
                                  ta-disabled="true"
                                  ta-min-text="{{vm.taToolbar.MIN_LENGTH}}"
                                  ng-required="{{vm.taToolbar.REQUIRED ? vm.taToolbar.REQUIRED : false}}"></text-angular>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </md-content>
    </md-dialog-content>
    <md-dialog-actions layout="row">
      <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
      <md-button id="saveBtn" class="md-primary md-raised"
                 ng-class="{'md-formdirty': vm.calibrationDetailsForm.$dirty}"
                 ng-click="vm.save(vm.BUTTON_TYPE.SAVE)" ng-disabled="vm.saveDisable"
                 aria-label="Submit">
        Save
      </md-button>
      <md-button id="saveBtn" class="md-primary md-raised"
                 ng-class="{'md-formdirty': vm.calibrationDetailsForm.$dirty}"
                 ng-click="vm.save(vm.BUTTON_TYPE.SAVEANDEXIT)" ng-disabled="vm.saveDisable"
                 aria-label="Submit">
        Save & Exit
      </md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
