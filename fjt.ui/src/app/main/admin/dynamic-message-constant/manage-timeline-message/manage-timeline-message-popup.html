<md-dialog aria-label="Add Department" cg-busy="{promise:vm.cgBusyLoading}" draggable>
    <form name="vm.ManageDynamicMessageTimelineForm" novalidate>
        <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2>Update Dynamic Message</h2>
                <span flex></span>
                <div layout="row" layout-align="center center">
                    <md-button class="md-primary md-raised" ng-if="vm.manageDynamicMessage.primarykey">{{vm.manageDynamicMessage.primarykey}}</md-button>
                    <md-button class="md-primary md-raised" ng-if="vm.manageDynamicMessage.key && vm.manageDynamicMessage.key != vm.manageDynamicMessage.primarykey">{{vm.manageDynamicMessage.key}}</md-button>
                </div>
                <md-button class="md-icon-button" ng-click="vm.cancel()">
                    <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
                </md-button>
            </div>
        </md-toolbar>
        <md-dialog-content class="customer-modal no-padding cm-custom-label-common min-width-auto-600" layout="column">
            <md-content class="padding-10">
                <div layout-gt-xs="row" class="margin-bottom-10 font-size-14">
                    <md-button class="md-icon-button toolbar-button margin-0 cm-btn-icon-18" ng-click="vm.copyTextToClipBoard($event,'title')"
                               ng-if="vm.manageDynamicMessage.defaultMessage.title">
                        <md-icon md-font-icon="icon-content-copy" class="md-18" role="img"></md-icon>
                        <md-tooltip>Copy default message (Title)</md-tooltip>
                    </md-button>
                    <span class="text-bold" layout="row" layout-align="start center" ng-if="vm.manageDynamicMessage.defaultMessage.title">
                        Deafult Message (Title):&nbsp;
                        <span class="md-accent-fg text-bold" id="defaultMessage">{{vm.manageDynamicMessage.defaultMessage.title}}</span>
                    </span>
                </div>
                <div class="cm-section-main border-0">
                    <div class="cm-section-inner">
                        <table cellpadding="0" cellspacing="0" class="cm-table-input-main">
                            <tbody>
                                <tr>
                                    <th>
                                        <p class="label-container">Message Title<span>&nbsp;*</span></p>
                                    </th>
                                    <td>
                                        <md-input-container class="vm.isContainDynamicVariableTitle ? md-block : ''" flex="vm.isContainDynamicVariableTitle ? '100' : '100'"
                                                            flex-gt-xs="vm.isContainDynamicVariableTitle ? '100' : '100'">
                                            <textarea name="title" ng-model="vm.manageDynamicMessage.title"
                                                      placeholder="Message Title" required ng-maxlength="1000" rows="2" md-autofocus></textarea>
                                            <div ng-messages="vm.ManageDynamicMessageTimelineForm.title.$error"
                                                 role="alert">
                                                <div ng-message="required">
                                                    <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                </div>
                                                <div ng-message="maxlength">
                                                    <span>{{vm.getMaxLengthValidation(1000,vm.ManageDynamicMessageTimelineForm.title.$viewValue.length)}}</span>
                                                </div>
                                            </div>
                                            <div class="custom-note-message md-primary-fg" ng-if="vm.isContainDynamicVariableTitle"
                                                 ng-bind-html="vm.CORE_MESSAGE_CONSTANT.DYNAMIC_MESSAGE_VARIABLE_NOTES">
                                            </div>
                                            <!--<div ng-if="vm.isContainDynamicVariableTitle" class="padding-top-10"
        ng-bind-html="vm.CORE_MESSAGE_CONSTANT.DYNAMIC_MESSAGE_VARIABLE_NOTES"></div>-->
                                        </md-input-container>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div layout-gt-xs="row" class="margin-bottom-10 font-size-14">
                    <md-button class="md-icon-button toolbar-button margin-0 cm-btn-icon-18" ng-click="vm.copyTextToClipBoard($event,'description')"
                               ng-if="vm.manageDynamicMessage.defaultMessage.description">
                        <md-icon md-font-icon="icon-content-copy" class="md-18" role="img"></md-icon>
                        <md-tooltip>Copy default message (Description)</md-tooltip>
                    </md-button>
                    <span class="text-bold" layout="row" layout-align="start center" ng-if="vm.manageDynamicMessage.defaultMessage.description">
                        Deafult Message (Description):&nbsp;
                        <span class="md-accent-fg text-bold" id="defaultMessage">{{vm.manageDynamicMessage.defaultMessage.description}}</span>
                    </span>
                </div>
                <div class="cm-section-main border-0">
                    <div class="cm-section-inner">
                        <table cellpadding="0" cellspacing="0" class="cm-table-input-main">
                            <tbody>
                                <tr>
                                    <th>
                                        <p class="label-container">Description<span>&nbsp;*</span></p>
                                    </th>
                                    <td>
                                        <md-input-container class="vm.isContainDynamicVariableDesc ? md-block : ''" flex="vm.isContainDynamicVariableDesc ? '100' : '100'"
                                                            flex-gt-xs="vm.isContainDynamicVariableDesc ? '100' : '100'">
                                            <textarea name="description" ng-model="vm.manageDynamicMessage.description"
                                                      placeholder="Description" required ng-maxlength="1000" rows="2" md-autofocus></textarea>
                                            <div ng-messages="vm.ManageDynamicMessageTimelineForm.description.$error"
                                                 role="alert">
                                                <div ng-message="required">
                                                    <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                </div>
                                                <div ng-message="maxlength">
                                                    <span>{{vm.getMaxLengthValidation(1000,vm.ManageDynamicMessageTimelineForm.description.$viewValue.length)}}</span>
                                                </div>
                                            </div>
                                            <div class="custom-note-message md-primary-fg" ng-if="vm.isContainDynamicVariableDesc"
                                                 ng-bind-html="vm.CORE_MESSAGE_CONSTANT.DYNAMIC_MESSAGE_VARIABLE_NOTES">
                                            </div>
                                            <!--<div ng-if="vm.isContainDynamicVariableDesc" class="padding-top-10"
        ng-bind-html="vm.CORE_MESSAGE_CONSTANT.DYNAMIC_MESSAGE_VARIABLE_NOTES"></div>-->
                                        </md-input-container>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </md-content>
        </md-dialog-content>

        <md-dialog-actions layout="row">
            <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
            <md-button class="md-primary md-raised" ng-click="vm.saveDynamicMessage()" aria-label="Submit">Save</md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
