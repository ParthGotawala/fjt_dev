<md-dialog aria-label="ManageMaintenanceSchedule" class="cm-custom-label-common" cg-busy="{promise:vm.cgBusyLoading}"
           draggable>
    <form name="vm.equipment_manageMaintenanceScheduleForm" class="md-inline-form" novalidate>
        <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2>{{vm.manageTaskSchedule.repeatsType}} - Manage Maintenance Schedule</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="vm.cancel()">
                    <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
                </md-button>
            </div>
        </md-toolbar>
        <md-dialog-content class="customer-modal no-padding custom-scroll">
            <md-content class="padding-10" layout="row" layout-wrap>
                <div layout="row" flex="100" layout-align="start start">
                    <div class="cm-section-main border-0" flex="100">
                        <div class="cm-section-inner" flex="100">
                            <table cellpadding="0" cellspacing="0" class="cm-table-input-main">
                                <tbody>
                                    <tr>
                                        <th>
                                            <p class="label-container">Set Start Time<span>&nbsp;*</span></p>
                                        </th>
                                        <td>
                                            <md-input-container class="margin-0 padding-right-0-imp" flex="100">
                                                <input type="text" class="float-left"
                                                       name="startTime"
                                                       datetime-picker="{{$root.timeWithoutSecondDisplayFormat}}"
                                                       ng-model="vm.manageTaskSchedule.scheduleStartTime"
                                                       datepicker-options="vm.startTimeOptions"
                                                       is-open="vm.startTimeOptions.startTimeOpenFlag"
                                                       ui-mask="{{$root.uimaskFormat.time.mask}}"
                                                       ui-mask-placeholder="{{$root.uimaskFormat.time.placeholder}}"
                                                       model-view-value="true"
                                                       enable-date="false"
                                                       enable-time="true"
                                                       ng-disabled="!vm.Iseditable"
                                                       required/>
                                                <md-icon md-font-icon="icon-calendar calender-icon"
                                                         ng-click="vm.startTimeOptions.startTimeOpenFlag = (!vm.Iseditable ? false: true)">
                                                </md-icon>
                                                <div class="error-msg"
                                                     ng-messages="vm.equipment_manageMaintenanceScheduleForm.startTime.$error" role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                    <div ng-message="datetime">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                            <!-- <md-input-container class="datetimepicker-custom paddin padding-left-30">
                                                <input mdc-datetime-picker=""
                                                       date="false"
                                                       time="true"
                                                       type="text"
                                                       short-time="true"
                                                       id="datetime"
                                                       name="startTime"
                                                       placeholder="Set Start Time"
                                                       show-todays-date=""
                                                       edit-input="true"
                                                       show-icon="true"
                                                       ng-model="vm.manageTaskSchedule.scheduleStartTime"
                                                       class="dtp-no-msclear md-input margin-0"
                                                       ng-disabled="!vm.Iseditable"
                                                       ng-change="vm.equipment_manageMaintenanceScheduleForm.$dirty = true"
                                                       md-autofocus>

                                                <div class="error-msg" ng-messages="vm.equipment_manageMaintenanceScheduleForm.startTime.$error" role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                    <div ng-message="format">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container> -->

                                        </td>
                                    </tr>
                                    <tr>
                                        <th ng-if="vm.manageTaskSchedule.repeatsType == vm.Maintenance_Schedule_RepeatType.Weekly">
                                            <p class="label-container">Select Day<span>&nbsp;*</span></p>
                                        </th>
                                        <td ng-if="vm.manageTaskSchedule.repeatsType == vm.Maintenance_Schedule_RepeatType.Weekly">
                                            <md-input-container>
                                                <md-select class="margin-top-0" name="dayType"
                                                           ng-model="vm.manageTaskSchedule.dayType" placeholder="Select Day"
                                                           required ng-disabled="!vm.Iseditable">
                                                    <md-option ng-repeat="day in vm.Day | orderBy : 'ID' "
                                                               value="{{day.ID}}">
                                                        {{ day.Value }}
                                                    </md-option>
                                                </md-select>
                                                <div ng-messages="vm.equipment_manageMaintenanceScheduleForm.dayType.$error"
                                                     role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th ng-if="vm.manageTaskSchedule.repeatsType == vm.Maintenance_Schedule_RepeatType.Monthly">
                                            <p class="label-container">Select Month<span>&nbsp;*</span></p>
                                        </th>
                                        <td ng-if="vm.manageTaskSchedule.repeatsType == vm.Maintenance_Schedule_RepeatType.Monthly">
                                            <md-input-container>
                                                <label>Select Month</label>
                                                <md-select class="margin-top-0" name="monthType"
                                                           ng-model="vm.manageTaskSchedule.monthType"
                                                           placeholder="Select Month" required ng-disabled="!vm.Iseditable">
                                                    <md-option ng-repeat="month in vm.Month | orderBy : 'ID' "
                                                               value="{{month.ID}}">
                                                        {{ month.Value }}
                                                    </md-option>
                                                </md-select>
                                                <div ng-messages="vm.equipment_manageMaintenanceScheduleForm.monthType.$error"
                                                     role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th ng-if="vm.manageTaskSchedule.repeatsType == vm.Maintenance_Schedule_RepeatType.Monthly">
                                            <p class="label-container">Select Date<span>&nbsp;*</span></p>
                                        </th>
                                        <td ng-if="vm.manageTaskSchedule.repeatsType == vm.Maintenance_Schedule_RepeatType.Monthly">
                                            <md-input-container>
                                                <md-select class="" name="monthDate"
                                                           ng-model="vm.manageTaskSchedule.monthDate" placeholder="Select Date"
                                                           required
                                                           ng-disabled="!vm.manageTaskSchedule.monthType || !vm.Iseditable">
                                                    <md-option ng-repeat="date in vm.getNumber(vm.manageTaskSchedule.monthType) track by $index "
                                                               value="{{$index + 1}}">
                                                        {{$index + 1}}
                                                    </md-option>
                                                </md-select>
                                                <div ng-messages="vm.equipment_manageMaintenanceScheduleForm.monthDate.$error"
                                                     role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            <p class="label-container">End Type</p>
                                        </th>
                                        <td>
                                            <md-input-container class="md-block md-input-has-value">
                                                <md-radio-group flex="100" flex-xs="100"
                                                                ng-model="vm.manageTaskSchedule.repeatEnd" layout="row"
                                                                class="margin-0" required ng-disabled="!vm.Iseditable">
                                                    <md-radio-button flex="20" class="margin-top-0" flex-xs="100"
                                                                     ng-model="vm.manageTaskSchedule.repeatEnd" name="repeatEnd"
                                                                     value="N">
                                                        Never
                                                    </md-radio-button>
                                                    <md-radio-button flex="20" class="margin-top-0" flex-xs="100"
                                                                     ng-model="vm.manageTaskSchedule.repeatEnd" name="repeatEnd"
                                                                     value="A">
                                                        After
                                                    </md-radio-button>
                                                    <md-radio-button flex="20" class="margin-top-0" flex-xs="100"
                                                                     ng-model="vm.manageTaskSchedule.repeatEnd" name="repeatEnd"
                                                                     value="O">
                                                        On
                                                    </md-radio-button>
                                                </md-radio-group>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th ng-if="vm.manageTaskSchedule.repeatEnd == 'A'">
                                            <p class="label-container">End on after occurrence<span>&nbsp;*</span></p>
                                        </th>
                                        <td ng-if="vm.manageTaskSchedule.repeatEnd == 'A'">
                                            <md-input-container>
                                                <input type="number" min="0" ng-maxlength="8" name="endAfterOccurrence"
                                                       ng-model="vm.manageTaskSchedule.endAfterOccurrence"
                                                       placeholder="End on after occurrence" required
                                                       ng-disabled="!vm.Iseditable" onkeypress="return OnlyNumeric(event)">
                                                <div ng-messages="vm.equipment_manageMaintenanceScheduleForm.endAfterOccurrence.$error"
                                                     role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                    <div ng-message="number">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                    </div>
                                                    <div ng-message="maxlength">
                                                        <span>{{vm.getMaxLengthValidation(8, vm.equipment_manageMaintenanceScheduleForm.endAfterOccurrence.$viewValue.length)}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th ng-if="vm.manageTaskSchedule.repeatEnd == 'O'">
                                            <p class="datepickerlfetlable label-container">End On Date<span>&nbsp;*</span></p>
                                        </th>
                                        <td ng-if="vm.manageTaskSchedule.repeatEnd == 'O'">
                                            <md-input-container class="md-block datepicker padding-right-0-imp" flex="100">
                                                <!--<input type="text" class="float-left"
                                                       id="endOnDate"
                                                       name="endOnDate"
                                                       max-value="vm.manageTaskSchedule.eqpTaskScheduleID ? '' : vm.todayDate"
                                                       max-value-is-today-date="true"
                                                       allow-past-date="false"
                                                       allow-future-date="true"
                                                       datetime-picker="{{$root.dateDisplayFormat}}"
                                                       ng-model="vm.manageTaskSchedule.endOnDate"
                                                       enable-time="false"
                                                       ui-options="{clearOnBlur  : false}"
                                                       ui-mask="{{$root.uimaskFormat.date.mask}}"
                                                       ui-mask-placeholder="{{$root.uimaskFormat.date.placeholder}}"
                                                       model-view-value="true"
                                                       datepicker-options="vm.endOnDateOptions"
                                                       is-open="vm.IsPickerOpen[vm.DATE_PICKER.endOnDate]" required />-->
                                                <input type="text" class="float-left"
                                                       id="endOnDate"
                                                       name="endOnDate"
                                                       max-value="(vm.manageTaskSchedule.isActive && vm.manageTaskSchedule.eqpTaskScheduleID) ? '' : vm.todayDate"
                                                       max-value-is-today-date="(vm.manageTaskSchedule.isActive && vm.manageTaskSchedule.eqpTaskScheduleID) ? '' : true"
                                                       allow-past-date="(vm.manageTaskSchedule.isActive && vm.manageTaskSchedule.eqpTaskScheduleID) ? true : false"
                                                       allow-future-date="true"
                                                       datetime-picker="{{$root.dateDisplayFormat}}"
                                                       ng-model="vm.manageTaskSchedule.endOnDate"
                                                       enable-time="false"
                                                       ui-options="{clearOnBlur  : true}"
                                                       ui-mask="{{$root.uimaskFormat.date.mask}}"
                                                       ui-mask-placeholder="{{$root.uimaskFormat.date.placeholder}}"
                                                       model-view-value="true"
                                                       datepicker-options="vm.endOnDateOptions"
                                                       is-open="vm.IsPickerOpen[vm.DATE_PICKER.endOnDate]"
                                                       ng-disabled="!vm.Iseditable"
                                                       required />
                                                <md-icon md-font-icon="icon-calendar calender-icon" ng-click="vm.IsPickerOpen[vm.DATE_PICKER.endOnDate] = (!vm.Iseditable ? false : true)">
                                                </md-icon>
                                                <div ng-messages="vm.equipment_manageMaintenanceScheduleForm.endOnDate.$error" role="alert">
                                                    <div ng-message="maxvalue">
                                                        <span>{{vm.getMinDateValidation('End On Date', 'Today Date')}}</span>
                                                    </div>
                                                    <div ng-message="valid">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                    </div>
                                                    <div ng-message="datetime">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                    </div>
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div flex="100" layout="row" class="mh-5">
                            <md-input-container flex="100">
                                <div layout="column">
                                    <span class="label-container margin-bottom-0">
                                        Schedule Comment&nbsp;<span ng-style="{'color':vm.equipment_manageMaintenanceScheduleForm.scheduleRemarks.$error.taMaxText?'red':''}" style="font-size:12px;">{{vm.minLengthMessage}}<span ng-if="vm.taToolbar.REQUIRED">&nbsp;*</span></span>
                                    </span>
                                    <span class="margin-bottom-10"
                                          ng-if="vm.equipment_manageMaintenanceScheduleForm.scheduleRemarks.$error.taMaxText"
                                          style="color:red; font-size:12px">{{vm.getMaxLengthValidation(vm.taToolbar.MAX_LENGTH, vm.equipment_manageMaintenanceScheduleForm.scheduleRemarks.$viewValue.length)}}</span>
                                </div>
                                <text-angular ta-toolbar="vm.taToolbar.INLINE" cg-busy-loading="vm.cgBusyLoading"
                                              ng-class="{'text-angular-custom-border':vm.equipment_manageMaintenanceScheduleForm.scheduleRemarks.$error.taMaxText}"
                                              ng-model="vm.manageTaskSchedule.scheduleRemarks" name="scheduleRemarks"
                                              ta-min-text="{{vm.taToolbar.MIN_LENGTH}}" ta-max-text="{{vm.taToolbar.MAX_LENGTH}}"
                                              ng-required="{{vm.taToolbar.REQUIRED ? vm.taToolbar.REQUIRED : false}}"
                                              ta-disabled="!vm.Iseditable"></text-angular>
                                <div ng-messages="vm.equipment_manageMaintenanceScheduleForm.scheduleRemarks.$error"
                                     role="alert">
                                    <div ng-message="required">
                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                    </div>
                                </div>
                            </md-input-container>
                        </div>
                    </div>
                </div>
            </md-content>
        </md-dialog-content>
        <md-dialog-actions layout="row">
            <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
            <md-button class="md-primary md-raised"
                       ng-class="{'md-formdirty': vm.equipment_manageMaintenanceScheduleForm.$dirty}"
                       ng-click="vm.saveMaintenanceTaskSchedule()" aria-label="Submit" ng-if="vm.Iseditable">Save</md-button>
            <md-button class="md-primary md-raised" ng-click="vm.cancel()" ng-if="!vm.Iseditable">Ok</md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
