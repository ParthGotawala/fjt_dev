<md-dialog aria-label="OtherPermission" flex="60" cg-busy="{promise:vm.cgBusyLoading}" draggable class="cm-custom-label-common">
  <form name="vm.otherPermissionForm" class="md-inline-form" novalidate>
    <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>{{vm.gencCategoryID ? 'Update' : 'Add'}} {{vm.headerTitle}}</h2>
        <span flex></span>
        <md-button class="md-primary md-raised" id="headerAddBtn" ng-click="vm.saveAndProceed(vm.BUTTON_TYPE.ADDNEW)">Add {{vm.headerTitle}}</md-button>
        <md-button class="md-icon-button" ng-click="vm.cancel()">
          <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="customer-modal no-padding custom-scroll" layout="column">
      <md-content class="padding-10">
        <div layout="row" flex="100" layout-wrap>
          <div class="cm-section-main border-0" flex="100">
            <div class="cm-section-inner">
              <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                <tbody>
                  <tr>
                    <th>
                      <p class="label-container padding-left-0-imp">
                        <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToGenericCategoryList();">
                          {{vm.isBarcodeSeparator?'Barcode Field Separator(s) (e.g &, &&, @@, &$, etc.)':vm.headerTitle}}
                        </a><span>&nbsp;*<check-unique-on-blur></check-unique-on-blur></span>
                      </p>
                    </th>
                    <td colspan="3">
                      <div layout="row">
                        <md-input-container class="md-block">
                          <input type="text" name="categoryName" id="categoryName" ng-model="vm.gencCategoryName"
                                 custom-blur="vm.checkGenericCategoryAlreadyExists()" placeholder="{{vm.headerTitle}}" required ng-maxlength="100" md-maxlength="100"
                                 ng-if="!vm.isBarcodeSeparator && vm.Printers!=vm.title" md-autofocus>
                          <input type="text" name="categoryName" id="categoryName" ng-model="vm.gencCategoryName"
                                 custom-blur="vm.checkGenericCategoryAlreadyExists()" placeholder="{{vm.headerTitle}}" required ng-maxlength="100" md-maxlength="100"
                                 ng-if="!vm.isBarcodeSeparator && vm.Printers==vm.title" md-autofocus>
                          <input type="text" name="categoryName" ng-model="vm.gencCategoryName"
                                 custom-blur="vm.checkGenericCategoryAlreadyExists()" placeholder="{{vm.headerTitle}}" ng-trim='false' ng-if="vm.isBarcodeSeparator"
                                 required ng-maxlength="100" md-maxlength="100" md-autofocus>
                          <div ng-messages="vm.otherPermissionForm.categoryName.$error"
                               role="alert">
                            <div ng-message="required">
                              <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                            </div>
                            <div ng-message="maxlength">
                              <span>{{vm.getMaxLengthValidation(100,vm.otherPermissionForm.categoryName.$viewValue.length)}}</span>
                            </div>
                          </div>
                        </md-input-container>
                        <div class="input-wrapper margin-top-5" layout-align="end center" ng-hide="vm.IsHideActiveDeActiveFields">
                          <md-input-container flex="100">
                            <md-radio-group layout="row" layout-align="start start"
                                            name="Active" ng-model="vm.isActive">
                              <md-radio-button ng-repeat="item in vm.RadioGroup.isActive.array"
                                               name="{{item.Value}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                            </md-radio-group>
                          </md-input-container>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr ng-if="vm.categoryType.categoryType != vm.HomeCategory && vm.categoryType.categoryType != vm.DocumentTypeCategory && vm.categoryType.categoryType != vm.Printers && vm.categoryType.categoryType != vm.ReportCategory">
                    <th><p class="label-container">{{vm.isBarcodeSeparator?'Name':'Code'}}<span ng-if="vm.title == vm.ShippingType || vm.title == vm.PaymentTypeCategory">&nbsp;*</span><check-unique-on-blur></check-unique-on-blur></p></th>
                    <td>
                      <md-input-container>
                        <input type="text" name="gencCategoryCode" id="gencCategoryCode" custom-blur="vm.checkGenericCategoryAlreadyExists()" capitalize ng-model="vm.gencCategoryCode"
                               placeholder="Code" ng-maxlength="50" md-maxlength="50" allow-special-char-with-strict ng-required="{{vm.title == vm.ShippingType || vm.title == vm.PaymentTypeCategory ? true: false}}">
                        <div ng-messages="vm.otherPermissionForm.gencCategoryCode.$error"
                             role="alert">
                          <div ng-message="required">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                          </div>
                          <div ng-message="maxlength">
                            <span>{{vm.getMaxLengthValidation(50, vm.otherPermissionForm.gencCategoryCode.$viewValue.length)}}</span>
                          </div>
                        </div>
                      </md-input-container>
                    </td>
                    <th ng-if="vm.headerTitle == vm.paymentterm">
                      <p class="margin-bottom-0 label-container" layout-align="start start" layout="row">Terms Days<span>&nbsp;*</span></p>
                    </th>
                    <td ng-if="vm.headerTitle == vm.paymentterm">
                      <div layout="row">
                        <md-input-container>
                          <input type="number" name="termday" onkeypress="return OnlyNumeric(event)"
                                 min="1" ng-model="vm.termDay"
                                 ng-disabled="vm.isEOM"
                                 placeholder="Terms Days" ng-max="999999999" step="1" required>
                          <div ng-messages="vm.otherPermissionForm.termday.$error"
                               role="alert">
                            <div ng-message="required">
                              <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                            </div>
                            <div ng-message="min || number || step || max">
                              <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                            </div>
                          </div>
                        </md-input-container>
                        <md-checkbox ng-model="vm.isEOM" name="isEOM"
                                     ng-change="vm.onEOMChange()"
                                     class="margin-top-5imp margin-left-10 margin-right-10 cm-checkbox">
                          EOM
                        </md-checkbox>
                      </div>
                    </td>
                    <th ng-if="vm.headerTitle == vm.payablePaymentMethod || vm.headerTitle == vm.receivablePaymentMethod">
                      <p class="margin-bottom-0 label-container" layout-align="start start" layout="row">
                        <a class="cm-text-decoration underline" ng-click="vm.goToPaymentTypeCategoryList();" tabindex="-1">{{vm.autoCompletePaymentTypeCategory.placeholderName}}</a><span>&nbsp;*</span>
                      </p>
                    </th>
                    <td ng-if="vm.autoCompletePaymentTypeCategory && (vm.headerTitle == vm.payablePaymentMethod || vm.headerTitle == vm.receivablePaymentMethod)">
                      <div layout="row">
                        <md-input-container class="autocompletecustom" flex="100">
                          <custom-auto-complete datalist="vm.paymentTypeCategoryList"
                                                column-name="vm.autoCompletePaymentTypeCategory.columnName"
                                                controller-name="vm.autoCompletePaymentTypeCategory.controllerName"
                                                view-template-url="vm.autoCompletePaymentTypeCategory.viewTemplateURL"
                                                key-column-name="vm.autoCompletePaymentTypeCategory.keyColumnName"
                                                input-name="vm.autoCompletePaymentTypeCategory.inputName"
                                                placeholder-name="vm.autoCompletePaymentTypeCategory.placeholderName"
                                                key-column-id="vm.autoCompletePaymentTypeCategory.keyColumnId"
                                                is-required="vm.autoCompletePaymentTypeCategory.isRequired"
                                                is-addnew="vm.autoCompletePaymentTypeCategory.isAddnew"
                                                add-data="vm.autoCompletePaymentTypeCategory.addData"
                                                callback-fn="vm.autoCompletePaymentTypeCategory.callbackFn">
                          </custom-auto-complete>
                        </md-input-container>
                      </div>
                    </td>
                    <th ng-if="vm.categoryType.categoryTypeID===vm.ShippingTypeID && vm.autoCompleteCarriers">
                      <p class="label-container">
                        <a class="cm-text-decoration underline" ng-click="vm.goTocarrierList();" tabindex="-1">{{vm.autoCompleteCarriers.placeholderName}}</a>
                        <span>&nbsp;*</span>
                      </p>
                    </th>
                    <td ng-if="vm.categoryType.categoryTypeID===vm.ShippingTypeID && vm.autoCompleteCarriers">
                      <md-input-container class="autocompletecustom" flex="100">
                        <custom-auto-complete datalist="vm.carrierlist"
                                              column-name="vm.autoCompleteCarriers.columnName"
                                              controller-name="vm.autoCompleteCarriers.controllerName"
                                              view-template-url="vm.autoCompleteCarriers.viewTemplateURL"
                                              key-column-name="vm.autoCompleteCarriers.keyColumnName"
                                              input-name="vm.autoCompleteCarriers.inputName"
                                              placeholder-name="vm.autoCompleteCarriers.placeholderName"
                                              key-column-id="vm.autoCompleteCarriers.keyColumnId"
                                              is-required="vm.autoCompleteCarriers.isRequired"
                                              is-addnew="vm.autoCompleteCarriers.isAddnew"
                                              add-data="vm.autoCompleteCarriers.addData"
                                              callback-fn="vm.autoCompleteCarriers.callbackFn"
                                              input-id="vm.autoCompleteCarriers.inputId">
                        </custom-auto-complete>
                      </md-input-container>
                    </td>
                  </tr>
                  <tr ng-if="vm.headerTitle == vm.payablePaymentMethod">
                    <th ng-if="vm.autoCompleteBank">
                      <p class="margin-bottom-0 label-container underline" layout-align="start start" layout="row">
                        <a class="cm-text-decoration underline" ng-click="vm.goToBankList();" tabindex="-1">{{vm.autoCompleteBank.placeholderName}}</a><span>&nbsp;*</span>
                      </p>
                    </th>
                    <td ng-if="vm.autoCompleteBank">
                      <md-input-container class="autocompletecustom" flex="100">
                        <custom-auto-complete datalist="vm.bankList"
                                              column-name="vm.autoCompleteBank.columnName"
                                              controller-name="vm.autoCompleteBank.controllerName"
                                              view-template-url="vm.autoCompleteBank.viewTemplateURL"
                                              key-column-name="vm.autoCompleteBank.keyColumnName"
                                              input-name="vm.autoCompleteBank.inputName"
                                              placeholder-name="vm.autoCompleteBank.placeholderName"
                                              key-column-id="vm.autoCompleteBank.keyColumnId"
                                              is-required="vm.autoCompleteBank.isRequired"
                                              is-addnew="vm.autoCompleteBank.isAddnew"
                                              add-data="vm.autoCompleteBank.addData"
                                              callback-fn="vm.autoCompleteBank.callbackFn">
                        </custom-auto-complete>
                      </md-input-container>
                    </td>

                  </tr>
                  <tr ng-if="vm.categoryType.categoryTypeID === vm.ReportCategoryID || vm.headerTitle == vm.payablePaymentMethod || vm.headerTitle == vm.receivablePaymentMethod">
                    <th>
                      <p class="label-container">
                        Description
                      </p>
                    </th>
                    <td colspan="3">
                      <md-input-container class="autocompletecustom" flex="100">
                        <textarea type="text" name="description" ng-model="vm.description" placeholder="Description" rows="3" max-rows="4" ng-maxlength="vm.descriptionMaxLength" md-maxlength="vm.descriptionMaxLength"></textarea>

                        <div ng-messages="vm.otherPermissionForm.description.$error"
                             role="alert">
                          <div ng-message="maxlength">
                            <span>{{vm.getMaxLengthValidation(vm.descriptionMaxLength,vm.otherPermissionForm.description.$viewValue.length)}}</span>
                          </div>
                        </div>
                      </md-input-container>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div ng-if="vm.categoryType.categoryType == vm.HomeCategory" id="generic-category-list-in-pop-up-form" class="page-layout carded fullwidth breadcrumb-fixed" flex="100" layout="row" cg-busy="{promise:vm.cgBusyLoading}">
          <div class="content-card" layout="column" flex="100">
            <div layout="row" flex="100">
              <div flex="100">
                <div layout="row" flex layout-md="column" layout-sm="column" ng-show="!vm.isNoDataFound">
                  <div class="input-wrapper">
                    <div layout="row">
                      <p class="label-container margin-left-4">Search</p>
                      <md-radio-group layout="row" ng-model="vm.allGenericCategoryModel.searchType">
                        <md-radio-button ng-value="vm.CustomSearchTypeForList.Contains" class="md-primary margin-top-0">Contains</md-radio-button>
                        <md-radio-button ng-value="vm.CustomSearchTypeForList.Exact" class="md-primary margin-right-10 margin-top-0">Exact</md-radio-button>
                      </md-radio-group>
                    </div>
                  </div>
                  <div layout="row" flex>
                    <div layout="row" class="input-wrapper" flex>
                      <md-input-container class="margin-bottom-0 md-block margin-right-10" flex="100" md-no-float>
                        <input type="text" name="search" ng-model="vm.allGenericCategoryModel.searchText"
                               placeholder="Type here to search" maxlength="100" ng-change="vm.SearchCategory(false)"
                               ng-model-options="{debounce: vm.debounceTime }">
                      </md-input-container>
                    </div>
                    <div>
                      <md-button class="md-primary md-raised margin-left-5-imp margin-right-8" ng-click="vm.SearchCategory(true);"
                                 aria-label="Reset">Reset</md-button>
                    </div>
                  </div>
                </div>
                <md-card layout="column" flex layout-align="space-between stretch" ng-show="!vm.isNoDataFound">
                  <ui-grid-extention class="cm-generic-cat-grid"
                                     load-data="vm.loadData"
                                     grid-option="vm.gridOptions"
                                     header="vm.sourceHeader"
                                     grid-data="vm.sourceData"
                                     total-data-count="vm.totalSourceDataCount"
                                     reset-grid="vm.resetSourceGrid"
                                     paging-info="vm.pagingInfo"
                                     current-item="vm.currentdata"
                                     empty-state="vm.emptyState"
                                     get-data-down="vm.getDataDown">
                </md-card>
                <div flex="100" class="empty-state text-center" layout="row" layout-align="center center" layout-wrap ng-show="vm.isNoDataFound">
                  <div class="emty-icon" flex="100">
                    <img ng-src="{{vm.imageUrl}}" />
                  </div>
                  <p flex="100" class="empty-state-title">{{vm.emptyStateMessageForList}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </md-content>
    </md-dialog-content>

    <md-dialog-actions layout="row">
      <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
      <md-button class="md-primary md-raised" ng-click="vm.AddgenCategory(true, vm.BUTTON_TYPE.SAVE)" ng-class="{'md-formdirty': vm.otherPermissionForm.$dirty }" aria-label="Submit">Save</md-button>
      <md-button class="md-primary md-raised" ng-click="vm.AddgenCategory(true, vm.BUTTON_TYPE.SAVEANDEXIT)" aria-label="Submit" ng-class="{'md-formdirty': vm.otherPermissionForm.$dirty }" data-focusButton="headerAddBtn" last-element elementcondition="true">{{vm.CORE_MESSAGE_CONSTANT.SAVE_AND_EXIT}}</md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
