<div id="forms" class="page-layout simple fullwidth doc-page breadcrumb-fixed cm-custom-label-common" layout="column" cg-busy="{promise:vm.cgBusyLoading}">
  <div class="header" layout="row" layout-align="space-between center">
    <div class="white-fg" layout="column" layout-align="start start">
      <div class="h2" layout="row" layout-align="start center">
        <!--<md-icon md-font-icon="icon-format-float-right"></md-icon>&nbsp;
        <span class="header-title">Page Rights</span>-->
        <pagetitle is-list="true" is-display-menu-name="true"></pagetitle>
      </div>
      <div layout="row" layout-align="start center">
        <breadcrumbs></breadcrumbs>
      </div>
    </div>
    <div>
      <md-button class="md-raised md-primary" ng-click="vm.savePermision()"
                 ng-class="{'md-formdirty': vm.isRightChange || vm.isFeatureChange || vm.isStandardChange || vm.isDbViewDataSourceChange}">
        Save
      </md-button>
    </div>
  </div>
  <div class="content-card padding-top-side" layout="column" flex>
    <form name="vm.pagerightForm" novalidate class="md-inline-form">
      <md-content class="padding-10">
        <div layout="row" layout-align="space-between center" class="padding-bottom-10" flex="100">
          <div layout="row" class="layout-wrap-mob">
            <div flex="100">
              <div class="" flex="100" layout="row">
                <md-radio-group class="margin-0" layout="row" ng-model="vm.settingtype" ng-change="vm.changetype(page)" name="radioActive">
                  <md-radio-button class="margin-top-0" ng-value="false">Role</md-radio-button>
                  <md-radio-button class="margin-top-0" ng-value="true">User</md-radio-button>
                </md-radio-group>
              </div>
            </div>
            <div ng-if="!vm.type" class="margin-left-10">
              <md-input-container ng-if="vm.autoCompleteRoles" class="autocompletecustom" flex-xs="100">
                <custom-auto-complete datalist="vm.roles"
                                      column-name="vm.autoCompleteRoles.columnName"
                                      key-column-name="vm.autoCompleteRoles.keyColumnName"
                                      input-name="vm.autoCompleteRoles.inputName"
                                      placeholder-name="vm.autoCompleteRoles.placeholderName"
                                      key-column-id="vm.autoCompleteRoles.keyColumnId"
                                      is-required="vm.autoCompleteRoles.isRequired"
                                      is-addnew="vm.autoCompleteRoles.isAddnew"
                                      is-disabled="vm.disableAutocomplete"
                                      callback-fn="vm.autoCompleteRoles.callbackFn"
                                      on-select-callback-fn="vm.autoCompleteRoles.onSelectCallbackFn"
                                      custom-auto-focus="{{true}}">
                </custom-auto-complete>
              </md-input-container>
            </div>
            <div ng-if="vm.type" class="margin-left-10">
              <md-input-container ng-if="vm.autoCompleteUser" class="autocompletecustom" flex-xs="100">
                <custom-auto-complete datalist="vm.userList"
                                      column-name="vm.autoCompleteUser.columnName"
                                      key-column-name="vm.autoCompleteUser.keyColumnName"
                                      input-name="vm.autoCompleteUser.inputName"
                                      placeholder-name="vm.autoCompleteUser.placeholderName"
                                      key-column-id="vm.autoCompleteUser.keyColumnId"
                                      is-required="vm.autoCompleteUser.isRequired"
                                      is-addnew="vm.autoCompleteUser.isAddnew"
                                      is-disabled="vm.disableAutocomplete"
                                      on-select-callback-fn="vm.autoCompleteUser.onSelectCallbackFn"
                                      callback-fn="vm.autoCompleteUser.callbackFn">
                </custom-auto-complete>
              </md-input-container>
            </div>
            <div ng-if="!vm.type">
              <md-button class="md-raised md-primary mv-0 margin-right-0" ng-click="vm.AssignToRole();">
                Assign To Role
              </md-button>
            </div>
            <div ng-if="vm.type">
              <md-button class="md-raised md-primary mv-0 margin-right-0" ng-click="vm.AssignToUser();">
                Assign To User
              </md-button>
            </div>
          </div>
        </div>
        <div flex="100" ng-if="!vm.type">
          <div ng-if="vm.roleID>0 && vm.roles.length > 0" class="cm-page-rights-page-grid">
            <!--<role-page-rights role-id="vm.roleID" page-name="vm.pageRole" is-right-change="vm.isRightChange"
                    is-feature-change="vm.isFeatureChange" is-standard-change="vm.isStandardChange"
                    is-db-view-data-source-change="vm.isDbViewDataSourceChange"></role-page-rights>-->
            <role-page-rights-new role-id="vm.roleID" page-name="vm.pageRole" is-right-change="vm.isRightChange"
                                  is-feature-change="vm.isFeatureChange" is-role-change="vm.isRoleChange" is-standard-change="vm.isStandardChange"
                                  is-db-view-data-source-change="vm.isDbViewDataSourceChange"></role-page-rights-new>
          </div>
          <div class="empty-state text-center full-height" layout="row" layout-align="center center" flex="100" layout-wrap ng-if="!vm.roleID">
            <div class="emty-icon" flex="100">
              <img ng-src="{{vm.EmptyMessage.ROLE_IMAGEURL}}" />
            </div>
            <p flex="100" class="empty-state-title">{{vm.EmptyMessage.ROLE_MESSAGE}}</p>
          </div>
        </div>
        <div ng-if="vm.type" class="padding-top-10" flex="100">
          <div class="page-rights-section" ng-if="vm.uid>0 && vm.roles.length > 0">
            <!--<role-page-rights user-id="vm.uid" employee-id="vm.employeeId" page-name="vm.pageUser"
                    is-right-change="vm.isRightChange" is-feature-change="vm.isFeatureChange"
                    is-db-view-data-source-change="false"></role-page-rights>-->
            <role-page-rights-new user-id="vm.uid" identity-user-id="vm.identityUserId" employee-id="vm.employeeId" page-name="vm.pageUser"
                                  is-right-change="vm.isRightChange" is-feature-change="vm.isFeatureChange" is-role-change="vm.isRoleChange"
                                  is-db-view-data-source-change="false" employee-name="vm.employeeName"></role-page-rights-new>
          </div>
          <div class="empty-state text-center full-height" layout="row" layout-align="center center" flex="100" layout-wrap ng-if="!vm.uid">
            <div class="emty-icon" flex="100">
              <img ng-src="{{vm.EmptyMessage.USER_IMAGEURL}}" />
            </div>
            <p flex="100" class="empty-state-title">{{vm.EmptyMessage.USER_MESSAGE}}</p>
          </div>
        </div>

      </md-content>
    </form>
  </div>
</div>
