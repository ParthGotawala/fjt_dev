<md-dialog aria-label="partDynamicAttribute" cg-busy="{promise:vm.cgBusyLoading}" flex="40" flex-lg="50" draggable class="cm-manage-part-dy-at">
    <form name="vm.partAttributeForm" novalidate>
        <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
        <md-toolbar>
            <div class="md-toolbar-tools" layout="row" layout-align="space-between center">
                <h2>{{vm.partDynamicAttributeModel.id? 'Update' : 'Add'}} Part Operational Attribute</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="vm.cancel()">
                    <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
                </md-button>
            </div>
        </md-toolbar>

        <md-dialog-content class="customer-modal no-padding custom-scroll cm-custom-label-common md-inline-form">

            <md-content class="md-padding">
                <div layout="row" class="padding-10 pr-5-imp">
                    <div flex="40">
                        <div layout="column" layout-gt-xs="row" flex class="pastewrapper">
                            <div flex="100" class="drop-box image">
                                <img class="img img-no-drag" ng-src="{{vm.imagefile}}" id="flagImage" />
                            </div>
                        </div>
                        <div class="image-list" layout="row" flex="100">
                            <div class="images padding-left-10 padding-right-10" layout="row" flex="100">
                                <div flex="50"
                                     ngf-drop="vm.cropImage($file,$event)"
                                     name="flagImage"
                                     ngf-select="vm.cropImage($file,$event)"
                                     ng-model="vm.partDynamicAttributeModel.icon"
                                     ngf-drag-over-class="'dragover'"
                                     accept="image/*"
                                     ngf-pattern="'image/*'">
                                    <md-button class="md-primary float-left md-raised mv-0 margin-0  width-100p" flex="90">
                                        Add
                                    </md-button>
                                </div>
                                <div flex="50"
                                     class="editdelete deletelocation" ng-class="{ topoption:true }"
                                     ng-if="vm.originalFileName || vm.croppedImage">
                                    <md-button class="md-primary float-right md-raised mv-0 margin-0 width-100p" ng-click="vm.deleteImage()" flex="90">
                                        Remove
                                    </md-button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="cm-section-main border-0" flex="60">
                        <div class="cm-section-inner">
                            <table class="cm-table-input-main">
                                <tbody>
                                    <tr>
                                        <th></th>
                                        <td>
                                            <div class="" layout-align="end center" flex="100" layout="row">
                                                <md-radio-group class="margin-0" layout="row" layout-align="start start" layout-wrap
                                                                name="isActive" ng-model="vm.partDynamicAttributeModel.isActive">
                                                    <md-radio-button ng-repeat="item in vm.RadioGroup.isActive.array"
                                                                     name="{{item.Value}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                                                </md-radio-group>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th><p class="label-container">Attribute Name<span>&nbsp;*<check-unique-on-blur></check-unique-on-blur></span></p></th>
                                        <td>
                                            <md-input-container class="md-block" flex="100">
                                                <input type="text" name="attributeName" id="attributeName" ng-model="vm.partDynamicAttributeModel.attributeName" custom-blur="vm.checkNameUnique(vm.partDynamicAttributeModel.attributeName,true);"
                                                       placeholder="Name" required md-autofocus ng-maxlength="255">
                                                <div ng-messages="vm.partAttributeForm.attributeName.$error" role="alert">
                                                    <div ng-message="required">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                    </div>
                                                    <div ng-message="maxlength">
                                                        <span>{{vm.getMaxLengthValidation(255,vm.partAttributeForm.attributeName.$viewValue.length)}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            <p class="label-container">
                                                Data Type<span>&nbsp;*</span>
                                            </p>
                                        </th>
                                        <td>
                                            <md-input-container class="autocompletecustom cm-custom-autocomplete margin-0" flex="100">
                                                <custom-auto-complete datalist="vm.attributeTypeList"
                                                                      column-name="vm.autoCompleteAttributeType.columnName"
                                                                      key-column-name="vm.autoCompleteAttributeType.keyColumnName"
                                                                      input-name="vm.autoCompleteAttributeType.inputName"
                                                                      placeholder-name="vm.autoCompleteAttributeType.placeholderName"
                                                                      key-column-id="vm.autoCompleteAttributeType.keyColumnId"
                                                                      is-required="vm.autoCompleteAttributeType.isRequired"
                                                                      is-disabled="vm.partDynamicAttributeModel.id"
                                                                      is-refresh-disabled="true"
                                                                      on-select-callback-fn="vm.autoCompleteAttributeType.onSelectCallbackFn">
                                                </custom-auto-complete>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th><p class="label-container">Default Value<span ng-if="vm.partDynamicAttributeModel.fieldType == vm.attributeTypeList[0].fieldType">&nbsp;*</span></p></th>
                                        <td>
                                            <md-input-container class="autocompletecustom cm-custom-autocomplete margin-0" flex="100" ng-if="vm.autoCompleteBoolValue && vm.partDynamicAttributeModel.fieldType == vm.attributeTypeList[0].fieldType">
                                                <custom-auto-complete datalist="vm.boolValueList"
                                                                      column-name="vm.autoCompleteBoolValue.columnName"
                                                                      key-column-name="vm.autoCompleteBoolValue.keyColumnName"
                                                                      input-name="vm.autoCompleteBoolValue.inputName"
                                                                      placeholder-name="vm.autoCompleteBoolValue.placeholderName"
                                                                      key-column-id="vm.autoCompleteBoolValue.keyColumnId"
                                                                      is-required="vm.autoCompleteBoolValue.isRequired"
                                                                      is-disabled="false"
                                                                      is-refresh-disabled="true"
                                                                      on-select-callback-fn="vm.autoCompleteBoolValue.onSelectCallbackFn">
                                                </custom-auto-complete>
                                            </md-input-container>
                                            <md-input-container class="md-block" flex="100" ng-if="vm.partDynamicAttributeModel.fieldType == vm.attributeTypeList[1].fieldType" md-no-float>
                                                <input type="number" max="999999.9999" name="defaultValue" input-number-decimal-place
                                                       ng-model="vm.partDynamicAttributeModel.defaultValue" placeholder="Default Value">
                                                <div ng-messages="vm.partAttributeForm.defaultValue.$error" md-auto-hide="false" role="alert">
                                                    <div ng-message="number || max || maxlength">
                                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container class="md-block" flex="100" ng-if="vm.partDynamicAttributeModel.fieldType == vm.attributeTypeList[2].fieldType">
                                                <input type="text" name="defaultValue" ng-model="vm.partDynamicAttributeModel.defaultValue"
                                                       placeholder="Default Value" ng-maxlength="200">
                                                <div ng-messages="vm.partAttributeForm.defaultValue.$error" role="alert">
                                                    <div ng-message="maxlength">
                                                        <span>{{vm.getMaxLengthValidation(200,vm.partAttributeForm.defaultValue.$viewValue.length)}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container class="md-block" flex="100" ng-if="vm.partDynamicAttributeModel.fieldType == vm.attributeTypeList[3].fieldType">
                                                <input type="text"
                                                       class="float-left"
                                                       name="eolDate"
                                                       ui-mask="{{$root.uimaskFormat.date.mask}}"
                                                       ui-mask-placeholder="{{$root.uimaskFormat.date.placeholder}}"
                                                       datetime-picker="{{$root.dateDisplayFormat}}"
                                                       enable-time="false"
                                                       ng-model="vm.partDynamicAttributeModel.defaultValue"
                                                       ng-change="vm.valueDateChanged()"
                                                       datepicker-options="vm.valueDateOptions"
                                                       ui-options="{clearOnBlur  : true}"
                                                       model-view-value="true"
                                                       is-open="vm.valueDateOptions.valueDateOpenFlag" />
                                                <md-icon md-font-icon="icon-calendar calender-icon"
                                                         ng-click="vm.valueDateOptions.valueDateOpenFlag = true">
                                                </md-icon>
                                            </md-input-container>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            <p class="label-container">Description</p>
                                        </th>
                                        <td>
                                            <md-input-container class="md-block" flex="100">
                                                <input type="text" name="description" ng-model="vm.partDynamicAttributeModel.description"
                                                       placeholder="Description" ng-maxlength="2000">
                                                <div ng-messages="vm.partAttributeForm.description.$error" role="alert">
                                                    <div ng-message="maxlength">
                                                        <span>{{vm.getMaxLengthValidation(2000,vm.partAttributeForm.description.$viewValue.length)}}</span>
                                                    </div>
                                                </div>
                                            </md-input-container>
                                            <span class="font-size-10"><b>Note:This description will be shown as tool-tip icon where this icon is display.</b></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </md-content>

        </md-dialog-content>

        <md-dialog-actions layout="row">
            <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
            <md-button class="md-primary md-raised" ng-click="vm.savePartDynamicAttribute($event)" aria-label="Submit" ng-class="{'md-formdirty': vm.partAttributeForm.$dirty || vm.checkDirty}">Save</md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
<style>    
    .md-virtual-repeat-container.md-autocomplete-suggestions-container {
        max-height: 160px !important;
    }
</style>
