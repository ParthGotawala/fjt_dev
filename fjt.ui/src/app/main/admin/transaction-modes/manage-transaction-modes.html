<div id="Manage Transaction Modes" class="page-layout simple fullwidth doc-page breadcrumb-fixed cm-custom-label-common"
     layout="row" cg-busy="{promise:vm.cgBusyLoading}" autocomplete="off">
  <ms-form-wizard flex layout="row" novalidate>
    <div class="header md-accent-bg" layout="row" layout-align="space-between center">
      <div flex layout="row" layout-align="start center">
        <md-button class="goto-products-button md-icon-button cm-back-btn-p-m" type="button" aria-label="Go to GenericCategorylist" ng-click="vm.goBack(msWizard)">
          <md-icon md-font-icon="icons-backarrow" class="material-icons icons-backarrow cm-back-btn">
          </md-icon>
        </md-button>
        <div class="white-fg" layout="row" layout-align="start center">
          <div>
            <div class="equipment-workstation-title">
              <pagetitle is-list="false" is-display-menu-name="true" prefix-content="vm.transactionModeId ? 'Update' : 'Add'" suffix-content="vm.getTitleTooltipName()"></pagetitle>
              <md-tooltip ng-if="vm.transactionModeId && vm.manageTransactionMode.modeName" md-direction="right">{{vm.getTitleTooltipName()}}</md-tooltip>
            </div>
            <div layout="row" layout-align="start center" class="product-count">
              <breadcrumbs></breadcrumbs>
            </div>
          </div>
          <div class="cm-header-search-add-container">
            <div>
              <md-input-container ng-if="vm.autoCompleteTransactionModeList" class="width-100p autocompletecustom margin-0 widget-dashboard-search-area cm-kit-allocation-so-autocomplete part-header-search-area">
                <custom-auto-complete-search on-search-fn="vm.autoCompleteTransactionModeList.onSearchFn"
                                             column-name="vm.autoCompleteTransactionModeList.columnName"
                                             key-column-name="vm.autoCompleteTransactionModeList.keyColumnName"
                                             key-column-id="vm.autoCompleteTransactionModeList.keyColumnId"
                                             input-name="vm.autoCompleteTransactionModeList.inputName"
                                             placeholder-name="vm.autoCompleteTransactionModeList.placeholderName"
                                             is-required="vm.autoCompleteTransactionModeList.isRequired"
                                             is-addnew="vm.autoCompleteTransactionModeList.isAddnew"
                                             callback-fn="vm.autoCompleteTransactionModeList.callbackFn"
                                             callback-fn-param="msWizard"
                                             on-select-callback-fn="vm.autoCompleteTransactionModeList.onSelectCallbackFn">
                </custom-auto-complete-search>
              </md-input-container>
            </div>
            <div>
              <div class="cm-square-icon-btn pt-2">
                <md-button class="md-icon-button mv-0-imp margin-right-5-imp md-primary md-raised" ng-if="vm.transactionModeId" ng-click="vm.addUpdateTransactionMode(null,false)">
                  <md-icon md-font-icon="{{vm.selectedTab.IconName}} add-icon" class="material-icons"></md-icon>
                  <md-tooltip>Add {{vm.selectedTab.addButtonLabel }} In New Tab</md-tooltip>
                </md-button>
                <md-button class="md-icon-button mv-0-imp margin-right-5-imp md-primary md-raised" ng-if="vm.transactionModeId" ng-click="vm.addUpdateTransactionMode(null,true)">
                  <md-icon md-font-icon="{{vm.selectedTab.IconName}} add-icon same-tab-icon" class="material-icons"></md-icon>
                  <md-tooltip>Add {{vm.selectedTab.addButtonLabel }}</md-tooltip>
                </md-button>
              </div>
            </div>
          </div>
        </div>
        <div layout="row">
          <div layout="row" flex="100" layout-wrap>
            <div flex layout="row" layout-wrap>
              <div flex="100" layout-wrap>
                <table cellspacing="0" cellpadding="0" class="cm-header-data-table cm-so-header-data-table">
                  <tbody>
                    <tr>
                      <th>
                        <a class="cursor-pointer text-underline" ng-click="vm.goToTransactionModesList(false);">
                          Name:
                        </a>
                      </th>
                      <td>
                        <span class="cm-data">
                          <md-tooltip ng-if="vm.manageTransactionMode.modeName">
                            {{vm.manageTransactionMode.modeName}}
                          </md-tooltip>
                          <b ng-if="vm.manageTransactionMode.modeName">{{vm.manageTransactionMode.modeName}}</b>
                          <b ng-if="!vm.manageTransactionMode.modeName">-</b>
                        </span>
                        <copy-text ng-if="vm.manageTransactionMode.modeName" label="'Name:'"
                                   text="vm.manageTransactionMode.modeName"></copy-text>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div layout="row" class="input-wrapper" flex layout-wrap layout-align="end-center">
          <md-button class="md-raised md-primary" id="saveTransModeBtn"
                     ng-disabled="vm.saveBtnFlag"
                     ng-class="{'md-formdirty': vm.manageTransactionModeForm.$dirty}"
                     ng-click="vm.SaveTransactionMode()">
            Save
          </md-button>
        </div>
      </div>
    </div>

    <div class="content-card padding-top-side" layout="row" flex="100">
      <div layout="row" flex="100">
        <div flex>
          <md-tabs class="fielddetail padding-0" md-dynamic-height
                   md-selected="msWizard.selectedIndex" id="manage-trnasactionmode-tabing">
            <md-tab md-on-select="vm.onTabChanges(null,msWizard)">
              <md-tab-label>
                <span class="ms-form-wizard-step-label">
                  <span class="ms-form-wizard-step-number md-accent-bg"
                        ng-if="vm.manageTransactionModeForm.$invalid">1</span>
                  <span class="ms-form-wizard-step-number md-accent-bg" ng-if="vm.manageTransactionModeForm.$valid">
                    <i class="icon-check s16"></i>
                  </span>
                  <span class="ms-form-wizard-step-text">Details</span>
                </span>
              </md-tab-label>
              <md-tab-body>
                <form name="vm.manageTransactionModeForm" class="md-inline-form padding-10-imp" ms-form-wizard-form novalidate>
                  <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
                  <div layout="row" flex="100" class="layout-wrap-rs cm-section-main border-0">
                    <div flex="85" layout="row">
                      <div class="input-wrapper margin-right-5" flex layout="row">
                        <p class="label-container width-135">Name<span ng-if="!vm.disabledSystemGenerated">&nbsp;*<check-unique-on-blur></check-unique-on-blur></span></p>
                        <md-input-container flex="100">
                          <input type="text" name="modeName" id="modeName" ng-model="vm.manageTransactionMode.modeName"
                                 placeholder="Name" ng-maxlength="100" md-maxlength="100"
                                 required
                                 custom-blur="vm.checkTransactionModeAlreadyExists(true)"
                                 custom-auto-focus="{{msWizard.selectedIndex === 0 ? true : false}}"
                                 ng-disabled="vm.disabledSystemGenerated">

                          <div ng-messages="vm.manageTransactionModeForm.modeName.$error"
                               role="alert">
                            <div ng-message="required">
                              <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                            </div>
                            <div ng-message="maxlength">
                              <span>{{vm.getMaxLengthValidation(100,vm.manageTransactionModeForm.modeName.$viewValue.length)}}</span>
                            </div>
                          </div>
                        </md-input-container>
                      </div>

                      <div class="input-wrapper margin-right-5" flex layout="row">
                        <p class="label-container">Code <span ng-if="!vm.disabledSystemGenerated"><check-unique-on-blur></check-unique-on-blur></span></p>
                        <md-input-container flex="100">
                          <input type="text" name="modeCode" id="modeCode" ng-model="vm.manageTransactionMode.modeCode"
                                 placeholder="Code" ng-maxlength="50" md-maxlength="50"
                                 custom-blur="vm.checkTransactionModeAlreadyExists(false)"
                                 allow-special-char-with-strict
                                 class="input-text-uppercase" capitalize
                                 ng-disabled="vm.disabledSystemGenerated">
                          <div ng-messages="vm.manageTransactionModeForm.modeCode.$error"
                               role="alert">
                            <div ng-message="maxlength">
                              <span>{{vm.getMaxLengthValidation(50, vm.manageTransactionModeForm.modeCode.$viewValue.length)}}</span>
                            </div>
                          </div>
                        </md-input-container>
                      </div>
                      <div class="input-wrapper margin-right-5" flex layout="row" ng-if="vm.autoCompleteAcctMaster">
                        <p class="label-container">
                          <a class="cm-text-decoration underline" ng-click="vm.goToChartOfAccountList();" tabindex="-1">{{vm.autoCompleteAcctMaster.placeholderName}}</a>
                        </p>
                        <md-input-container class="autocompletecustom" flex="100">
                          <custom-auto-complete-search column-name="vm.autoCompleteAcctMaster.columnName"
                                                       controller-name="vm.autoCompleteAcctMaster.controllerName"
                                                       view-template-url="vm.autoCompleteAcctMaster.viewTemplateURL"
                                                       key-column-name="vm.autoCompleteAcctMaster.keyColumnName"
                                                       input-name="vm.autoCompleteAcctMaster.inputName"
                                                       placeholder-name="vm.autoCompleteAcctMaster.placeholderName"
                                                       key-column-id="vm.autoCompleteAcctMaster.keyColumnId"
                                                       is-required="vm.autoCompleteAcctMaster.isRequired"
                                                       is-addnew="vm.autoCompleteAcctMaster.isAddnew"
                                                       add-data="vm.autoCompleteAcctMaster.addData"
                                                       callback-fn="vm.autoCompleteAcctMaster.callbackFn"
                                                       on-select-callback-fn="vm.autoCompleteAcctMaster.onSelectCallbackFn"
                                                       on-search-fn="vm.autoCompleteAcctMaster.onSearchFn"
                                                       is-disabled="vm.disabledSystemGenerated">
                          </custom-auto-complete-search>
                        </md-input-container>
                      </div>
                    </div>
                    <div flex="15" flex-sm="100" class="input-wrapper">
                      <div flex="100">
                        <md-input-container flex="100">
                          <md-radio-group layout="row" layout-align="start start" layout-wrap
                                          name="active" ng-model="vm.manageTransactionMode.isActive"
                                          ng-disabled=" vm.disabledSystemGenerated"
                                          last-element data-focusButton="saveTransModeBtn">
                            <!--<elementcondition="{{(vm.categoryType.categoryTypeID !== vm.payablePaymentMethod && vm.categoryType.categoryTypeID !== vm.receivablePaymentMethod)}}">-->
                            <md-radio-button class="margin-top-0" ng-repeat="item in vm.RadioGroup.isActive.array"
                                             name="{{item.Value}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                          </md-radio-group>
                        </md-input-container>
                      </div>
                    </div>
                  </div>
                  <div layout="row" flex="100" class="layout-wrap-rs cm-section-main border-0">
                    <div flex="100" layout="row">
                      <div class="input-wrapper margin-right-5" flex="100" layout="row">
                        <p class="label-container width-135">
                          Description
                        </p>
                        <md-input-container class="autocompletecustom" flex="100">
                          <textarea type="text" name="description" ng-model="vm.manageTransactionMode.description"
                                    placeholder="Description" rows="3" max-rows="4"
                                    ng-maxlength="vm.descriptionMaxLength"
                                    md-maxlength="vm.descriptionMaxLength"
                                    last-element data-focusButton="saveTransModeBtn"
                                    elementcondition="true"></textarea>
                          <div ng-messages="vm.manageTransactionModeForm.description.$error"
                               role="alert">
                            <div ng-message="maxlength">
                              <span>{{vm.getMaxLengthValidation(vm.descriptionMaxLength,vm.manageTransactionModeForm.description.$viewValue.length)}}</span>
                            </div>
                          </div>
                        </md-input-container>
                      </div>
                    </div>
                  </div>
                </form>
              </md-tab-body>
            </md-tab>
          </md-tabs>
        </div>
      </div>
    </div>
  </ms-form-wizard>
</div>
