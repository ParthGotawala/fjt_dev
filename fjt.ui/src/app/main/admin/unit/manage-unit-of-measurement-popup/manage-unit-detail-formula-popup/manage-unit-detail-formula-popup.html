<md-dialog aria-label="uomFormula" class="rfq_errorcode_popup_width formula-popup" cg-busy="{promise:vm.cgBusyLoading}" draggable flex="70">
    <form name="vm.ManageUDFForm">

        <md-toolbar>
            <div class="md-toolbar-tools" layout="row" layout-align="space-between center">
              <h2>{{vm.UnitDetailFormulaModel.id ? 'Update':'Save'}} Unit Formula</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="vm.cancel()">
                    <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
                </md-button>
            </div>
        </md-toolbar>

        <md-dialog-content class="customer-modal no-padding custom-scroll">
            <md-content>

                <div layout="row" flex="100" layout-wrap class="cm-custom-label-common">
                    <div layout="row" flex="100">

                        <div class="cm-section-main margin-5" flex="100">
                            <div class="cm-section-inner" flex="100">

                                <div flex="100" layout="row" layout-wrap>

                                    <div flex="50" layout="row" class="input-wrapper">
                                        <p class="label-container">From Unit</p>
                                        <md-input-container class="md-block margin-bottom-0 padding-bottom-0">
                                            <input type="text" name="unitName" ng-model="vm.unitName" placeholder="From Unit" disabled ng-maxlength="255" md-autofocus>
                                        </md-input-container>
                                    </div>

                                    <div flex="50" layout="row" class="input-wrapper">
                                        <p class="label-container">
                                            <a tabindex="-1" class="cm-text-decoration underline" ng-click="vm.goToUnitList();">{{vm.autoCompleteToUnit.placeholderName}}</a>
                                            <span>&nbsp;*</span>
                                        </p>
                                        <md-input-container ng-if="vm.autoCompleteToUnit" class="autocompletecustom cm-custom-autocomplete margin-0">
                                            <custom-auto-complete class="cm-formula-grid"
                                                                  datalist="vm.baseUnitList"
                                                                  column-name="vm.autoCompleteToUnit.columnName"
                                                                  controller-name="vm.autoCompleteToUnit.controllerName"
                                                                  view-template-url="vm.autoCompleteToUnit.viewTemplateURL"
                                                                  key-column-name="vm.autoCompleteToUnit.keyColumnName"
                                                                  input-name="vm.autoCompleteToUnit.inputName"
                                                                  placeholder-name="vm.autoCompleteToUnit.placeholderName"
                                                                  key-column-id="vm.autoCompleteToUnit.keyColumnId"
                                                                  is-required="vm.autoCompleteToUnit.isRequired"
                                                                  is-addnew="vm.autoCompleteToUnit.isAddnew"
                                                                  callback-fn="vm.autoCompleteToUnit.callbackFn"
                                                                  custom-auto-focus="{{true}}">
                                                </custom-auto-complete>
                                        </md-input-container>
                                    </div>

                                </div>
                            
                                <div flex="100" layout="row" layout-wrap>

                                    <div flex="85" layout="row" class="input-wrapper">
                                        <p class="label-container">Formula<span>&nbsp;*</span></p>
                                        <md-input-container class="md-block margin-bottom-0 padding-bottom-0">
                                            <input type="text" name="formula" ng-model="vm.UnitDetailFormulaModel.formula" placeholder="Formula" required ng-maxlength="100">
                                            <div ng-messages="vm.ManageUDFForm.formula.$error" role="alert">
                                                <div ng-message="required">
                                                    <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                                </div>
                                            </div>
                                        </md-input-container>
                                    </div>

                                    <div flex="15" layout-align="end end" layout="row" class="input-wrapper">
                                      <md-button class="md-primary md-raised margin-right-0" layout="center center" ng-click="vm.saveUnitDetailFormula()" aria-label="Submit" ng-disabled="!vm.ManageUDFForm.$valid">{{vm.UnitDetailFormulaModel.id ? 'Update':'Save'}} Formula</md-button>
                                    </div>

                                </div>

                                <div flex="100" layout="row" layout-wrap>
                                    <div layout="row" flex="100">
                                        <div flex="100" layout="row">
                                            <label class="padding-bottom-10 cm-fs-smaller">{{vm.CORE_MESSAGE_CONSTANT.UNIT_FORMULA_EXAMPLE}}</label>
                                        </div>
                                    </div>
                                </div>
                            
                            </div>
                        </div>

                    </div>
                </div>

                <div flex="100" layout="row" layout-wrap>
                    <div layout="row" flex="100">
                        <md-card layout="column" flex layout-align="space-between stretch" ng-show="!vm.isNoDataFound">
                            <ui-grid-extention load-data="vm.loadData"
                                               grid-option="vm.gridOptions"
                                               header="vm.sourceHeader"
                                               grid-data="vm.sourceData"
                                               total-data-count="vm.totalSourceDataCount"
                                               reset-grid="vm.resetSourceGrid"
                                               selectted-rows="vm.selectedRowsList"
                                               paging-info="vm.pagingInfo"
                                               current-item="vm.currentdata"
                                               get-data-down="vm.getDataDown"
                                               empty-state="vm.emptyState"
                                               delete-multiple-data="vm.deleteMultipleData"
                                               scroll-class="vm.setScrollClass">
                        </md-card>

                        <div class="empty-state text-center full-height" flex="100" layout="row" layout-align="center center" layout-wrap ng-if="vm.isNoDataFound == true">
                            <div class="emty-icon" flex="100">
                                <img ng-src="{{vm.EmptyMessageUDF.IMAGEURL}}" />
                            </div>
                            <p flex="100" class="empty-state-title">{{vm.EmptyMessageUDF.MESSAGE}}</p>
                        </div>
                    </div>
                </div>

            </md-content>
        </md-dialog-content>

        <md-dialog-actions layout="row">
            <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
