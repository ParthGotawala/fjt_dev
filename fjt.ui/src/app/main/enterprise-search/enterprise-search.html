<div id="enterprise-search" class="page-layout simple fullwidth doc-page full-height" flex layout="column" cg-busy="{promise:vm.cgBusyLoading}">
  <!-- HEADER -->
  <div class="header h-80" layout="row" flex layout-align="start center">
    <div class="white-fg" flex="100" layout="row" layout-align="space-between center">
      <div layout="row" flex>
        <div layout="row" flex>
          <div flex="100" layout="row" layout-wrap>
            <div class="h2" flex="100" layout="row" layout-align="start center">
              <pagetitle is-list="true" is-display-menu-name="true"></pagetitle>
            </div>
            <div layout="row" flex="100">
              <div class="cm-section-main ml-5 mr-5 width-100p mt-8" layout layout-align="start end">
                <div layout="row" flex>
                  <div flex="60" class="product-count">
                    <div layout="row" class="enterprise-search" layout-align="center center">
                      <md-icon class="cm-padding-left-5-imp margin-right-10 margin-top-10 icon-question-mark-circle help-icon">
                        <md-tooltip md-direction="bottom" class="cm-tooltip-table-data tooltip-height-auto pv-3">
                          <span ng-bind-html="vm.ENTERPRISE_ADVANCE_SEARCH_FORMULA_TOOLTIP"></span>
                        </md-tooltip>
                      </md-icon>
                      <input class="search-input " id="enterpriseSearchTxt" ng-model="vm.searchCriteria" type="text" placeholder="Type and press enter"
                             ng-keydown="vm.search($event)" flex>
                      <md-button ng-click="vm.clearFilter()" ng-disabled="(!vm.searchCriteria)" class="md-primary md-link-ripple cm-part-advance-filter-btn">
                        <md-icon md-font-icon="icon-close">
                          <md-tooltip ng-if="(vm.searchCriteria) ? true : false">Clear</md-tooltip>
                        </md-icon>
                      </md-button>
                    </div>
                  </div>
                  <div class="cm-ml-auto">
                    <md-button class="md-primary md-raised md-button mv-0" ng-if="(!vm.isDisplaySearchCriteria)" ng-click="vm.openAdvanceSerachPopup()">
                      Advance Search
                    </md-button>
                    <md-button class="md-primary md-raised md-button mv-0" ng-if="vm.isDisplaySearchCriteria" ng-click="vm.openAdvanceSerachPopup()">
                      Edit Search
                    </md-button>
                    <md-button class="md-primary md-raised md-button mv-0" ng-if="vm.isDisplaySearchCriteria" ng-click="vm.clearAdvanceSerachPopup()">
                      Clear Search
                    </md-button>
                  </div>
                </div>
              </div>
              <div class="white-fg" flex="35" layout="row" layout-align="space-between center">
                <div layout="row" class="enterprise-search width-100p" layout-align="center center">
                  <fieldset class="container-box ml-5 mr-5 width-100p">
                    <legend class="margin-0 white-text">Chat Message Search</legend>
                    <div layout="row">
                      <input class="search-input" id="chateSearchTxt" ng-model="vm.charSearchCriteria" type="text" placeholder="Type and press enter"
                             ng-keydown="vm.chatSearch($event)" flex>
                      <md-button ng-click="vm.clearChatFilter()" ng-disabled="(!vm.charSearchCriteria)" class="md-primary md-link-ripple cm-part-advance-filter-btn">
                        <md-icon md-font-icon="icon-close">
                          <md-tooltip ng-if="(vm.charSearchCriteria) ? true : false">Clear</md-tooltip>
                        </md-icon>
                      </md-button>
                    </div>
                  </fieldset>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- / HEADER -->
  <div layout="row" class="layout-wrap ph-4" ng-if="vm.isDisplaySearchCriteria">
    <div ng-repeat="item in vm.SearchModel">
      <div flex="100" layout="row" layout-align="start center">
        <span class="nowrap"
              ng-if="($index) >= 1">
          {{vm.CORE_OR_CONDITIONS}}
        </span>
        <div class="cm-section-main content margin-5 width-fit-content">
          <div class="cm-section-inner flex-100 layout-row margin-top-4">
            <label class="label-box label-primary layout-row mr-5 nowrap" ng-repeat="con in item.SearchCriteria">
              {{con.Condition}}: {{con.Value}}
            </label>
            <md-button class="bdrbtn cm-grid-action-view-icon md-button md-default-theme md-icon-button md-ink-ripple md-raised">
              <md-icon class="icon-trash material-icons md-default-theme md-font" ng-click="vm.removeAdvanceSerachGroup($index)">
                <md-tooltip md-direction="bottom">Remove</md-tooltip>
              </md-icon>
            </md-button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- CONTENT -->
  <div class="content padding-10-imp search-tag-section" flex ng-if="vm.AnySearchCriteria" md-background-bg layout="row" ms-scroll>
    <md-content class="content flex-25" layout="column" id="tag-section">
      <md-input-container class="width-100p cm-square-icon-btn cm-enterprise-type-search mt-0" md-no-float>
        <input type="text" id="searchTag" name="searchTag" input-number-decimal-place ng-model-options="{ debounce: 500 }"
               ng-model="vm.searchType" placeholder="Search Type">
        <md-button ng-click="vm.clearTypeFilter()" ng-disabled="(!vm.searchType)" class="md-primary md-link-ripple md-icon-button close-btn margin-0">
          <md-icon md-font-icon="icon-close">
            <md-tooltip ng-if="(vm.searchType) ? true : false">Clear</md-tooltip>
          </md-icon>
        </md-button>
      </md-input-container>
      <div class="cm-overflow-auto navigation-simple" flex>
        <md-button class="item width-100p" aria-label="All Type" ng-if="(!vm.searchType)" ng-class="{'selected':vm.showAllType}" ng-click="vm.getAllType()">
          <div layout="row" layout-align="start center">
            <md-icon md-font-icon="icon-view-headline" class="s16"></md-icon>
            <span class="title">All Type</span>
          </div>
        </md-button>
        <md-button class="tag tag-content item width-100p" aria-label="tag {{tag.label}}" ng-repeat="tag in vm.tags | filter : { key : vm.searchType}"
                   ng-click="vm.toggleTagFilter(tag)"
                   ng-class="{'selected':(!vm.showAllType && tag.selected)}">
          <span class="title">{{tag.key}}</span>
          <span class="badge white-fg ng-binding ng-scope" ng-style="{'background': node.badge.color}">{{tag.count}}</span>
        </md-button>
      </div>
    </md-content>
    <!-- DEMO CONTENT -->
    <div class="classic-tab demo-content padding-bottom-0 pl-20 padding-right-0-imp" layout="column" flex ng-if="vm.searchList.length > 0">
      <div class="result-info" layout="row" layout-align="space-between center" layout-xs="column" layout-align-xs="start start">
        <span class="result-count h3 secondary-text">
          <span>{{vm.resultCount}}</span>
          <span>Results</span>
        </span>
        <div class="pager cm-square-icon-btn" layout="row" layout-align="start center">
          <span class="secondary-text">
            <span>Showing Results: </span>
          </span>
          <span class="page-info">
            <span class="margin-left-5"> {{vm.pagination.startPosition}}</span>
            <span>-</span>
            <span>{{vm.pagination.endPosition}}</span>
            <span>of</span>
            <span>{{vm.resultCount}}</span>
          </span>
          <md-button class="md-icon-button" aria-label="previous page" ng-disabled="(vm.pagination.pageindex == 1 ? true : false)" ng-click="vm.previousPage(vm.pagination.pageindex - 1)">
            <md-icon md-font-icon="icon-chevron-left">
              <md-tooltip ng-if="(vm.pagination.pageindex == 1 ? false : true)" md-direction="bottom">Previous</md-tooltip>
            </md-icon>
          </md-button>
          <md-button class="md-icon-button" aria-label="next page" ng-disabled="(vm.pagination.pageindex == (vm.pageCount) ? true : false)" ng-click="vm.nextPage(vm.pagination.pageindex + 1)">
            <md-icon md-font-icon="icon-chevron-right">
              <md-tooltip ng-if="(vm.pagination.pageindex == (vm.pageCount) ? false : true)" md-direction="bottom">Next</md-tooltip>
            </md-icon>
          </md-button>
        </div>
      </div>
      <div class="results cm-overflow-auto" flex>
        <div class="result-item cm-result-item-es" ng-repeat="item in vm.searchList">
          <highlightsfont>
            <div class="title" ng-bind-html="item.title"></div>
          </highlightsfont>
          <div class="url"></div>
          <highlightsfont>
            <div class="excerpt cm-excerpt-es" ng-bind-html="item.content">
            </div>
          </highlightsfont>
        </div>
      </div>
      <div class="simple-pagination margin-0">
        <md-button class="pagination-item disabled" ng-disabled="(vm.pagination.pageindex == 1 ? true : false)" ng-click="vm.previousPage(vm.pagination.pageindex - 1)">
          <md-icon md-font-icon="icon-chevron-left">
            <md-tooltip ng-if="!(vm.pagination.pageindex == 1 ? true : false)" md-direction="bottom">Previous</md-tooltip>
          </md-icon>
        </md-button>
        <md-button class="pagination-item"
                   ng-if="((page.pageNumber < 1 || page.pageNumber > pageCount) ? false : true)" ng-class="{'active-page':vm.pagination.pageindex == page.pageNumber}" ng-repeat="page in vm.pagination.pageNumber"
                   ng-click="vm.pageChange(page)" md-no-ink>
          <span>{{((page.isPreviousIndex || page.isNextIndexing) ? "..."  : page.pageNumber)}}</span>
        </md-button>
        <md-button class="pagination-item" ng-disabled="(vm.pagination.pageindex == (vm.pageCount) ? true : false)" ng-click="vm.nextPage(vm.pagination.pageindex + 1)">
          <md-icon md-font-icon="icon-chevron-right">
            <md-tooltip ng-if="!(vm.pagination.pageindex == (vm.pageCount) ? true : false)" md-direction="bottom">Next</md-tooltip>
          </md-icon>
        </md-button>
      </div>
    </div>
    <div class="empty-state text-center full-height" layout="row" layout-align="center center" flex="100" layout-wrap ng-if="vm.searchList.length <= 0">
      <!--<div class="emty-icon" flex="100">
          <img ng-src="{{vm.EmptyMesssage.IMAGEURL}}" />
      </div>-->
      <p flex="100" class="empty-state-title">{{vm.EmptyMesssage.MESSAGE}}</p>
      <p flex="100">
        {{vm.EmptyMesssage.ADDNEWMESSAGE}}
      </p>
    </div>
    <!-- / DEMO CONTENT -->
  </div>
  <!-- / CONTENT -->
</div>
