<md-dialog draggable>
    <md-toolbar>
        <div class="md-toolbar-tools">
            Update Operation
            <span flex></span>
            <md-button class="md-icon-button" ng-click="vm.cancel()">
                <md-icon aria-label="Close dialog">close</md-icon>
            </md-button>
        </div>
    </md-toolbar>
    <md-dialog-content class="custom-scroll">
        <div md-theme="docs-dark" layout="column" layout-padding>
            <div layout="row" layout-align="center center" flex layout-wrap>
                <md-input-container flex="45" flex-xs="100">
                    <label>Name</label>
                    <input ng-model="vm.operation.name">
                </md-input-container>
                <span flex="10"></span>
                <md-input-container flex="45" flex-xs="100">
                    <label>{{ vm.LabelConstant.Operation.OP }}</label>
                    <input ng-model="vm.operation.number" type="text">
                </md-input-container>
                <md-input-container flex="45" flex-xs="100">
                    <label>Instruction comment</label>
                    <textarea ng-model="vm.operation.instruction" rows="2"></textarea>
                </md-input-container>
            </div>
            <div layout="row" layout-aling="center" layout-padding layout-wrap>
                <div layout="column" flex="50" flex-xs="100">
                    <div ng-repeat="item in vm.operation.operationKeyTypes" layout="row">
                        <md-input-container flex="50">
                            <label>Field</label>
                            <input ng-model="item.key" type="text" ng-change="vm.key(item)">
                        </md-input-container>
                        <md-input-container flex="50">
                            <label>Type</label>
                            <md-select placeholder="type" ng-model="item.keyType" style="min-width: 200px;">
                                <md-option ng-value="i" ng-repeat="i in vm.fieldType" ng-selected="item.keyType == i">{{i}}</md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                </div>
                <div layout="row" flex="50" flex-xs="100" layout-aling="center start" layout-wrap>
                    <div flex="100" ng-repeat="item in vm.operation.operationFiles">
                        <md-card>
                            <md-card-content>
                                <md-input-container>
                                    <input ng-model="item.heading" placeholder="Heading" ng-change="vm.multiModalFile(item,item.heading)">
                                </md-input-container>
                                <div ngf-drop="vm.uploadFiles($files, $invalidFiles)"
                                     ngf-select="vm.uploadFiles($files, $invalidFiles)"
                                     ng-model="item.imagesList"
                                     class="drop-box file document"
                                     ngf-drag-over-class="'dragover'"
                                     ngf-multiple="false"
                                     ngf-allow-dir="true"
                                     accept=".png,.jpeg,.jpg,.tif,.xlsx,.pdf,.doc"
                                     ngf-pattern="'.png,.jpeg,.jpg,.tif,.xlsx,.pdf,.doc'">
                                    <img class="imgModal" ng-if="item.fileName" ng-src="./uploads/operation/images/{{ item.fileName }}" />
                                </div>
                                <md-card-footer>
                                    {{item.originalName}}
                                </md-card-footer>
                            </md-card-content>
                        </md-card>
                    </div>
                </div>
            </div>
        </div>
    </md-dialog-content>
    <md-dialog-actions layout="row">
        <span flex></span>
        <md-button ng-click="vm.ok()" flex="15" class="md-raised md-primary md-btn">
            Save
        </md-button>
    </md-dialog-actions>
</md-dialog>
