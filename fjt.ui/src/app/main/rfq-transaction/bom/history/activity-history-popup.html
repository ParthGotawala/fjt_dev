<md-dialog aria-label="TravelelrHistory" class="traveler cm-custom-label-common" cg-busy="{promise:vm.cgBusyLoading}" draggable>
  <!--flex="60"-->
  <form name="vm.travelerForm">
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>{{vm.labelName + ' ' + 'Start Stop Activity History'}}</h2>
        <span flex></span>
        <div layout="row" layout-align="center center">
          <popup-header-label label-data="vm.headerdata"></popup-header-label>
        </div>
        <md-button class="md-icon-button" ng-click="vm.cancel()">
          <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content layout="column" class="customer-modal no-padding custom-scroll">
      <div layout="row" class="padding-top-5 ph-15" layout-wrap ng-show="vm.groupWiseUserTime.length>0">
        <div flex="40" ng-if="vm.groupWiseUserTime">
          <table md-table class="md-data-table border table-row-select traveler cm-activity-history-table" md-row-select ng-model="vm.selectedGroupWiseItems" ms-responsive-table>
            <thead md-head md-order="vm.GroupWiseQuery.order" ng-if="!(vm.groupWiseUserTime.length == 0) ">
              <tr md-row class="display-flex"><th md-column class="text-center color-black cm-activity-history-table-head" layout-align="center-center" colspan="3">{{vm.header}}</th></tr>
              <tr md-row class="border-top-md-table display-flex">
                <th md-column class="cm-activity-history-table-num">#</th>
                <th md-column class="cm-activity-history-table-user-id">User ID</th>
                <th md-column class="cm-totaltime text-center" layout-align="center-center">{{vm.LabelConstant.Traveler.Totaltime}}</th>
              </tr>
            </thead>
            <tbody md-body>
              <tr md-row ng-repeat="item in vm.groupWiseUserTime" class="display-flex">
                <td class="cm-activity-history-table-num" md-cell>{{$index+1}}</td>
                <td md-cell class="cm-activity-history-table-user-id">
                  {{item.name}}
                </td>
                <td md-cell class="text-center  cm-totaltime" layout-align="center-center">
                  {{item.totalTime}}
                </td>
              </tr>
            </tbody>
          </table>

        </div>
        <div flex="60" layout="row" layout-wrap class="border">
          <div class="cm-section-main padding-10 border-0 cm-align-self-center" flex="100">
            <div class="cm-section-inner">
              <div id="container" class="pie-chart-container" style="min-width: 310px; height: 294px; max-width: 600px; margin: 0 auto"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="padding-10 mh-5 padding-top-0" layout="column" flex>
        <div layout="row" layout-align="end end" ng-if="vm.ChildEmployeeData">
          <div layout="row" flex-xs="50" flex="30" layout-align="end-center" class="mt-10">
            <p class="label-container text-right layout-align-end-end layout-row mr-5 mt-5" layout="row" layout-align="end end" flex="30">
              Search
            </p>
            <md-input-container class="md-block search-header margin-0 error-none" flex="50">
              <input type="text" ng-model="vm.query.search" ng-model-options="{debounce: 200 }" placeholder="Search">
            </md-input-container>
            <md-button class="md-primary md-raised margin-0 margin-left-5-imp" ng-click="vm.query.search = ''">Reset</md-button>
          </div>

        </div>
        <md-content layout="column" flex>
          <div flex class="cm-sticky-header-table" ng-if="vm.ChildEmployeeData">
            <table md-table class="md-data-table border table-row-select traveler" md-row-select ng-model="vm.selectedItems">
              <thead md-head md-order="vm.query.order" ng-if="!(vm.ChildEmployeeData  | filter: vm.query.search).length == 0">
                <tr md-row>
                  <th md-column class="cm-activity-history-table-num">#</th>
                  <th md-column class="cm-activity-history-table-user-id">Transaction Type</th>
                  <th md-column class="cm-activity-history-table-user-id">Activity Type</th>
                  <th md-column class="cm-activity-history-table-user-start">Start Time</th>
                  <th md-column class="cm-activity-history-table-user-id">Started By</th>
                  <th md-column class="cm-activity-history-table-user-start-internal" ng-if="vm.transactionType !== vm.activityTransactionType[2].id">Start Internal Version</th>
                  <th md-column class="cm-activity-history-table-user-stop-internal">Stop Time</th>
                  <th md-column class="cm-activity-history-table-user-id">Stopped By</th>
                  <th md-column class="cm-activity-history-table-user-stop-internal-version" ng-if="vm.transactionType !== vm.activityTransactionType[2].id">Stop Internal Version</th>
                  <th md-column class="text-center cm-activity-history-table-total">{{vm.LabelConstant.Traveler.Totaltime}}</th>
                  <th md-column class="cm-activity-history-table-user-id">Burden Rate</th>
                  <th md-column class="cm-activity-history-table-user-id">Payment Mode</th>
                </tr>
              </thead>
              <tbody md-body>
                <tr md-row ng-repeat="item in vm.ChildEmployeeData | filter: vm.query.search">
                  <td class="cm-activity-history-table-num" md-cell>{{$index+1}}</td>
                  <td md-cell class="cm-activity-history-table-user-id">
                    {{item.transactionTypeConvertedValue}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-id">
                    {{item.activityTypeConvertedValue}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-start">
                    {{item.checkinTime}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-id">
                    {{item.startUserName}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-start-internal" ng-if="vm.transactionType !== vm.activityTransactionType[2].id">
                    {{item.checkinInternalVersion}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-stop-internal">
                    {{item.checkoutTime}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-id">
                    {{item.stopUserName}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-stop-internal-version" ng-if="vm.transactionType !== vm.activityTransactionType[2].id">
                    {{item.checkoutInternalVersion}}
                  </td>
                  <td md-cell class="text-center cm-activity-history-table-total">
                    {{item.totalTime}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-id">
                    {{item.burdenRate}}
                  </td>
                  <td md-cell class="cm-activity-history-table-user-id">
                    {{item.paymentMode}}
                  </td>
                </tr>
                <tr md-row ng-if="!(vm.ChildEmployeeData  | filter: vm.query.search).length == 0">
                  <td md-cell></td>
                  <td md-cell></td>
                  <td md-cell></td>
                  <td md-cell></td>
                  <td md-cell></td>
                  <td md-cell></td>
                  <td md-cell ng-if="vm.transactionType !== vm.activityTransactionType[2].id"></td>
                  <td md-cell ng-if="vm.transactionType !== vm.activityTransactionType[2].id"></td>
                  <td md-cell>
                    <b>{{vm.LabelConstant.Traveler.Totaltime}}</b>
                  </td>
                  <td class="text-center" md-cell>
                    <b>{{vm.getTotalTime()}}</b>
                  </td>
                  <td md-cell></td>
                  <td md-cell></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="empty-state text-center full-height" layout="row" layout-align="center center"
               layout-wrap ng-if="!vm.ChildEmployeeData">
            <div class="emty-icon" flex="100">
              <img ng-src="{{vm.EmptyMesssageInOut.IMAGEURL}}" />
            </div>
            <p flex="100" class="empty-state-title">{{vm.EmptyMesssageInOut.MESSAGE}}</p>
          </div>
          <div class="empty-state text-center full-height" layout="row" layout-align="center center"
               layout-wrap ng-if="(vm.ChildEmployeeData  | filter: vm.query.search).length == 0 ">
            <div class="emty-icon" flex="100">
              <img ng-src="{{vm.emptySearch.IMAGEURL}}" />
            </div>
            <p class="empty-state-title" flex="100">{{vm.emptySearch.MESSAGE}}</p>
          </div>
        </md-content>
      </div>
    </md-dialog-content>
    <md-dialog-actions layout="row">
      <md-button class="md-default md-raised" ng-click="vm.cancel()">OK</md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
