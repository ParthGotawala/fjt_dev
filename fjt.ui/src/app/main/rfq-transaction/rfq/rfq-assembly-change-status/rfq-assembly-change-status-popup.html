<md-dialog aria-label="Update Quote Status" class="cm-custom-label-common" flex-lg="90" cg-busy="{promise:vm.cgBusyLoading}" draggable>
  <form name="vm.QuoteStatusForm" class="md-inline-form">
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>Change Assembly Quote Status</h2>
        <span flex></span>
        <popup-header-label label-data="vm.headerdata"></popup-header-label>
        <md-button class="md-icon-button" ng-click="vm.cancel()">
          <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="customer-modal no-padding custom-scroll" layout="column">
      <md-content class="padding-10">
        <div flex="100" layout-wrap>
          <div layout="row" layout-align="end center">
            <md-button class="md-primary md-raised" ng-click="vm.ViewAssyList()" aria-label="Submit" ng-if="vm.assyList.length>0">View Assembly List</md-button>
          </div>
          <div class="cm-section-main border-0" flex="100">
            <div class="cm-section-inner">
              <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                <tbody>
                  <tr>
                    <th>
                      <p class="label-container" flex="25">Select Option<span ng-if="!vm.allowCancel">&nbsp;*</span></p>
                    </th>
                    <td style="width:20%">
                      <md-radio-group ng-model="vm.assemblyStatusModel.status" layout="row" name="ststus">
                        <md-radio-button ng-value="vm.rfqAssystatus.WON.VALUE" ng-disabled="vm.allowCancel || vm.assyList.length>0" class="md-primary margin-top-0">{{vm.rfqAssystatus.WON.NAME}}</md-radio-button>
                        <md-radio-button ng-value="vm.rfqAssystatus.LOST.VALUE" class="md-primary margin-top-0">{{vm.rfqAssystatus.LOST.NAME}}</md-radio-button>
                        <md-radio-button ng-value="vm.rfqAssystatus.CANCEL.VALUE" class="md-primary margin-top-0">{{vm.rfqAssystatus.CANCEL.NAME}}</md-radio-button>
                      </md-radio-group>
                    </td>
                    <th class="cm-padding-top-6">
                      <p ng-if="vm.assemblyStatusModel.status == vm.rfqAssystatus.WON.VALUE" class="label-container" flex="30" flex-lg="30">Win Quantity<span>&nbsp;*</span></p>
                    </th>
                    <td class="width-100">
                      <md-input-container class="md-block" flex="100" ng-if="vm.assemblyStatusModel.status == vm.rfqAssystatus.WON.VALUE">
                        <input type="number" required onkeypress="return OnlyNumeric(event)" min="1"
                               name="insertquantity" ng-model="vm.assemblyStatusModel.winQuantity" maxlength="9" />
                        <div ng-messages="vm.QuoteStatusForm.insertquantity.$error" role="alert">
                          <div ng-message="required">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                          </div>
                          <div ng-message="min">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.MIN_LENGTH}}</span>
                          </div>
                          <div ng-message="number">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                          </div>
                          <div ng-message="maxlength">
                            <span>{{vm.getMaxLengthValidation(9, vm.QuoteStatusForm.insertquantity.$viewValue.length)}}</span>
                          </div>
                        </div>
                      </md-input-container>
                    </td>
                    <th class="cm-padding-top-6">
                      <p ng-if="vm.assemblyStatusModel.status == vm.rfqAssystatus.WON.VALUE" class="label-container" flex="30" flex-lg="30">Win Price<span>&nbsp;*</span></p>
                    </th>
                    <td class="width-120">
                      <md-input-container class="input-with-usd-symbol padding-left-0-imp md-block" flex="100"
                                          ng-if="vm.assemblyStatusModel.status == vm.rfqAssystatus.WON.VALUE">
                        <md-icon md-font-icon="icon-currency-usd" class="usdicon"></md-icon>
                        <input class="cm-padding-left-17" type="number" name="winPrice" ng-model="vm.assemblyStatusModel.winPrice"
                               ng-change="vm.getMin()" step="0.000001" min="0.000000" max="99999999.999999" required onkeypress="return (event.charCode == 8 || event.charCode == 0 ||  event.charCode == 13) ? null : event.charCode >= 46 && event.charCode <= 57" onpaste="return false">
                        <div ng-messages="vm.QuoteStatusForm.winPrice.$error" role="alert">
                          <div ng-message="required">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                          </div>
                          <div ng-message="min || step || number || max">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                          </div>
                          <div ng-message="number">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                          </div>
                        </div>
                      </md-input-container>
                    </td>
                    <th>&nbsp</th>
                    <td>&nbsp</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="cm-section-main border-0" flex="100">
            <div class="cm-section-inner" flex="100">
              <md-input-container class="md-block" flex="100">
                <div layout="row" flex="100" flex-xs="100" layout-align="space-between center">
                  <div layout="column">
                    <span class="label-container margin-bottom-0" ng-style="{'color':vm.QuoteStatusForm.statusreason.$error.taMaxText?'red':''}">
                      <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToReasonList();">Reason</a>
                      <span>&nbsp;{{vm.CORE_MESSAGE_CONSTANT.MIN_LENGTH_MESSAGE}}</span><span ng-if="vm.taToolbar.REQUIRED">&nbsp;*</span>
                    </span>
                    <span class="margin-bottom-10" ng-if="vm.QuoteStatusForm.statusreason.$error.taMaxText" style="color:red; font-size:12px">{{vm.getMaxLengthValidation(vm.taToolbar.MAX_LENGTH, vm.QuoteStatusForm.statusreason.$viewValue.length)}}</span>
                  </div>
                  <div layout="row">
                    <md-button class="md-icon-button md-primary md-mini" type="button" aria-label="Show Templates" ng-click="vm.OpenReasonTemplateList(vm.QuoteStatusForm);">
                      <md-icon md-font-icon="icon-clipboard-text"></md-icon>
                      <md-tooltip md-direction="left">
                        Reason
                      </md-tooltip>
                    </md-button>
                  </div>
                </div>
                <text-angular class="RFQ-info-text-area text-angular-editor-scroll" ta-toolbar="vm.taToolbar.INLINE" cg-busy-loading="vm.cgBusyLoading"
                              ng-class="{'text-angular-custom-border':vm.QuoteStatusForm.statusreason.$error.taMaxText}"
                              ng-model="vm.assemblyStatusModel.reason"
                              name="statusreason"
                              ta-min-text="{{vm.taToolbar.MIN_LENGTH}}"
                              ng-required="{{vm.taToolbar.REQUIRED ? vm.taToolbar.REQUIRED : false}}"
                              ta-max-text="{{vm.taToolbar.MAX_LENGTH}}"></text-angular>
                <!--<div ng-messages="vm.QuoteStatusForm.statusreason.$error" role="alert">
                    <div ng-message="taMaxText">
                        <span>{{vm.getMaxLengthValidation(vm.taToolbar.MAX_LENGTH, vm.QuoteStatusForm.statusreason.$viewValue.length)}}</span>
                    </div>
                </div>-->
              </md-input-container>
            </div>
          </div>

        </div>
      </md-content>
    </md-dialog-content>
    <md-dialog-actions layout="row">
      <md-button class="md-default md-raised" ng-click="vm.cancel()">Cancel</md-button>
      <md-button class="md-primary md-raised" ng-click="vm.save()" aria-label="Submit" ng-class="{'md-formdirty': vm.checkFormDirty(vm.QuoteStatusForm)}">Save</md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
