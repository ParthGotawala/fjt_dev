<md-dialog aria-label="Void & Re-Receive Payment" class="cm-custom-label-common" cg-busy="{promise:vm.cgBusyLoading}"
           draggable flex="70">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>Refund Status List For Lock Transaction</h2>
      <span flex></span>
      <popup-header-label label-data="vm.headerdata"></popup-header-label>
      <md-button class="md-icon-button" ng-click="vm.cancel()">
        <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
      </md-button>
    </div>
  </md-toolbar>
  <md-dialog-content class="padding-10">
    <md-content>
      <div layout="row" layout-wrap flex="100" class="p-5" ng-if="vm.popupParamData && vm.popupParamData.custRefundValidatedList">
        <div layout="row" flex="100" class="font-size-15 text-bold">
          <p>Below is selected Customer Refund(s) with their status for Lock transaction.</p>
        </div>
        <div layout="row" layout-wrap flex="100" class="margin-top-10">
          <table cellspacing="0" cellpadding="0" border="1" flex="100">
            <tbody>
              <tr>
                <th class="p-5">
                  <b>#</b>
                </th>
                <th class="p-5">
                  <b>SystemID</b>
                </th>
                <th class="p-5">
                  <b>Payment# or Check#</b>
                </th>
                <th class="p-5">
                  <b>Total Detail Item Count</b>
                </th>
                <th class="p-5">
                  <b>Locked Detail Item Count</b>
                </th>
                <th class="p-5">
                  <b>Unlocked Detail Item Count</b>
                </th>
                <th class="p-5">
                  <b>Current Status</b>
                </th>
                <th class="p-5">
                  <b>Required Status</b>
                </th>
                <th class="p-5">
                  <b>Lock Allowed</b>
                </th>
              </tr>
              <tr ng-repeat="refundItem in vm.popupParamData.custRefundValidatedList">
                <td class="p-5">
                  {{$index+1}}
                </td>
                <td class="p-5">
                  <span class="value cm-text-decoration" ng-click="vm.goToCustomerRefundDetail(refundItem.custRefundMstID);">
                    {{refundItem.systemId}}
                  </span>
                </td>
                <td class="p-5">
                  <span class="value cm-text-decoration" ng-click="vm.goToCustomerRefundDetail(refundItem.custRefundMstID);">
                    {{refundItem.paymentNumber}}
                  </span>
                </td>
                <td class="p-5 text-right">
                  {{refundItem.detItemCount}}
                </td>
                <td class="p-5 text-right">
                  {{refundItem.lockedDetItemCount}}
                </td>
                <td class="p-5 text-right">
                  {{refundItem.detItemNotLockedCount}}
                </td>
                <td class="text-center">
                  <span class="p-5 label-box" ng-class="{'{{refundItem.subStatusClassName}}': refundItem.subStatusClassName}">{{refundItem.refundSubStatusName}}</span>
                </td>
                <td class="text-center">
                  <span class="p-5 label-box" ng-class="{'{{refundItem.requiredSubStatusClassName}}': refundItem.requiredSubStatusClassName}">
                    {{vm.custRefundSubStatusIDDetConst.Refunded.name}}
                  </span>
                </td>
                <td class="p-5 text-center" ng-class="{'color-red':!refundItem.isLockedAllowed}">
                  {{refundItem.lockedAllowedText}}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div layout="row" layout-wrap flex="100" class="margin-top-20">
          <p ng-bind-html="vm.resonForInvalidateRefundRecords"></p>
        </div>
      </div>
    </md-content>
  </md-dialog-content>
  <md-dialog-actions layout="row">
    <md-button class="md-default md-raised" ng-click="vm.cancel()"
               ng-if="vm.popupParamData.isAnyAllowedToLockRecord">Cancel</md-button>
    <md-button class="md-default md-raised" ng-click="vm.cancel()"
               ng-if="!vm.popupParamData.isAnyAllowedToLockRecord">Close</md-button>
    <md-button class="md-primary md-raised"
               ng-if="vm.popupParamData.isAnyAllowedToLockRecord"
               ng-click="vm.lockValidCustRefundList();" aria-label="Submit">Lock Record(s)</md-button>
  </md-dialog-actions>
</md-dialog>
