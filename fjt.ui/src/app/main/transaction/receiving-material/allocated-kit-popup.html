<md-dialog aria-label="AllocatedKit" cg-busy="{promise:vm.cgBusyLoading}" draggable flex="90">

    <md-toolbar>
        <div class="md-toolbar-tools">
            <h2>Allocated Kit</h2>
            <span flex></span>
            <popup-header-label label-data="vm.headerdata"></popup-header-label>
            <md-button class="md-icon-button" ng-click="vm.cancel()">
                <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
            </md-button>
        </div>
    </md-toolbar>

    <md-dialog-content class="customer-modal no-padding custom-scroll mh-5">
        <md-content class="padding-10">
            <div class="content fullpage-datatable cm-available-stock-table cm-allocated-kit-table" layout="column" flex>
                <md-table-container class="cm-kit-allocate-grid-scroll" layout="row" flex="100">
                    <table md-table>
                        <thead fix-head md-head md-order="vm.query.order">
                            <tr md-row>
                                <th md-column width="50">
                                    Action 
                                </th>
                                <th md-column width="50">
                                    #
                                </th>
                                <th md-column md-order-by="mfgCode">
                                    {{vm.CORE.LabelConstant.MFG.MFG}}
                                </th>
                                <th md-column md-order-by="mfgPN">
                                    {{vm.CORE.LabelConstant.MFG.MFGPN}}
                                </th>
                                <th md-column md-order-by="PIDCode">
                                    Assy ID
                                </th>
                                <th md-column md-order-by="nickName">
                                    Nickname
                                </th>
                                <th md-column md-order-by="po">
                                    PO#
                                </th>
                                <th md-column md-order-by="so">
                                    {{vm.CORE.LabelConstant.SalesOrder.SO}}
                                </th>
                                <th md-column md-order-by="totalAllocatedQty">
                                    Allocated Qty
                                </th>
                                <th md-column md-order-by="totalAllocatedUnit">
                                    Allocated Unit
                                </th>
                                <th md-column md-order-by="allocateUOMName">
                                    Allocated UOM
                                </th>
                                <th md-column md-order-by="mrpQty">
                                    MRP Qty
                                </th>
                                <th md-column md-order-by="kitQty">
                                    Kit Qty
                                </th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr md-row ng-repeat="item in vm.allocatedKitList | orderBy: vm.query.order">
                                <td md-cell>
                                    <md-button class="md-primary grid-button md-icon-button bdrbtn" ng-click="vm.deallocateFromKit(item)">
                                        <md-icon role="img" md-font-icon="icon-close"></md-icon>
                                        <md-tooltip md-direction="top">Deallocate UMID From Kit</md-tooltip>
                                    </md-button>
                                </td>
                                <td md-cell>{{$index+1}}</td>
                                <td md-cell>{{item.mfgCode}}</td>
                                <td md-cell>
                                    <common-pid-code-label-link 
                                        component-id="item.assyID" 
                                        label="vm.CORE.LabelConstant.MFG.MFGPN" 
                                        value="item.mfgPN" 
                                        is-copy="true"
                                        is-custom-part="item.isCustom"
                                        rohs-icon="item.rohsIcon" 
                                        rohs-status="item.rohsName" 
                                        is-search-digi-key="true">
                                    </common-pid-code-label-link>
                                </td>
                                <td md-cell>
                                    <common-pid-code-label-link 
                                        component-id="item.assyID" 
                                        label="vm.CORE.LabelConstant.MFG.PID" 
                                        value="item.PIDCode" 
                                        is-copy="true"                                        
                                        is-custom-part="item.isCustom"
                                        rohs-icon="item.rohsIcon" 
                                        rohs-status="item.rohsName" 
                                        is-search-digi-key="true">
                                    </common-pid-code-label-link>
                                </td>
                                <td md-cell>{{item.nickName}}</td>
                                <td md-cell>{{item.po}}</td>
                                <td md-cell>{{item.so}}</td>
                                <td md-cell class="text-right">{{item.allocateUOMClassID === vm.MEASUREMENT_TYPES_COUNT.ID ? (item.totalAllocatedQty)  : (item.totalAllocatedQty | unit)}}</td>
                                <td md-cell class="text-right">{{item.allocateUOMClassID === vm.MEASUREMENT_TYPES_COUNT.ID ? (item.totalAllocatedUnit)  : (item.totalAllocatedUnit | unit)}}</td>
                                <td md-cell>{{item.allocateUOMName}}</td>
                                <td md-cell class="text-right">{{item.mrpQty | numberWithoutDecimal}}</td>
                                <td md-cell class="text-right">{{item.kitQty | numberWithoutDecimal}}</td>
                            </tr>
                        </tbody>
                    </table>
                </md-table-container>

            </div>
        </md-content>
    </md-dialog-content>

    <md-dialog-actions layout="row">
        <md-button class="md-default md-raised" ng-click="vm.cancel()">Close</md-button>
    </md-dialog-actions>

</md-dialog>
