<md-dialog aria-label="ProductionStock" cg-busy="{promise:vm.cgBusyLoading}" draggable>
  <form name="vm.changeRequestForm" class="cm-custom-label-common md-inline-form">
    <md-button id="btnRequireColValidation" type="submit" ng-hide="true"></md-button>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>Change Request</h2>
        <span flex></span>
        <popup-header-label label-data="vm.headerdata"></popup-header-label>
        <md-button class="md-icon-button" ng-click="vm.cancel()">
          <md-icon role="img" md-font-icon="icon-close" class="material-icons mat-icon icon-close"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="customer-modal no-padding custom-scroll m-10" layout="column">
      <md-content flex="100" layout-wrap layout="row" class="md-padding custom-scroll">
        <div layout="row" flex="100" class="ml-10">
          <p class="font-weight-600"><b>Note: {{vm.selectOneRequestTypeNote}}</b></p>
        </div>
        <md-input-container class="md-block margin-top-0" flex="100">
          <md-radio-group name="changeType" ng-model="vm.changeRequestModel.changeType" layout-wrap layout="row"
                          flex="100" required ng-change="vm.changeTypeSelected();" custom-auto-focus="true">
            <md-radio-button class="margin-0" flex="20" ng-value="item.id" ng-repeat="item in vm.workorderChangeTypeList"> {{item.name}} </md-radio-button>
          </md-radio-group>
        </md-input-container>
        <div class="input-wrapper" layout="row" flex="100">
          <p class="label-container">Title<span>&nbsp;*</span></p>
          <md-input-container flex="100" class="margin-0">
            <input type="text" name="threadTitle" placeholder="Title" ng-model="vm.changeRequestModel.threadTitle"
                   ng-maxlength="255" required>
            <div ng-messages="vm.changeRequestForm.threadTitle.$error" role="alert">
              <div ng-message="required">
                <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
              </div>
              <div ng-message="maxlength">
                <span>{{vm.getMaxLengthValidation(255,vm.changeRequestForm.threadTitle.$viewValue.length)}}</span>
              </div>
            </div>
          </md-input-container>
        </div>
        <md-input-container class="md-block margin-top-0 margin-bottom-0" flex="100">
          <div layout="column" flex="100" flex-xs="100">
            <span class="label-container margin-bottom-0">Description&nbsp;<span>{{vm.CORE_MESSAGE_CONSTANT.MIN_LENGTH_MESSAGE}}<span ng-if="vm.taToolbar.REQUIRED">&nbsp;*</span></span></span>
            <span class="margin-bottom-10" ng-if="vm.changeRequestForm.description.$error.taMaxText" style="color:red; font-size:12px">
              {{vm.getDescrLengthValidation(vm.taToolbar.MAX_LENGTH, vm.changeRequestForm.description.$viewValue)}}
            </span>
          </div>
          <!--<span class="margin-bottom-10 font-size-12 color-red" ng-if="vm.changeRequestForm.description.$error.taMaxText">{{vm.getMaxLengthValidation(vm.taToolbar.MAX_LENGTH,vm.changeRequestForm.description.$viewValue.length)}}</span>-->
          <text-angular flex="100" ta-toolbar="vm.taToolbar.INLINE" ng-model="vm.changeRequestModel.description" cg-busy-loading="vm.cgBusyLoading"
                        ng-class="{'text-angular-custom-border':vm.changeRequestForm.description.$error.taMaxText}"
                        class="cm-add-workstation-text-angular"
                        name="description"
                        ta-min-text="{{vm.taToolbar.MIN_LENGTH}}"
                        ta-max-text="{{vm.taToolbar.MAX_LENGTH}}"
                        ng-required="{{vm.taToolbar.REQUIRED ? vm.taToolbar.REQUIRED : false}}"></text-angular>
        </md-input-container>
        <div layout="row" flex="100" class="margin-bottom-20 full-chip" ng-if="vm.woDetails">
          <invite-employee-for-review employee-review-list="vm.employeeReviewList"
                                      is-manual-save="true"
                                      wo-details="vm.woDetails"
                                      curr-active-form="vm.changeRequestForm"
                                      change-request-come-from="vm.changeRequestComeFrom"></invite-employee-for-review>
        </div>
      </md-content>
    </md-dialog-content>
    <md-dialog-actions layout="row">
      <md-button class="md-default md-raised" ng-click="vm.cancel()">
        Close
      </md-button>
      <md-button class="md-primary md-raised" ng-click="vm.save()"
                 ng-class="{'md-formdirty': vm.checkFormDirty(vm.changeRequestForm) || vm.changeRequestForm.$dirty}">Save</md-button>
      <!--ng-disabled="vm.changeRequestForm.$invalid || !vm.checkFormDirty(vm.changeRequestForm)"-->
      <md-button class="md-primary md-raised" ng-click="vm.save(true)"
                 ng-class="{'md-formdirty': vm.checkFormDirty(vm.changeRequestForm) || vm.changeRequestForm.$dirty}">Save and close</md-button>
      <!--ng-disabled="vm.changeRequestForm.$invalid || !vm.checkFormDirty(vm.changeRequestForm)"-->
    </md-dialog-actions>
  </form>
</md-dialog>
