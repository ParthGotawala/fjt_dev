<md-toolbar class="md-theme-light" layout="row" layout-align="space-between center">
    <div>
        <h1 class="md-toolbar-tools">Reprocess Required Qty: {{::vm.opName}}</h1>
    </div>
    <div layout="row" class="padding-top-10">
        <div class="timer-div">
            <timer-clock></timer-clock>
        </div>
        <md-button class="md-icon-button margin-0" ng-click="closeSidenav()">
            <md-icon md-font-icon="icon-close"></md-icon>
        </md-button>
    </div>
</md-toolbar>
<md-content layout="row" flex="100" layout-align="start start" layout-wrap class="fullheight-toolbar-footer custom-scroll md-inline-form">
    <!-- Direct tracking - Operation Not track by serial# -->
    <div ng-if="!vm.isOperationTrackBySerialNo && !vm.isTrackBySerialNo" flex="100">
        <form name="vm.reprocessQtyWithoutSerialForm" flex="100" class="padding-10-imp">
                <div layout="row" flex="100">
                    <div class="input-wrapper" layout="row">
                        <p class="label-container">Reprocess Required Qty</p>
                        <md-input-container>
                            <input type="number" name="reprocessQty" ng-model="vm.reprocessQtyModel.reprocessQty" onkeypress="return OnlyNumeric(event)"
                                   placeholder="Reprocess Required Qty" ng-maxlength="8" required md-autofocus min="1" max="{{vm.buildQty - vm.totalAddedReprocessQty}}">
                            <div ng-messages="vm.reprocessQtyWithoutSerialForm.reprocessQty.$error"
                                 role="alert">
                                <div ng-message="required">
                                    <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                </div>
                                <div ng-message="maxlength">
                                    <span>{{vm.CORE_MESSAGE_CONSTANT.MAX_LENGTH}}</span>
                                </div>
                                <div ng-message="min">
                                    <span>{{vm.CORE_MESSAGE_CONSTANT.MIN_LENGTH}}</span>
                                </div>
                                <div ng-message="max">
                                    <span>{{vm.SERIALS_MORETHAN_BUILD_QTY_MSG}}</span>
                                </div>
                            </div>
                        </md-input-container>
                    </div>
                    <div class="padding-left-10">
                        <md-button class="md-primary md-raised margin-0" ng-disabled="vm.reprocessQtyWithoutSerialForm.$invalid"
                                   ng-click="vm.addReprocessQty();" ng-if="!vm.isRework">
                            Reprocess Required
                        </md-button>
                    </div>
                </div>
                <!-- Production stock details in list -->
                <div layout="row" layout-wrap flex="100">
                    <div layout="row" flex="100" layout-align="space-between center" ng-if="vm.ProductionList.length > 0">
                        <span flex="30"><b>Production Details</b></span>
                        <div layout="row" layout-align="end end" flex="70">
                            <p class="label-container text-right layout-align-end-end layout-row mr-5 mt-5 mb-6" layout="row" layout-align="end end" flex="30">
                                Search
                            </p>                            
                            <md-input-container md-no-float class="md-block search-header margin-0 error-none" flex="50">
                                <input type="text" ng-model="vm.query.search" ng-model-options="{debounce: vm.debounceConstant.mdDataTable }" placeholder="Search">
                            </md-input-container>                            
                            <md-button class="md-primary md-raised margin-0 margin-left-5-imp"  ng-click="vm.query.search = ''">Reset</md-button>
                        </div>
                    </div>
                    <md-table-container class="mt-5" flex="100" ng-if="vm.ProductionList.length > 0" ng-hide="(vm.ProductionList  | filter: vm.query.search).length == 0 && vm.query.search">
                        <table md-table class="border md-data-table table-row-select" md-row-select ng-model="vm.selectedItems">
                            <thead md-head md-order="vm.query.order">
                                <tr md-row>
                                    <th md-column>#</th>
                                    <th md-column md-order-by="employee.initialName">Name</th>
                                    <th md-column md-order-by="createdAt">Date</th>
                                    <th md-column md-numeric md-order-by="reprocessQty" width="50">Reprocess Required Qty</th>
                                </tr>
                            </thead>
                            <tbody md-body>
                                <tr md-row ng-repeat="data in vm.ProductionList
                                                                | filter: vm.query.search
                                                                | orderBy: vm.query.order
                                                                | limitTo: vm.query.limit : (vm.query.page -1) * vm.query.limit">
                                    <td md-cell>{{$index+1}}</td>
                                    <td md-cell>{{data.initialName}}</td>
                                    <td md-cell>{{data.createdAt}}</td>
                                    <td md-cell>{{data.reprocessQty ? data.reprocessQty : '-' | numberWithoutDecimal}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                    <md-table-pagination flex="100" md-limit="vm.query.limit" md-limit-options="limitOptions" md-page="vm.query.page" md-total="{{vm.ProductionList.length}}" md-page-select md-boundary-links="false" ng-if="(vm.ProductionList | filter: vm.query.search).length != 0 && vm.query.isPagination"></md-table-pagination>
                </div>
        </form>
    </div>
    <div class="empty-state full-height-90 cm-reprocess-qty-sidebar-popup" layout="row" layout-wrap layout-align="center center"
         ng-if="(vm.ProductionList  | filter: vm.query.search).length == 0 && vm.query.search" flex="100">
        <div class="emty-icon" flex="100">
            <img ng-src="{{vm.emptySearch.IMAGEURL}}" />
        </div>
        <p class="empty-state-title" flex="100">{{vm.emptySearch.MESSAGE}}</p>
    </div>
    <div class="empty-state text-center full-height cm-reprocess-qty-sidebar-popup" layout="row" layout-align="center center" layout-wrap ng-if="vm.ProductionList.length == 0" flex="100">
        <div class="emty-icon" flex="100">
            <img ng-src="{{vm.EmptyMesssage.IMAGEURL}}" />
        </div>
        <p flex="100" class="empty-state-title">{{vm.EmptyMesssage.MESSAGE}}</p>
    </div>
    <!-- Operation track by serial# -->
    <!--<div layout="row" flex="100" ng-if="vm.isOperationTrackBySerialNo || vm.isTrackBySerialNo">
        <form name="vm.reprocessQtyWithSerialForm" class="padding-10-imp" flex="100">
                <md-radio-group layout="row" ng-model="vm.selectedValue" class="margin-0"
                                ng-change="vm.changeselectedSerialFilterValue()" name="rbSerialNumber">
                    <md-radio-button class="md-primary" value="SerialNumber">
                        <span>Serial#</span>
                    </md-radio-button>
                    <md-radio-button class="md-primary" value="Range">
                        <span>Range</span>
                    </md-radio-button>
                    <md-radio-button class="md-primary" value="FromQty">
                        <span>From Qty</span>
                    </md-radio-button>
                </md-radio-group>
                <div layout="row" flex="100">
                    <div class="input-wrapper" layout="row" flex="100">
                        <div layout="row" flex>
                            <p class="label-container">{{vm.autoCompleteWorkorderFromSerialsDetail.placeholderName}}<span>&nbsp;*</span></p>
                            <md-input-container class="autocompletecustom">
                                <custom-auto-complete class="min-width-initial" flex="100" datalist="vm.workorderSerialsList" ng-if="vm.autoCompleteWorkorderFromSerialsDetail"
                                                      column-name="vm.autoCompleteWorkorderFromSerialsDetail.columnName"
                                                      key-column-name="vm.autoCompleteWorkorderFromSerialsDetail.keyColumnName"
                                                      key-column-id="vm.autoCompleteWorkorderFromSerialsDetail.keyColumnId"
                                                      input-name="vm.autoCompleteWorkorderFromSerialsDetail.inputName"
                                                      placeholder-name="vm.autoCompleteWorkorderFromSerialsDetail.placeholderName"
                                                      is-required="vm.autoCompleteWorkorderFromSerialsDetail.isRequired"
                                                      is-addnew="vm.autoCompleteWorkorderFromSerialsDetail.isAddnew"
                                                      callback-fn="vm.autoCompleteWorkorderFromSerialsDetail.callbackFn">
                                </custom-auto-complete>
                            </md-input-container>
                        </div>
                        <div layout="row" flex ng-if="vm.selectedValue == vm.WOSerialNoFilterType.Range">
                            <p class="label-container">{{vm.autoCompleteWorkorderToSerialsDetail.placeholderName}}<span>&nbsp;*</span></p>
                            <md-input-container flex class="autocompletecustom">
                                <custom-auto-complete class="min-width-initial" datalist="vm.workorderSerialsList" ng-if="vm.autoCompleteWorkorderToSerialsDetail" flex="100"
                                                      column-name="vm.autoCompleteWorkorderToSerialsDetail.columnName"
                                                      key-column-name="vm.autoCompleteWorkorderToSerialsDetail.keyColumnName"
                                                      key-column-id="vm.autoCompleteWorkorderToSerialsDetail.keyColumnId"
                                                      input-name="vm.autoCompleteWorkorderToSerialsDetail.inputName"
                                                      placeholder-name="vm.autoCompleteWorkorderToSerialsDetail.placeholderName"
                                                      is-required="vm.autoCompleteWorkorderToSerialsDetail.isRequired"
                                                      is-addnew="vm.autoCompleteWorkorderToSerialsDetail.isAddnew"
                                                      callback-fn="vm.autoCompleteWorkorderFromSerialsDetail.callbackFn">
                                </custom-auto-complete>
                            </md-input-container>
                        </div>
                        <div layout="row" flex ng-if="vm.selectedValue == vm.WOSerialNoFilterType.FromQty">
                            <p class="label-container">Qty<span>&nbsp;*</span></p>
                            <md-input-container flex>
                                <input flex="100" type="number" placeholder="Qty" ng-model="vm.Qty" min="1" max={{vm.buildQty - vm.totalSourceDataCount}}
                                       name="Qty" ng-required="vm.isRequiredSerialQtyFilter" onkeypress="return OnlyNumeric(event)" />
                                <div ng-messages="vm.reprocessQtyWithSerialForm.Qty.$error" role="alert">
                                    <div ng-message="required">
                                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                                    </div>
                                    <div ng-message="min">
                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                    </div>
                                    <div ng-message="max">
                                        <span>{{vm.CORE_MESSAGE_CONSTANT.MAX_LENGTH}}</span>
                                    </div>
                                    <div ng-message="number">
                                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                                    </div>
                                </div>
                            </md-input-container>
                        </div>
                        <div layout-align="end">
                            <md-button class="md-primary md-raised margin-0"
                                       ng-disabled="vm.buildQty <= vm.totalSourceDataCount || vm.isDisableReprocessed"
                                      ng-class="{'md-formdirty': vm.reprocessQtyWithSerialForm.$dirty}"
                                       ng-click="vm.AddReprocessSerials();" ng-if="!vm.isRework">
                                Reprocess Required
                            </md-button>
                        </div>
                    </div>
                </div>
                <div layout="row" flex="100" class="margin-bottom-10" ng-show="!vm.isNoDataFound">
                    <h3 class="margin-0"><b>Transaction Serial# List</b></h3>
                </div>
                <md-card layout="column" class="margin-0" flex layout-align="space-between stretch" ng-show="!vm.isNoDataFound">
                    <ui-grid-extention class="cm-reprocessed-qty-list" load-data="vm.loadData"
                                       grid-option="vm.gridOptions"
                                       header="vm.sourceHeader"
                                       grid-data="vm.sourceData"
                                       total-data-count="vm.totalSourceDataCount"
                                       reset-grid="vm.resetSourceGrid"
                                       selectted-rows="vm.selectedRowsList"
                                       paging-info="vm.pagingInfo"
                                       current-item="vm.currentdata"
                                       get-data-down="vm.getDataDown"
                                       empty-state="vm.emptyState"
                                       delete-multiple-data="vm.deleteMultipleData">
                </md-card>
                <div class="empty-state text-center full-height" flex="100" layout="row" layout-align="center center" layout-wrap
                      ng-if="vm.isNoDataFound == true">
                    <div class="emty-icon" flex="100">
                        <img ng-src="{{vm.EmptyMesssage.IMAGEURL}}" />
                    </div>
                    <p flex="100" class="empty-state-title">{{vm.EmptyMesssage.MESSAGE}}</p>
                </div>
        </form>
    </div>-->

</md-content>
<md-footer flex="100" layout="row" layout-wrap>
    <div layout="row" flex="100" layout-align="end">
        <md-button class="md-default md-raised" ng-click="closeSidenav()">Cancel</md-button>
    </div>
</md-footer>
