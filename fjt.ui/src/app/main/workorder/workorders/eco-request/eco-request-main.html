<div id="forms" class="page-layout simple fullwidth doc-page cm-custom-label-common breadcrumb-fixed" layout="column" cg-busy="{promise:vm.cgBusyLoading}">
  <div class="header md-accent-bg layout-wrap-rs-1024" layout="row" layout-align="space-between center">
    <div  flex="65" layout="row" layout-align="start-center">
      <div layout="row" flex="35" class="overflow-auto-rs">
        <md-button class="goto-products-button md-icon-button cm-back-btn-p-m" type="button" ng-click="vm.openEcoRequestList(vm.partID,vm.woID)">
          <!--<md-icon md-font-icon="icon-arrow-left" class="material-icons icon-arrow-left">
          </md-icon>-->
          <md-icon md-font-icon="icons-backarrow" class="material-icons icons-backarrow cm-back-btn">
          </md-icon>
        </md-button>
        <div class="white-fg" layout="column" layout-align="start start">
          <div class="h2" layout="row" layout-align="start center">
            <pagetitle is-list="false" is-display-menu-name="true" prefix-content="vm.ecoReqID ? 'Update' : 'Add'" suffix-content="vm.ecorequesrDetail.ecoNumber?': '+vm.ecorequesrDetail.ecoNumber:''"></pagetitle>
          </div>
          <div layout="row" layout-align="start center">
            <breadcrumbs></breadcrumbs>
          </div>
        </div>
      </div>
      <div class="flex-25 cm-header-search-add-container">        
          <md-input-container ng-if="vm.autoCompleteECODFM" class="width-100p autocompletecustom margin-0 widget-dashboard-search-area part-header-search-area" flex="100" flex-gt-xs="100">
            <custom-auto-complete-search on-search-fn="vm.autoCompleteECODFM.onSearchFn"
                                         column-name="vm.autoCompleteECODFM.columnName"
                                         key-column-name="vm.autoCompleteECODFM.keyColumnName"
                                         key-column-id="vm.autoCompleteECODFM.keyColumnId"
                                         input-name="vm.autoCompleteECODFM.inputName"
                                         placeholder-name="vm.autoCompleteECODFM.placeholderName"
                                         is-required="vm.autoCompleteECODFM.isRequired"
                                         is-addnew="vm.autoCompleteECODFM.isAddnew"
                                         callback-fn="vm.autoCompleteECODFM.callbackFn"
                                         on-select-callback-fn="vm.autoCompleteECODFM.onSelectCallbackFn">
            </custom-auto-complete-search>
          </md-input-container>
          <md-button class="md-primary md-raised ml-5 mt-5" ng-click="vm.addECODFM()" ng-if="vm.ecoReqID"
                     ng-disabled="vm.isWoInSpecificStatusNotAllowedToChange">
            Add {{vm.ecoRequestModel.requestType == vm.requestType.DFM.Value?"DFM":"ECO"}} request
          </md-button>        
      </div>
      <div layout="row" class="product-count">
        <div flex layout="row" layout-wrap flex-md="100" flex-sm="100" class="cm-overflow-auto-1601">
          <div class="cm-section-main border-0" flex="100">
            <div class="cm-section-inner margin-top-5" layout="row">
              <table cellspacing="0" cellpadding="0" class="cm-table-input-main cm-wo-header-main">
                <tbody>
                  <tr>
                    <th class="padding-left-30" ng-if="vm.ecorequesrDetail.workOrder.woNumber">
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration"
                           ng-mousedown="vm.gotoWorkorderlist();$event.preventDefault();">{{vm.WOAllLabelConstant.WO}}</a>:
                      </p>
                    </th>
                    <td class="width-16p" ng-if="vm.ecorequesrDetail.workOrder.woNumber">
                      <span>
                        <a tabindex="-1" class="cm-text-decoration"
                           ng-mousedown="vm.goToWorkorderDetails(vm.woID);$event.preventDefault();">
                          {{vm.ecorequesrDetail.workOrder.woNumber}}
                        </a>
                        <md-tooltip>{{vm.ecorequesrDetail.workOrder.woNumber}}</md-tooltip>
                      </span>
                    </td>
                    <th class="padding-left-30">
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration"
                           ng-mousedown="vm.goToAssemblyList();$event.preventDefault();">{{vm.assemblyAllLabelConstant.PIDCode}}</a>:
                      </p>
                    </th>
                    <td class="width-16p">
                      <span>
                        <common-pid-code-label-link component-id="vm.ecoDetail.id"
                                                    label="vm.LabelConstant.Assembly.ID"
                                                    value="vm.ecoDetail.PIDCode"
                                                    is-copy="true"
                                                    rohs-icon="vm.rohsImagePath + vm.ecoDetail.rfq_rohsmst.rohsIcon"
                                                    rohs-status="vm.ecoDetail.rfq_rohsmst.name"
                                                    is-formated="true"
                                                    is-assembly="true"
                                                    is-custom-part="vm.ecoDetail.isCustom">
                        </common-pid-code-label-link>
                      </span>
                    </td>

                  </tr>
                  <tr>
                    <th class="padding-left-30"  ng-if="vm.ecorequesrDetail.workOrder.woVersion">
                      <p class="label-container">{{vm.WOAllLabelConstant.Version}}:</p>
                    </th>
                    <td ng-if="vm.ecorequesrDetail.workOrder.woVersion">
                      <span>
                        {{vm.ecorequesrDetail.workOrder.woVersion}}
                      </span>
                    </td>
                    <th class="padding-left-30"> 
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration"
                           ng-mousedown="vm.goToAssemblyList();$event.preventDefault();">{{vm.assemblyAllLabelConstant.MFGPN}}</a>:
                      </p>
                    </th>
                    <td class="width-16p">
                      <span>
                        <common-pid-code-label-link component-id="vm.ecoDetail.id"
                                                    label="vm.LabelConstant.Assembly.ID"
                                                    value="vm.ecoDetail.mfgPN"
                                                    is-copy="true"
                                                    rohs-icon="vm.rohsImagePath + vm.ecoDetail.rfq_rohsmst.rohsIcon"
                                                    rohs-status="vm.ecoDetail.rfq_rohsmst.name"
                                                    is-formated="true"
                                                    is-assembly="true"
                                                    is-custom-part="vm.ecoDetail.isCustom">
                        </common-pid-code-label-link>
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>              
            </div>
          </div>
        </div>
      </div>
    </div>
    <div layout-align="end center" layout="row">
      <!--vm.checkFormDirty(msWizard.currentStepForm(),vm.checkDirtyObject)-->
      <span class="margin-left-5 cm-bom-t-title text-right" ng-if="vm.ECOStatus && vm.ecoRequestModel.requestType == vm.requestType.ECO.Value">ECO Status:</span>
      <span class="margin-left-5 cm-bom-t-title text-right" ng-if="vm.ECOStatus && vm.ecoRequestModel.requestType == vm.requestType.DFM.Value">DFM Status:</span>&nbsp;
      <span class="cm-bom-t-title text-right label-box" ng-if="vm.ECOStatus" ng-class="{'label-success':vm.ECOStatus == vm.ecostatusheaderdropdown[1].value,
                                'label-warning':vm.ECOStatus == vm.ecostatusheaderdropdown[2].value}">
        {{vm.ECOStatus}}
      </span>&nbsp;
      <span class="margin-left-5 cm-bom-t-title text-right" ng-if="vm.ECOFinalStatus && vm.ecoRequestModel.requestType == vm.requestType.ECO.Value">ECO Final Status:</span>
      <span class="margin-left-5 cm-bom-t-title text-right" ng-if="vm.ECOFinalStatus && vm.ecoRequestModel.requestType == vm.requestType.DFM.Value">DFM Final Status:</span>&nbsp;
      <span class="cm-bom-t-title text-right label-box" ng-if="vm.ECOFinalStatus" ng-class="{'label-success':(vm.ecoRequestModel.requestType == vm.requestType.ECO.Value)?vm.ECOFinalStatus ==  vm.ecofinalstatusheaderdropdown[2].value:vm.ECOFinalStatus ==  vm.dfmfinalstatusheaderdropdown[2].value,
              'label-warning':(vm.ecoRequestModel.requestType == vm.requestType.ECO.Value)? vm.ECOFinalStatus ==  vm.ecofinalstatusheaderdropdown[1].value:vm.ECOFinalStatus ==  vm.dfmfinalstatusheaderdropdown[1].value,
              'label-danger': (vm.ecoRequestModel.requestType == vm.requestType.ECO.Value)?vm.ECOFinalStatus ==  vm.ecofinalstatusheaderdropdown[3].value:vm.ECOFinalStatus ==  vm.dfmfinalstatusheaderdropdown[3].value}">
        {{vm.ECOFinalStatus}}
      </span>&nbsp;
      <span class="margin-left-5 cm-bom-t-title text-right" ng-if="vm.wostatus.Value"> WO Status:</span>&nbsp;
      <span class="margin-left-5 cm-bom-t-title text-right label-box" ng-if="vm.wostatus.Value" ng-class="vm.class">
        {{vm.wostatus.Value}}
      </span>&nbsp;
      <md-button class="md-raised md-primary" ng-click="vm.save($event);" id="saveBtn"
                 ng-class="{'md-formdirty': vm.formdirty}"
                 ng-if="vm.activeTab == 0"
                 ng-disabled="vm.isWoInSpecificStatusNotAllowedToChange">
        Save
      </md-button>
    </div>
  </div>
  <div class="content-card padding-top-side" layout="row" flex="100">
    <div layout="row" flex="100">
      <!-- FORM WIZARD -->
      <ms-form-wizard flex>
        <md-tabs validate-step="true" is-valid="vm.isStepValid" class="manage-customer-tabing padding-0" md-dynamic-height md-selected="vm.activeTab">
          <md-tab ui-sref="{{item.src}}" ng-repeat="item in vm.tabList" ng-disabled="item.isDisabled" md-on-select="vm.onTabChanges(item)">
            <md-tab-label>
              <span class="ms-form-wizard-step-label">
                <span class="ms-form-wizard-step-text">{{item.title}}</span>
              </span>
            </md-tab-label>
            <md-tab-body>
              <div ui-view="{{item.viewsrc}}"></div>
            </md-tab-body>
          </md-tab>
        </md-tabs>

      </ms-form-wizard>
    </div>
  </div>
</div>
