<form name="vm.frmWorkOrderDetails" class="md-inline-form padding-bottom-0 cm-custom-label-common" novalidate>
  <div layout="row" flex="100" layout-wrap layout-md="column" layout-sm="column">
    <div layout="row" flex="100" layout-wrap flex-md="100" flex-sm="100">
      <div flex="100" layout="row" layout-wrap class="cm-section-main margin-right-5 margin-bottom-5">
        <div flex="100" layout="row" class="cm-section-header" layout-align="space-between center">
          <h2>Work Order</h2>
          <div layout layout-align="start center">
            <popup-header-label label-data="vm.headerdata"></popup-header-label>
            <md-button class="md-primary md-raised mv-0 ml-0" ng-click="vm.viewWONumberBuildHistory($event)">
              WO Build History
            </md-button>
          </div>
        </div>
        <div class="cm-section-inner overflow-auto-rs cm-overflow-auto" flex="100" layout-wrap layout="row">
          <div flex="75" layout="row" layout-wrap>
            <div flex="45" layout="row">
              <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                <tbody>
                  <tr>
                    <th class="w-110">
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToCustomerList();">{{vm.autoCompleteCustomer.placeholderName}}</a>
                        <span ng-if="vm.autoCompleteCustomer.isRequired" ng-hide="vm.workorder.woID || vm.IsEdit || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination">&nbsp;*</span>
                      </p>
                    </th>
                    <td colspan="2">
                      <md-input-container ng-if="vm.autoCompleteCustomer" class="autocompletecustom cm-custom-autocomplete margin-0">
                        <custom-auto-complete datalist="vm.CustomerList"
                                              column-name="vm.autoCompleteCustomer.columnName"
                                              controller-name="vm.autoCompleteCustomer.controllerName"
                                              view-template-url="vm.autoCompleteCustomer.viewTemplateURL"
                                              key-column-name="vm.autoCompleteCustomer.keyColumnName"
                                              input-name="vm.autoCompleteCustomer.inputName"
                                              placeholder-name="vm.autoCompleteCustomer.placeholderName"
                                              key-column-id="vm.autoCompleteCustomer.keyColumnId"
                                              is-required="vm.autoCompleteCustomer.isRequired"
                                              is-disabled="vm.workorder.woID || vm.IsEdit || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || vm.isWoInSpecificStatusNotAllowedToChange"
                                              is-addnew="vm.autoCompleteCustomer.isAddnew"
                                              callback-fn="vm.autoCompleteCustomer.callbackFn"
                                              add-data="vm.autoCompleteCustomer.addData"
                                              on-select-callback-fn="vm.autoCompleteCustomer.onSelectCallbackFn">
                        </custom-auto-complete>
                      </md-input-container>
                    </td>
                  </tr>
                  <tr>
                    <th>
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToAssemblyList();">{{vm.autoCompleteAssy.placeholderName}}</a>
                        <span ng-if="vm.autoCompleteAssy.isRequired" ng-hide="vm.workorder.woID || vm.IsEdit || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || !vm.autoCompleteCustomer.keyColumnId">&nbsp;*</span>
                      </p>
                    </th>
                    <td colspan="2">
                      <md-input-container ng-if="vm.autoCompleteAssy" class="autocompletecustom cm-custom-autocomplete margin-0">
                        <custom-auto-complete datalist="vm.assyList"
                                              column-name="vm.autoCompleteAssy.columnName"
                                              controller-name="vm.autoCompleteAssy.controllerName"
                                              view-template-url="vm.autoCompleteAssy.viewTemplateURL"
                                              key-column-name="vm.autoCompleteAssy.keyColumnName"
                                              input-name="vm.autoCompleteAssy.inputName"
                                              placeholder-name="vm.autoCompleteAssy.placeholderName"
                                              key-column-id="vm.autoCompleteAssy.keyColumnId"
                                              is-required="vm.autoCompleteAssy.isRequired"
                                              is-disabled="vm.workorder.woID || vm.IsEdit || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || !vm.autoCompleteCustomer.keyColumnId || vm.isWoInSpecificStatusNotAllowedToChange"
                                              is-addnew="vm.autoCompleteAssy.isAddnew"
                                              callback-fn="vm.autoCompleteAssy.callbackFn"
                                              add-data="vm.autoCompleteAssy.addData"
                                              on-select-callback-fn="vm.autoCompleteAssy.onSelectCallbackFn">
                        </custom-auto-complete>
                      </md-input-container>
                    </td>
                  </tr>
                  <!--<tr>
                    <th><p class="label-container">{{vm.allLabelConstant.Assembly.Description}}</p></th>
                    <td colspan="2">
                      <md-input-container flex="100">
                        <textarea id="woDescription" type="text" name="description" ng-model="vm.workorder.description" placeholder="{{vm.allLabelConstant.Assembly.Description}}"
                                  ng-disabled="true"></textarea>
                      </md-input-container>
                    </td>
                  </tr>-->
                </tbody>
              </table>
            </div>
            <div flex="55" layout="row">
              <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                <tbody>
                  <tr>
                    <th>
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration"
                           ng-mousedown="vm.goToWorkorderList();$event.preventDefault();">{{vm.allLabelConstant.Workorder.WO}}</a>
                        <!--<span ng-if="vm.workorder.woIsEdit && !(!vm.autoCompleteAssy.keyColumnId || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination)">&nbsp;*</span>-->
                      </p>
                    </th>
                    <td>
                      <div flex="100" layout="row" layout-align="space-between start">
                        <span class="cm-custom-td-span" ng-if="!vm.workorder.woIsEdit"><b>{{vm.workorder.woNumber ? vm.workorder.woNumber : "WOXXXXX-XX"}}</b></span>
                        <!--<md-input-container flex ng-if="vm.workorder.woIsEdit">
        <input type="text" name="woNumber"
               ng-model="vm.workorder.woNumber"
               class="input-text-uppercase"
               capitalize placeholder="{{vm.allLabelConstant.Workorder.WO}}"
               required minlength="6" ng-pattern="vm.WONumberPattern" ng-maxlength="255"
               mask="99999?-99" validate="false"
               ng-disabled="!vm.autoCompleteAssy.keyColumnId || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || vm.isWoInSpecificStatusNotAllowedToChange"
               custom-auto-focus="{{true}}"
               ng-blur="vm.checkValidWO()" />
        <div ng-messages="vm.frmWorkOrderDetails.woNumber.$error" role="alert">
          <div ng-message="required">
            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
          </div>
          <div ng-message="maxlength">
            <span>{{vm.getMaxLengthValidation(255, vm.frmWorkOrderDetails.woNumber.$viewValue.length)}}</span>
          </div>
          <div ng-message="invalidWO">
            <span>{{vm.invalidWOSeries}}</span>
          </div>
          <div ng-message="pattern">
            <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
          </div>
          <div ng-message="minlength">
            <span>{{vm.CORE_MESSAGE_CONSTANT.WO_NUMBER_LENGTH}}</span>
          </div>
        </div>
      </md-input-container>
      <md-button ng-if="!vm.workorder.woID && vm.autoCompleteAssy.keyColumnId" class="md-primary md-raised"
                 ng-disabled="vm.isWoInSpecificStatusNotAllowedToChange || vm.frmWorkOrderDetails.woNumber.$invalid"
                 ng-click="vm.workorder.woNumber ? (vm.workorder.woIsEdit = !vm.workorder.woIsEdit): angular.noop">
        {{vm.workorder.woIsEdit ? 'Update WO#' : 'Edit WO#'}}
      </md-button>-->
                      </div>
                      <div flex="100" class="font-size-10">
                        <b>{{vm.woNotesConst.SystemGenerateWONumber}}</b>
                      </div>
                    </td>
                    <th>
                      <p class="label-container">
                        {{vm.allLabelConstant.Workorder.Version}}
                        <span ng-if="!vm.isWOUnderTermination">&nbsp;*</span>
                      </p>
                    </th>
                    <td>
                      <md-input-container flex="100">
                        <input type="text" name="woVersion" ng-model="vm.workorder.woVersion"
                               class="input-text-uppercase"
                               capitalize placeholder="{{vm.allLabelConstant.Workorder.Version}}"
                               required
                               ng-disabled="vm.isWOUnderTermination || vm.isWoInSpecificStatusNotAllowedToChange"
                               onkeypress="return onlyAlphabets(event)"
                               maxlength="2">
                        <div ng-messages="vm.frmWorkOrderDetails.woVersion.$error"
                             role="alert">
                          <div ng-message="required">
                            <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                          </div>
                          <div ng-message="maxlength">
                            <span>{{vm.getMaxLengthValidation(255, vm.frmWorkOrderDetails.woVersion.$viewValue.length)}}</span>
                          </div>
                        </div>
                      </md-input-container>
                    </td>
                    <th>
                      <p class="label-container">
                        SystemID
                      </p>
                    </th>
                    <td>
                      <md-input-container flex="100">
                        <input type="text" name="systemID" id="systemID" ng-model="vm.workorder.systemID"
                               placeholder="systemID" ng-disabled="true">
                      </md-input-container>
                    </td>
                  </tr>
                  <tr>
                    <th>
                      <p class="label-container">
                        <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToAssemblyList();">{{vm.allLabelConstant.Assembly.MFGPN}}</a>
                      </p>
                    </th>
                    <td>
                      <span class="cm-custom-td-span">
                        <common-pid-code-label-link ng-if="vm.autoCompleteAssy.keyColumnId"
                                                    component-id="vm.autoCompleteAssy.keyColumnId"
                                                    label="vm.allLabelConstant.Assembly.MFGPN"
                                                    value="vm.workorder.mfgPN"
                                                    is-copy="true"
                                                    rohs-icon="vm.workorder.rohsIcon"
                                                    rohs-status="vm.workorder.rohsName"
                                                    is-formated="true"
                                                    is-assembly="true"
                                                    is-custom-part="vm.workorder.isCustom"></common-pid-code-label-link>
                      </span>
                    </td>
                    <th>
                      <p class="label-container">{{vm.allLabelConstant.Assembly.NickName}}</p>
                    </th>
                    <td>
                      <span class="cm-custom-td-span"><b>{{vm.workorder.nickName}}</b></span>
                    </td>
                  </tr>
                  <!--<tr>
                    <th class="width-0 padding-0"></th>
                    <td>
                      <div layout="row">
                        <md-checkbox ng-model="vm.workorder.isIncludeSubAssembly"
                                     name="isIncludeAssembly" class="margin-0"
                                     ng-change="vm.changeAssemblyInclude($event)"
                                     ng-disabled="vm.disableIncludeSubAssembly || vm.isWoInSpecificStatusNotAllowedToChange">
                          <p class="label-container">
                            {{vm.allLabelConstant.Workorder.IncludeSubAssembly}}
                          </p>
                        </md-checkbox>
                        <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit ">
                          <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.IncludeSubAssembly}}</md-tooltip>
                        </md-icon>
                      </div>
                    </td>
                    <th class="width-0 padding-0"></th>
                    <td>
                      <div layout="row">
                        <md-checkbox ng-model="vm.workorder.isKitAllocationNotRequired"
                                     name="isInternalBuild" class="margin-0"
                                     ng-disabled="vm.vm.disableKitAllocationNotRequired  || vm.isWoInSpecificStatusNotAllowedToChange">
                          <p class="label-container">
                            {{vm.allLabelConstant.Workorder.IsKitAllocationNotRequired}}
                          </p>
                        </md-checkbox>
                        <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit ">
                          <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.IsKitAllocationNotRequiredHelp}}</md-tooltip>
                        </md-icon>
                      </div>
                    </td>
                  </tr>-->
                </tbody>
              </table>
            </div>
            <div flex="100">
              <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
                <tbody>
                  <tr>
                    <th class="w-110"><p class="label-container">{{vm.allLabelConstant.Assembly.Description}}</p></th>
                    <td colspan="2">
                      <md-input-container flex="100">
                        <textarea id="woDescription" type="text" name="description" ng-model="vm.workorder.description" placeholder="{{vm.allLabelConstant.Assembly.Description}}"
                                  ng-disabled="true"></textarea>
                      </md-input-container>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div flex="25" flex-sm="100" layout="row">
            <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
              <tbody>
                <tr>
                  <th></th>
                  <td class="padding-left-20">
                    <fieldset class="container-box">
                      <div layout="row">
                        <md-checkbox ng-model="vm.workorder.isRackTrackingRequired"
                                     name="isIncludeAssembly" class="margin-0"
                                     ng-disabled="vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || vm.isWoInSpecificStatusNotAllowedToChange"
                                     ng-change="!vm.workorder.isRackTrackingRequired?(vm.workorder.isStrictlyFollowRackValidation=false):vm.workorder.isStrictlyFollowRackValidation">
                        </md-checkbox>
                        <p class="label-container margin-0">
                          {{vm.allLabelConstant.Workorder.RequiredRackTracking}}
                          <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit pb-5">
                            <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.RequireRackTrackingHelp}}</md-tooltip>
                          </md-icon>
                        </p>
                      </div>
                      <div layout="row">
                        <md-checkbox ng-model="vm.workorder.isStrictlyFollowRackValidation"
                                     name="isIncludeAssembly" class="margin-0"
                                     ng-disabled="vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || !vm.workorder.isRackTrackingRequired || vm.isWoInSpecificStatusNotAllowedToChange">
                        </md-checkbox>
                        <p class="label-container margin-0">
                          {{vm.allLabelConstant.Workorder.StrictlyValidation}}
                          <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit pb-5">
                            <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.StrictlyValidationHelp}}</md-tooltip>
                          </md-icon>
                        </p>
                      </div>
                    </fieldset>
                  </td>
                </tr>
                <tr>
                  <th></th>
                  <td class="padding-left-20">
                    <fieldset class="container-box">
                      <div layout="row" class="cm-checkbox-auto mt-5">
                        <md-checkbox ng-model="vm.workorder.isIncludeSubAssembly"
                                     name="isIncludeAssembly" class="margin-0"
                                     ng-change="vm.changeAssemblyInclude($event)"
                                     ng-disabled="vm.disableIncludeSubAssembly || vm.isWoInSpecificStatusNotAllowedToChange">
                          <p class="label-container">
                            {{vm.allLabelConstant.Workorder.IncludeSubAssembly}}
                            <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit pb-5">
                              <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.IncludeSubAssembly}}</md-tooltip>
                            </md-icon>
                          </p>
                        </md-checkbox>
                      </div>
                      <div layout="row" class="cm-checkbox-auto">
                        <md-checkbox ng-model="vm.workorder.isKitAllocationNotRequired"
                                     name="isInternalBuild" class="margin-0"
                                     ng-disabled="vm.vm.disableKitAllocationNotRequired  || vm.isWoInSpecificStatusNotAllowedToChange">
                          <p class="label-container">
                            {{vm.allLabelConstant.Workorder.IsKitAllocationNotRequired}}
                            <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit pb-5">
                              <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.IsKitAllocationNotRequiredHelp}}</md-tooltip>
                            </md-icon>
                          </p>
                        </md-checkbox>
                      </div>
                    </fieldset>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div layout="row" flex="40" flex-md="100" flex-sm="100" ng-if="vm.autoCompleteAssy && vm.autoCompleteAssy.keyColumnId" class="cm-wo-assembly-table">
      <assembly-samples-list assy-id="vm.autoCompleteAssy.keyColumnId"
                             wo-id="vm.workorder.woID"
                             selected-sample-id="vm.workorder.selectedSampleID"
                             wo-other-details="vm.woDetailsForWOOPVerification">
      </assembly-samples-list>
    </div>

    <div layout="row" flex="60" flex-md="100" flex-sm="100">
      <div layout="row" layout-wrap flex="100" layout-align="start start" class="cm-section-main margin-bottom-5 margin-left-5">
        <div flex="100" class="cm-section-header" layout="row" layout-align="space-between center">
          <h2>Order Details</h2>
          <div class="float-right">
          <a class="cm-text-decoration" ng-click="vm.ViewAssemblyStockStatus()"
                ng-if="vm.autoCompleteAssy && vm.autoCompleteAssy.keyColumnId"><b>View Assembly Stock</b></a>
          </div>
        </div>
        <div flex="100" layout-wrap layout="row" class="cm-section-inner">
          <div flex="100">
            <table cellspacing="0" cellpadding="0" class="cm-table-input-main">
              <tbody>
                <tr>
                  <th><p class="label-container pt-2 width-65"></p></th>
                  <td>
                    <div layout="row">
                      <md-checkbox ng-model="vm.workorder.isInternalBuild"
                                   name="isInternalBuild" class="margin-0"
                                   ng-change="vm.changeInternalBuild($event)"
                                   ng-disabled="vm.disableInternalBuild || vm.isWoInSpecificStatusNotAllowedToChange">
                        <p class="label-container">
                          {{vm.allLabelConstant.Workorder.InternalBuild}}
                        </p>
                      </md-checkbox>
                      <md-icon layout="row" layout-align="center center" class="icon-question-mark-circle help-icon font-size-inherit ">
                        <md-tooltip md-direction="top">{{vm.allLabelConstant.Workorder.InternalBuildHelp}}</md-tooltip>
                      </md-icon>
                    </div>
                  </td>
                  <th><p class="label-container">{{vm.allLabelConstant.Workorder.PropUmidQty}}<span ng-if="vm.workorder.isInternalBuild">&nbsp;*</span></p></th>
                  <td class="width-180">
                    <md-input-container>
                      <input type="number" name="proposedUmidQty" ng-model="vm.workorder.proposedUmidQty"
                             onkeypress="return OnlyNumeric(event)"
                             ng-change="vm.checkPropUmidQty()"
                             min="{{vm.workorder.isInternalBuild ? 1 : 0}}"
                             ng-required="vm.workorder.isInternalBuild ? true : false"
                             placeholder="vm.allLabelConstant.Workorder.PropUmidQty"
                             ng-disabled="vm.disableInternalBuild || !vm.workorder.isInternalBuild || vm.isWoInSpecificStatusNotAllowedToChange">
                      <div ng-messages="vm.frmWorkOrderDetails.proposedUmidQty.$error" role="alert">
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                        <div ng-message="min">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.MIN_LENGTH}}</span>
                        </div>
                        <div ng-message="InValidProposedUmidQty">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.PROPQTY_INVALID}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <table flex="60" cellspacing="0" cellpadding="0" class="cm-table-input-main">
            <tbody>
              <tr>
                <th><p class="label-container pt-2">{{vm.allLabelConstant.Workorder.RushJob}}</p></th>
                <td>
                  <div class="" flex="100" layout="row"
                       ng-class="{'switch-disable': vm.radioButtonGroup.isHotJob.checkDisable()}">
                    <md-input-container flex="100">
                      <md-radio-group class="margin-0" layout="row" layout-align="start start" layout-wrap
                                      name="RevisedWO" ng-model="vm.workorder.isHotJob"
                                      ng-disabled="vm.radioButtonGroup.isHotJob.checkDisable() || vm.isWoInSpecificStatusNotAllowedToChange">
                        <!--ng-change="vm.radioButtonGroup.isHotJob.onChange()"-->
                        <md-radio-button class="margin-top-0" ng-repeat="item in vm.radioButtonGroup.isHotJob.array"
                                         name="{{item.Key}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                      </md-radio-group>
                    </md-input-container>
                  </div>
                </td>
                <th><p class="label-container pt-2"></p></th>
                <td>
                  <div class="" flex="100" layout="row"
                       ng-class="{'switch-disable': vm.radioButtonGroup.isRevisedWO.checkDisable()}">
                    <md-input-container flex="100">
                      <md-radio-group class="margin-0" layout="row" layout-align="start start" layout-wrap
                                      name="RevisedWO" ng-model="vm.workorder.isRevisedWO"
                                      ng-disabled="vm.radioButtonGroup.isRevisedWO.checkDisable() || vm.isWoInSpecificStatusNotAllowedToChange"
                                      ng-change="vm.radioButtonGroup.isRevisedWO.onChange()">
                        <md-radio-button class="margin-top-0" ng-repeat="item in vm.radioButtonGroup.isRevisedWO.array"
                                         name="{{item.Key}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                      </md-radio-group>
                    </md-input-container>
                  </div>
                </td>
              </tr>
              <tr>
                <th></th>
                <td colspan="3">
                  <div class="" flex="100" layout="row"
                       ng-class="{'switch-disable': vm.radioButtonGroup.isOperationTrackBySerialNo.checkDisable()}">
                    <md-input-container flex="100">
                      <md-radio-group class="margin-0" layout="row" layout-align="start start" layout-wrap
                                      name="isOperationTrackBySerialNo" ng-model="vm.workorder.isOperationTrackBySerialNo"
                                      ng-disabled="vm.radioButtonGroup.isOperationTrackBySerialNo.checkDisable() ||  vm.isWoInSpecificStatusNotAllowedToChange"
                                      last-element elementcondition="{{((!vm.workorder.woID) ? true : false)}}">
                        <md-radio-button class="margin-top-0" ng-repeat="item in vm.radioButtonGroup.isOperationTrackBySerialNo.array"
                                         name="{{item.Key}}" ng-value="{{item.Value}}">{{item.Key}}</md-radio-button>
                      </md-radio-group>
                    </md-input-container>
                  </div>
                </td>
              </tr>
              <tr>
                <th>Date Code Format</th>
                <td class="padding-left-10">
                  <md-select name="dateCodeFormat" placeholder="Select" ng-model="vm.workorder.dateCodeFormat" id="dateCodeFormat" ng-disabled="vm.isWoInSpecificStatusNotAllowedToChange"
                             md-container-class="containerClass cm-md-select" class="margin-0">
                    <md-option ng-value="">Select</md-option>
                    <md-option ng-repeat="option in vm.dateCodeFormats" value={{option}}>{{option}}</md-option>
                  </md-select>
                </td>
                <th>Date Code</th>
                <td class="padding-left-10">
                  <md-input-container flex="100">
                    <input type="text" name="dateCode" class="padding-left-10"
                           ng-disabled="(vm.workorder.dateCodeFormat ? false : true) || vm.isWoInSpecificStatusNotAllowedToChange"
                           maxlength="4"
                           custom-blur="vm.checkDateCode()"
                           ng-model="vm.workorder.dateCode" onkeypress="return OnlyNumeric(event, this)">
                    <div ng-messages="vm.frmWorkOrderDetails.dateCode.$error" role="alert">
                      <div ng-message="isInValidDatecode">
                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                      </div>
                    </div>
                  </md-input-container>
                </td>
              </tr>
              <tr>
                <th></th>
                <td>
                  <md-button class="md-raised md-primary mv-0 margin-right-0"
                             ng-click="vm.generateSerialNo($event);"
                             ng-disabled="!vm.workorder.woID || vm.isWOUnderTermination || vm.isWoInSpecificStatusNotAllowedToChange"
                             last-element elementcondition="{{((!(vm.SalesorderListWoWise && vm.SalesorderListWoWise.length > 0)) && (!vm.workorder.woID || !vm.isWOUnderTermination) ? true : false)}}">Generate/View Sr#</md-button>
                </td>
              </tr>

            </tbody>
          </table>
          <table flex="40" cellspacing="0" cellpadding="0" class="cm-table-input-main">
            <tbody>
              <tr>
                <th>
                  <p class="label-container">
                    Total Assigned PO Qty
                    <span ng-if="!vm.workorder.isRevisedWO">&nbsp;</span>
                  </p>
                </th>
                <td>
                  <span class="cm-custom-td-span text-right padding-right-20"><b>{{vm.totalPOqty}}</b></span>
                </td>
              </tr>
              <tr>
                <th><p class="label-container">{{vm.allLabelConstant.Workorder.ExcessBuildQty}}</p></th>
                <td>
                  <md-input-container flex="100">
                    <input type="number" name="excessQty" ng-model="vm.workorder.excessQty"
                           onkeypress="return OnlyNumeric(event)"
                           ng-change="vm.checkQty()" min="0"
                           placeholder="vm.allLabelConstant.Workorder.ExcessBuildQty"
                           ng-disabled="vm.isWOUnderTermination || vm.workorder.isRevisedWO || vm.isWoInSpecificStatusNotAllowedToChange">
                    <div ng-messages="vm.frmWorkOrderDetails.excessQty.$error" role="alert">
                      <div ng-message="min">
                        <span>{{vm.CORE_MESSAGE_CONSTANT.MIN}}</span>
                      </div>
                      <div ng-message="invalidexcessQty">
                        <span>{{vm.CORE_MESSAGE_CONSTANT.INVALID}}</span>
                      </div>
                    </div>
                  </md-input-container>
                </td>
              </tr>
              <tr>
                <th>
                  <p class="label-container">
                    {{vm.allLabelConstant.Workorder.BuildQty}}
                    <span ng-if="!(vm.isWOUnderTermination || vm.workorder.isRevisedWO)">&nbsp;*</span>
                  </p>
                </th>
                <td>
                  <md-input-container>
                    <input type="number" name="buildQty" ng-model="vm.workorder.buildQty"
                           placeholder="vm.allLabelConstant.Workorder.BuildQty" ng-required="vm.workorder.isRevisedWO ? false : true"
                           onkeypress="return OnlyNumeric(event)"
                           ng-change="vm.workorder.buildQty?vm.checkBuildExcessQtyValidation():vm.workorder.buildQty"
                           ng-disabled="vm.isWOUnderTermination || vm.workorder.isRevisedWO || vm.isWoInSpecificStatusNotAllowedToChange"
                           min="{{vm.workorder.isRevisedWO ? '' : ((vm.workorder.excessQty || 0)+1)}}">
                    <div ng-messages="vm.frmWorkOrderDetails.buildQty.$error || vm.frmWorkOrderDetails.buildQty.$touched"
                         role="alert">
                      <div ng-message="required">
                        <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                      </div>
                      <div ng-message="min">
                        <span>{{vm.CORE_MESSAGE_CONSTANT.BUILDQTY_INVALID}}</span>
                      </div>
                    </div>
                  </md-input-container>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</form>
<div class="margin-bottom-5" layout="row" flex="100" ng-if="vm.workorder.woID">
  <workorder-temperature-sensitive-components wo-id="vm.workorder.woID" is-include-sub-assembly="vm.workorder.isIncludeSubAssembly ? true : false" flex="100"></workorder-temperature-sensitive-components>
</div>
<div class="wo-salesorder-grid cm-custom-label-common margin-bottom-5" flex="100">
  <div layout="column" class="margin-left-0" ng-show="vm.SalesorderListWoWise.length > 0 && vm.workorder.woID && !vm.workorder.isRevisedWO">
    <form name="vm.WoSalesOrderDetails" class="md-inline-form padding-bottom-0" novalidate>
      <div class="cm-section-main">
        <div class="cm-section-header" flex="100" layout="row" layout-align="space-between center">
          <div>
            <h2 class="inline-block">Assigned Sales Order Details</h2>
          </div>
          <div>
            <md-icon role="img" md-font-icon="icon-refresh" class="material-icons mat-icon icon-plus cursor-pointer" ng-click="vm.refreshSalesOrder()"></md-icon>
            <md-tooltip>Refresh Assigned Sales Order Details</md-tooltip>
          </div>
        </div>
        <div class="cm-section-inner" flex="100">
          <div class="cm-common-table-ui" flex="100">
            <table width="100%" class="table">
              <thead>
                <tr class="wo-salesorder-grid-header">
                  <th>
                    <b>Type</b>
                  </th>
                  <th>
                    <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToSalesOrderList()">
                      <b>{{vm.allLabelConstant.SalesOrder.SO}}, {{vm.allLabelConstant.Assembly.PIDCode}}, {{vm.allLabelConstant.Workorder.POQty}} (LineID)</b>
                    </a>
                  </th>
                  <th>
                    <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToSalesOrderList();$event.preventDefault();">
                      <b>{{vm.allLabelConstant.Workorder.PO}}</b>
                    </a>
                  </th>
                  <th class="text-right">
                    <b>QPA</b>
                  </th>
                  <th class="text-right">
                    <b>{{vm.allLabelConstant.Workorder.POQty}}</b>
                  </th>
                  <th class="text-right">
                    <b>{{vm.allLabelConstant.Qty.IdlePOQty}}</b>
                  </th>
                  <th ng-hide="true" class="text-right">
                    <b>{{vm.allLabelConstant.Workorder.ScrappedQty}}</b>
                  </th>
                  <th class="text-right">
                    <b>{{vm.allLabelConstant.Workorder.AssignedPOQty}}</b>
                  </th>
                  <th class="text-right">
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="salesItem in vm.SalesorderListWoWise" class="wo-salesorder-grid-row" ng-form="woSoDtl_{{$index}}">
                  <td>
                    <md-input-container class="autocompletecustom cm-custom-autocomplete cm-so-input-container"
                                        custom-auto-focus="{{vm.SalesorderListWoWise.length==1?true:false}}">
                      <md-select name="assyType"
                                 ng-model="salesItem.assyType"
                                 ng-required="false"
                                 ng-disabled="!salesItem.isEditClicked || salesItem.woSalesOrderDetID || vm.isWoInSpecificStatusNotAllowedToChange"
                                 md-container-class="containerClass" ng-change="vm.bindAssembly(salesItem)">
                        <md-option ng-value="1">Assembly</md-option>
                        <md-option ng-value="2">Sub Assembly</md-option>
                      </md-select>
                    </md-input-container>
                  </td>
                  <td>
                    <span ng-if="salesItem.woSalesOrderDetID" class="padding-5 cm-custom-td-span">
                      <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToManageSalesOrder(salesItem);">{{salesItem.salesOrderNumber}}, {{salesItem.PIDCode}}, {{salesItem.qty}}, ({{salesItem.lineID}})</a>
                    </span>
                    <md-input-container class="autocompletecustom cm-custom-autocomplete cm-so-input-container"
                                        custom-auto-focus="{{vm.SalesorderListWoWise.length==1?true:false || salesItem.isCustomFocus }}"
                                        ng-if="!salesItem.woSalesOrderDetID">
                      <custom-auto-complete datalist="salesItem.filteredSOList"
                                            column-name="salesItem.autoCompleteSalesOrderNumber.columnName"
                                            key-column-name="salesItem.autoCompleteSalesOrderNumber.keyColumnName"
                                            input-name="salesItem.autoCompleteSalesOrderNumber.inputName"
                                            placeholder-name="salesItem.autoCompleteSalesOrderNumber.placeholderName"
                                            key-column-id="salesItem.autoCompleteSalesOrderNumber.keyColumnId"
                                            is-required="salesItem.autoCompleteSalesOrderNumber.isRequired"
                                            is-addnew="salesItem.autoCompleteSalesOrderNumber.isAddnew"
                                            is-disabled="!salesItem.isEditClicked || vm.isWoInSpecificStatusNotAllowedToChange"
                                            on-select-callback-fn="salesItem.autoCompleteSalesOrderNumber.onSelectCallbackFn"
                                            callback-fn-param="salesItem"
                                            last-element elementcondition="{{((vm.SalesorderListWoWise.length - 1) == $index ? true : false)}}"
                                            is-refresh-disabled="true">
                      </custom-auto-complete>
                    </md-input-container>
                  </td>
                  <td>
                    <span class="cm-custom-td-span">
                      <a tabindex="-1" class="cm-text-decoration" ng-click="vm.goToManageSalesOrder(salesItem);">{{salesItem.poNumber}}</a>
                    </span>
                  </td>
                  <td class="text-right">
                    <span class="cm-custom-td-span">{{salesItem.qpaa}}</span>
                  </td>
                  <td class="text-right">
                    <span class="cm-custom-td-span" ng-if="salesItem.oldPOQty"><b>{{salesItem.oldPOQty | numberWithoutDecimal}}</b></span>
                  </td>
                  <td class="text-right">
                    <span class="cm-custom-td-span"><b>{{salesItem.actualIdlePOQty | numberWithoutDecimal}}</b></span>
                  </td>
                  <td ng-hide="true" class="text-right">
                    <md-input-container class="cm-so-input-container">
                      <input type="number" name="scrapQty{{$index}}" ng-model="salesItem.scrapQty"
                             placeholder="" max="{{vm.getMaxScrapQty(vm.SalesorderListWoWise, salesItem, vm.woAssemblyDetails.scrapQty)}}"
                             onkeypress="return OnlyNumeric(event)"
                             ng-disabled="salesItem.assyType == '2' || !salesItem.autoCompleteSalesOrderNumber.keyColumnId || !salesItem.isEditClicked || vm.isWoInSpecificStatusNotAllowedToChange"
                             min="0">
                      <div ng-messages="vm.WoSalesOrderDetails['scrapQty'+$index].$error"
                           role="alert" md-auto-hide="false">
                        <div ng-message="max">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.SCRAP_QTY_INVALID_MESSAGE}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                  <td class="text-right">
                    <md-input-container class="cm-so-input-container">
                      <input type="number" name="poQty{{$index}}" ng-model="salesItem.poQty"
                             placeholder="" min="0" max="{{vm.getMaxAssignQty(vm.SalesorderListWoWise, salesItem)}}"
                             onkeypress="return OnlyNumeric(event)"
                             ng-disabled="!salesItem.autoCompleteSalesOrderNumber.keyColumnId || !salesItem.isEditClicked || vm.isWoInSpecificStatusNotAllowedToChange"
                             ng-required="salesItem.autoCompleteSalesOrderNumber.keyColumnId"
                             ng-change="vm.isWOUnderTermination ? angular.noop : vm.checkBuildQtyValidation()">
                      <div ng-messages="vm.WoSalesOrderDetails['poQty'+$index].$error"
                           role="alert" md-auto-hide="false">
                        <div ng-message="max">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.PO_QTY_INVALID_MESSAGE}}</span>
                        </div>
                        <div ng-message="required">
                          <span>{{vm.CORE_MESSAGE_CONSTANT.REQUIRED}}</span>
                        </div>
                      </div>
                    </md-input-container>
                  </td>
                  <td>                    
                    <md-input-container class="autocompletecustom cm-custom-autocomplete nowrap margin-top-0 margin-bottom-0">
                      <md-button class="md-primary md-raised mt-0 mr-0 mb-0 margin-left-5-imp" ng-click="vm.SaveWoSalesOrdrDetail(salesItem,$index, $event)"
                                 ng-if="salesItem.isEditClicked"
                                 ng-disabled="vm.saveSODisable || vm.isWoInSpecificStatusNotAllowedToChange"
                                 ng-class="{'md-formdirty': vm.checkFormDirty(vm.WoSalesOrderDetails['woSoDtl_'+ {{$index}}],null)}">
                        Save
                      </md-button>
                      <md-button class="md-primary md-raised mt-0 mr-0 mb-0 margin-left-5-imp" ng-if="salesItem.woSalesOrderDetID && !salesItem.isEditClicked"
                                 ng-disabled="(vm.workorder.woStatus >= vm.DisplayStatus.Published.ID && salesItem.kitReleaseCnt > 0) || empDeptItem.isEditClicked || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination || vm.isWoInSpecificStatusNotAllowedToChange"
                                 ng-click="vm.woSalesOrderEditClicked(salesItem)">
                        Edit
                      </md-button>
                      <md-button class="md-primary md-raised mt-0 mr-0 mb-0 margin-left-5-imp"
                                 ng-hide="!salesItem.woSalesOrderDetID"
                                 ng-disabled="(vm.workorder.woStatus >= vm.DisplayStatus.Published.ID && salesItem.kitReleaseCnt > 0) || vm.workorder.woStatus == vm.DisplayStatus.Published.ID || vm.isWOUnderTermination
                               || vm.isWoInSpecificStatusNotAllowedToChange"
                                 ng-click="vm.deleteWoSalesOrdrDetail(salesItem, $event)">
                        Delete
                      </md-button>
                    </md-input-container>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="empty-state text-center full-height" flex="100" layout="row" layout-align="center center" layout-wrap
       ng-if="vm.workorder.mfgPN && vm.workorder.woID && vm.salesOrderData.length == 0 && !vm.isWOSalesOrderDetails && vm.SalesorderListWoWise.length == 0">
    <div class="emty-icon" flex="100">
      <img ng-src="{{vm.EmptyMesssageSalesOrder.IMAGEURL}}" />
    </div>
    <p flex="100" class="empty-state-title">{{vm.EmptyMesssageSalesOrder.MESSAGE}}</p>
    <p flex="100">
      {{vm.EmptyMesssageSalesOrder.ADDNEWMESSAGE}}
    </p>
    <p flex="100">
      <md-button class="md-fab md-mini" aria-label="Add Sales Order" ng-click="vm.addSalesOrderRecord()"
                 ng-disabled="vm.isWoInSpecificStatusNotAllowedToChange">
        <md-icon role="img" md-font-icon="icon-plus" class="material-icons mat-icon icon-plus"></md-icon>
        <md-tooltip>Add Sales Order</md-tooltip>
      </md-button>
      <md-button class="md-fab md-mini" aria-label="Refresh Sales Order" ng-click="vm.refreshSalesOrder()">
        <md-icon role="img" md-font-icon="icon-refresh" class="material-icons mat-icon icon-plus"></md-icon>
        <md-tooltip>Refresh Sales Order</md-tooltip>
      </md-button>
    </p>
  </div>
</div>
<div layout="row" flex="100" ng-if="vm.foundSOWithDetails.salesOrderDetailID && vm.autoCompleteAssy.keyColumnId">
  <workorder-subassembly-details so-det-id="vm.foundSOWithDetails.salesOrderDetailID"
                                 assy-id="vm.autoCompleteAssy.keyColumnId"
                                 wo-obj="vm.workorder"
                                 build-qty="vm.workorder.buildQty"
                                 is-include-sub-assembly="vm.workorder.isIncludeSubAssembly ? true : false"
                                 flex="100"></workorder-subassembly-details>
</div>
